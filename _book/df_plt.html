<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics</title>
  <meta name="description" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  
  
  

<meta name="author" content="Lecturers: Dr Eduard Campillo-Funollet and Dr Gaetano Romano" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="maps_alg.html"/>
<link rel="next" href="challenge.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro_prog.html"><a href="intro_prog.html"><i class="fa fa-check"></i><b>1</b> Introduction to Computational Mathematics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro_prog.html"><a href="intro_prog.html#what-is-a-computer"><i class="fa fa-check"></i><b>1.1</b> What is a Computer?</a></li>
<li class="chapter" data-level="1.2" data-path="intro_prog.html"><a href="intro_prog.html#computing-accessing-memory-and-storing"><i class="fa fa-check"></i><b>1.2</b> Computing, Accessing Memory and Storing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="log_vec.html"><a href="log_vec.html"><i class="fa fa-check"></i><b>2</b> Logic and Vectors</a>
<ul>
<li class="chapter" data-level="2.1" data-path="log_vec.html"><a href="log_vec.html#comparisons"><i class="fa fa-check"></i><b>2.1</b> Comparisons</a></li>
<li class="chapter" data-level="2.2" data-path="log_vec.html"><a href="log_vec.html#logical-arithmetic"><i class="fa fa-check"></i><b>2.2</b> Logical Arithmetic</a></li>
<li class="chapter" data-level="2.3" data-path="log_vec.html"><a href="log_vec.html#flow"><i class="fa fa-check"></i><b>2.3</b> Flow</a></li>
<li class="chapter" data-level="2.4" data-path="log_vec.html"><a href="log_vec.html#vectors"><i class="fa fa-check"></i><b>2.4</b> Vectors</a></li>
<li class="chapter" data-level="2.5" data-path="log_vec.html"><a href="log_vec.html#accessing-vectors"><i class="fa fa-check"></i><b>2.5</b> Accessing vectors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="func_loop.html"><a href="func_loop.html"><i class="fa fa-check"></i><b>3</b> Functions and Loops</a>
<ul>
<li class="chapter" data-level="3.1" data-path="func_loop.html"><a href="func_loop.html#functions"><i class="fa fa-check"></i><b>3.1</b> Functions</a></li>
<li class="chapter" data-level="3.2" data-path="func_loop.html"><a href="func_loop.html#looping"><i class="fa fa-check"></i><b>3.2</b> State and For Loop</a></li>
<li class="chapter" data-level="3.3" data-path="func_loop.html"><a href="func_loop.html#more-about-looping"><i class="fa fa-check"></i><b>3.3</b> More about looping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="maps_alg.html"><a href="maps_alg.html"><i class="fa fa-check"></i><b>4</b> Functional Programming and Linear Algebra</a>
<ul>
<li class="chapter" data-level="4.1" data-path="maps_alg.html"><a href="maps_alg.html#Maps"><i class="fa fa-check"></i><b>4.1</b> An intro to Functional Programming</a></li>
<li class="chapter" data-level="4.2" data-path="maps_alg.html"><a href="maps_alg.html#doing-linear-algebra"><i class="fa fa-check"></i><b>4.2</b> Doing Linear Algebra</a></li>
<li class="chapter" data-level="4.3" data-path="maps_alg.html"><a href="maps_alg.html#an-end-note-to-this-chapter"><i class="fa fa-check"></i><b>4.3</b> An end note to this chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="df_plt.html"><a href="df_plt.html"><i class="fa fa-check"></i><b>5</b> Data Frames and Plotting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="df_plt.html"><a href="df_plt.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data Frames</a></li>
<li class="chapter" data-level="5.2" data-path="df_plt.html"><a href="df_plt.html#plotting-with-ggplot-and-plotnine"><i class="fa fa-check"></i><b>5.2</b> Plotting with ggplot (and plotnine)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="challenge.html"><a href="challenge.html"><i class="fa fa-check"></i><b>6</b> Additional Programming Challenges</a>
<ul>
<li class="chapter" data-level="6.1" data-path="challenge.html"><a href="challenge.html#part-1-scientific-computing"><i class="fa fa-check"></i><b>6.1</b> Part 1: Scientific Computing</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lancaster University MATH245 Computational Mathematics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="df_plt" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Data Frames and Plotting<a href="df_plt.html#df_plt" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter, we will delve into the world of Data Frames and Plotting.
These are crucial concepts in Computational Mathematics that will enable us to handle and visualize data effectively.</p>
<div id="a-note-for-r-users." class="section level4 hasAnchor" number="5.0.0.1">
<h4><span class="header-section-number">5.0.0.1</span> A note for R users.<a href="df_plt.html#a-note-for-r-users." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Before we start, we will need to import a very important library for writing modern R code: <code>tidyverse</code>.
As mentioned earlier, R has changed a lot over the recent years, including more and more tools for functional programming, fast data manipulation, exploration, analysis and plotting.</p>
<p>The <code>tidyverse</code> includes a wide range of packages that improve R for scientific computing.
We have already seen one of those, in the past week: the <code>purrr</code> library.
However, there’s much more, other of the core packages in the <code>tidyverse</code> include <code>ggplot2</code> for data visualization, <code>dplyr</code> for data manipulation, and <code>tidyr</code> for data cleaning.
By using these packages together, you can efficiently import, clean, manipulate, visualize, and analyze your data in a consistent and reproducible manner.
This makes the <code>tidyverse</code> a powerful tool for modern scientific computing, and for this reason I heavily encourage you to use its functions and packages for the rest of this entire module and for your future analyses.</p>
<p>To install the tidyverse (already installed on University Machines), run:</p>
<div class="sourceCode" id="cb673"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb673-1"><a href="df_plt.html#cb673-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>And to load the package:</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="df_plt.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>You only need to install a package once.
But you have to load all the packages you want to use at the start of every session.
As a suggestion, make sure the <code>library(tidyverse)</code> command sits at the top of your script from now on.</p>
<p>In the previous chapters, we learned how to truly extract the power of functions.
Well, one of the things introduced in <code>purrr</code>, and that goes really well with the <code>tidyverse</code> package, is the pipe operator.
This operator allows you to pass the output of one function to another function as the first argument.
<strong>This translates the mathematical function composition</strong> in programming, e.g. <span class="math inline">\((f_1 \circ f_2)(x)\)</span>.
This operator is written as <code>|&gt;</code> and is used to express a sequence of multiple operations in a more readable and intuitive way.
In code, the equivalent of our expression would be <code>x |&gt; f1 |&gt; f2</code>.</p>
<p>For example, if we want to compute the natural logarithm of the sum of the first 10 natural numbers, <span class="math inline">\(\ln(1 + 2+ 3+ ... + 10)\)</span>, this is:</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="df_plt.html#cb675-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span> <span class="co"># create a vector with the first 10 integers</span></span>
<span id="cb675-2"><a href="df_plt.html#cb675-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> <span class="fu">sum</span>() <span class="sc">|&gt;</span> <span class="fu">log</span>()</span></code></pre></div>
<pre><code>## [1] 4.007333</code></pre>
<p>In this example, we start with a vector <code>x</code> containing the numbers from 1 to 10.
We then use the pipe operator to pass this vector to the <code>sum()</code> function, which calculates the sum of all elements in the vector.
The result of this operation (55) is then passed to the <code>log()</code> function, which calculates the natural logarithm of the input.</p>
<p>This code is equivalent to writing:</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="df_plt.html#cb677-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb677-2"><a href="df_plt.html#cb677-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sum</span>(x))</span></code></pre></div>
<pre><code>## [1] 4.007333</code></pre>
<p>As you can see, using the pipe operator allows us to express the sequence of operations in a more readable and intuitive way.
It can be particularly useful when working with complex data transformations, as it allows you to write code that closely matches the logical sequence of operations you have in mind.</p>
<p>Remember that the pipe takes the output on its left and passes it <strong>as the first argument</strong> to the function on its right.
For example, the function <code>log</code> takes as first argument the number and as second argument the base of our logarithm.
If we want to compute the base-10 logarithm instead of the natural logarithm, we can do this by changing the second <code>base</code> argument after the piping:</p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="df_plt.html#cb679-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb679-2"><a href="df_plt.html#cb679-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">|&gt;</span> <span class="fu">sum</span>() <span class="sc">|&gt;</span> <span class="fu">log</span>(<span class="at">base =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 1.740363</code></pre>
<p>This code is equivalent to writing:</p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="df_plt.html#cb681-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb681-2"><a href="df_plt.html#cb681-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span>(<span class="fu">sum</span>(x), <span class="at">base =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 1.740363</code></pre>
</div>
<div id="a-note-for-python-users" class="section level4 hasAnchor" number="5.0.0.2">
<h4><span class="header-section-number">5.0.0.2</span> A note for Python users<a href="df_plt.html#a-note-for-python-users" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For this week, we will continue to use the <code>pandas</code> and <code>numpy</code> packages, which, as we learned, are fundamental tools for data manipulation and numerical computations in Python.</p>
<div class="sourceCode" id="cb683"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb683-1"><a href="df_plt.html#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb683-2"><a href="df_plt.html#cb683-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code></pre></div>
<p>However, we will also introduce a new package: <code>plotnine</code>.
This package is not included in the standard Python library, so you’ll need to install it.
You can do this using pip, Python’s package installer.
To do so, type the following command:</p>
<div class="sourceCode" id="cb684"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb684-1"><a href="df_plt.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>python <span class="op">-</span>m pip install plotnine</span></code></pre></div>
<p>You only need to install this package once, and then you will be able to load it as you did with <code>numpy</code> or <code>pandas</code>.</p>
<p><code>plotnine</code> is an implementation of a grammar of graphics in Python, based on <code>ggplot2</code> in R.
<code>ggplot2</code> is one of the most used libraries for data visualization in R, and <code>plotnine</code> brings its powerful data visualization capabilities to Python.
It’s designed to work seamlessly with <code>pandas</code> data frames, making it extremely convenient for creating complex and beautiful statistical plots.</p>
<p>Once you’ve installed <code>plotnine</code>, you can import it in your Python scripts using the following command:</p>
<div class="sourceCode" id="cb685"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb685-1"><a href="df_plt.html#cb685-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span></code></pre></div>
<p>With <code>plotnine</code>, you’ll be able to create a wide variety of plots and visualizations, and gain deeper insights from your data.</p>
</div>
<div id="data-frames" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Data Frames<a href="df_plt.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A <strong>data frame</strong> is a table-like data structure available in languages like R and Python.
It is similar to a spreadsheet or SQL table, or a dictionary of Series objects in Python.
Data frames are generally used for statistical analysis in R and Python programming.</p>
<p>In a data frame, the columns are named vectors, each containing a particular type of data (numeric, string, date, time).
Unlike a matrix where every element must have the same data type, a data frame allows each column to have a different data type.
This makes data frames more flexible for data analysis tasks where we often deal with data that have <em>heterogeneous</em> types.
The columns of a data frame are often referred to as <strong>variables</strong> or <strong>features</strong> in statistics.
In the context of mathematics or physics, these could be considered as <strong>parameters</strong> or <strong>attributes</strong>.
The rows of the data frame correspond to a single observation across these variables.</p>
<div id="constructing-and-accessing-data-frames" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Constructing and Accessing Data Frames<a href="df_plt.html#constructing-and-accessing-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s start by constructing a data frame.
We’ll use a dataset of different types of non-dairy milks, with their respective nutritional contents:</p>
<table style="width:100%;">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>Milk Type</th>
<th>Calories</th>
<th>Protein (g)</th>
<th>Fiber (g)</th>
<th>Carbohydrates (g)</th>
<th>Sugars (g)</th>
<th>Fats (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Almond</td>
<td>60</td>
<td>1</td>
<td>1</td>
<td>8</td>
<td>7</td>
<td>2.5</td>
</tr>
<tr class="even">
<td>Soy</td>
<td>100</td>
<td>7</td>
<td>2</td>
<td>10</td>
<td>NA</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Oat</td>
<td>120</td>
<td>3</td>
<td>NA</td>
<td>20</td>
<td>19</td>
<td>2.5</td>
</tr>
<tr class="even">
<td>Rice</td>
<td>130</td>
<td>1</td>
<td>NA</td>
<td>25</td>
<td>NA</td>
<td>2.5</td>
</tr>
</tbody>
</table>
<p>In this dataset, the first column will be a <code>character</code> column, to indicate the type of the milk, whilst the others will be numericals.
Furthemore, the “Fiber” and “Sugars” columns for Soy, Oat and Rice milk have NA values, indicating missing or not applicable data.
This is often the case in real data, where usually information will not be available to us in the best way as possible.
In this case, R and python will just tell us that we have a “Not Applicable (NA)” or “Not a Number (NaN)” unknown value.</p>
<p>Now, let’s see how we can create this data frame in R and Python:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="df_plt.html#cb686-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a data frame in R</span></span>
<span id="cb686-2"><a href="df_plt.html#cb686-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb686-3"><a href="df_plt.html#cb686-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Milk_Type =</span> <span class="fu">c</span>(<span class="st">&quot;Almond&quot;</span>, <span class="st">&quot;Soy&quot;</span>, <span class="st">&quot;Oat&quot;</span>, <span class="st">&quot;Rice&quot;</span>),</span>
<span id="cb686-4"><a href="df_plt.html#cb686-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Calories =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">130</span>),</span>
<span id="cb686-5"><a href="df_plt.html#cb686-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Protein =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb686-6"><a href="df_plt.html#cb686-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fiber =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb686-7"><a href="df_plt.html#cb686-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Carbohydrates =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>),</span>
<span id="cb686-8"><a href="df_plt.html#cb686-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sugars =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">NA</span>, <span class="dv">19</span>, <span class="cn">NA</span>),</span>
<span id="cb686-9"><a href="df_plt.html#cb686-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fats =</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="dv">4</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>)</span>
<span id="cb686-10"><a href="df_plt.html#cb686-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb686-11"><a href="df_plt.html#cb686-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(milk_df)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## 2 Soy            100       7     2            10     NA
## 3 Oat            120       3    NA            20     19
## 4 Rice           130       1    NA            25     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb688"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb688-1"><a href="df_plt.html#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a data frame in Python</span></span>
<span id="cb688-2"><a href="df_plt.html#cb688-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb688-3"><a href="df_plt.html#cb688-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Milk_Type&#39;</span>: [<span class="st">&#39;Almond&#39;</span>, <span class="st">&#39;Soy&#39;</span>, <span class="st">&#39;Oat&#39;</span>, <span class="st">&#39;Rice&#39;</span>],</span>
<span id="cb688-4"><a href="df_plt.html#cb688-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Calories&#39;</span>: [<span class="dv">60</span>, <span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">130</span>],</span>
<span id="cb688-5"><a href="df_plt.html#cb688-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Protein&#39;</span>: [<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">1</span>],</span>
<span id="cb688-6"><a href="df_plt.html#cb688-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Fiber&#39;</span>: [<span class="dv">1</span>, <span class="dv">2</span>, np.nan, np.nan],</span>
<span id="cb688-7"><a href="df_plt.html#cb688-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Carbohydrates&#39;</span>: [<span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>],</span>
<span id="cb688-8"><a href="df_plt.html#cb688-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Sugars&#39;</span>: [<span class="dv">7</span>, np.nan, <span class="dv">19</span>, np.nan],</span>
<span id="cb688-9"><a href="df_plt.html#cb688-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Fats&#39;</span>: [<span class="fl">2.5</span>, <span class="dv">4</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>]</span>
<span id="cb688-10"><a href="df_plt.html#cb688-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb688-11"><a href="df_plt.html#cb688-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-12"><a href="df_plt.html#cb688-12" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb688-13"><a href="df_plt.html#cb688-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(milk_df)</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0
## 2       Oat       120        3    NaN             20    19.0   2.5
## 3      Rice       130        1    NaN             25     NaN   2.5</code></pre>
</div>
</div>
<p><strong>Accessing Variables</strong> To access individual variables (columns) of the data frame, we can use the <code>$</code> operator in R and the <code>[]</code> operator in Python:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb690"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb690-1"><a href="df_plt.html#cb690-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; column in R</span></span>
<span id="cb690-2"><a href="df_plt.html#cb690-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb690-3"><a href="df_plt.html#cb690-3" aria-hidden="true" tabindex="-1"></a><span class="co"># way 1</span></span>
<span id="cb690-4"><a href="df_plt.html#cb690-4" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&quot;Calories&quot;</span>]</span></code></pre></div>
<pre><code>## # A tibble: 4 × 1
##   Calories
##      &lt;dbl&gt;
## 1       60
## 2      100
## 3      120
## 4      130</code></pre>
<div class="sourceCode" id="cb692"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb692-1"><a href="df_plt.html#cb692-1" aria-hidden="true" tabindex="-1"></a><span class="co"># way 2</span></span>
<span id="cb692-2"><a href="df_plt.html#cb692-2" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>Calories</span></code></pre></div>
<pre><code>## [1]  60 100 120 130</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb694"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb694-1"><a href="df_plt.html#cb694-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; column in Python</span></span>
<span id="cb694-2"><a href="df_plt.html#cb694-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb694-3"><a href="df_plt.html#cb694-3" aria-hidden="true" tabindex="-1"></a><span class="co"># way 1</span></span>
<span id="cb694-4"><a href="df_plt.html#cb694-4" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;Calories&#39;</span>]</span></code></pre></div>
<pre><code>## 0     60
## 1    100
## 2    120
## 3    130
## Name: Calories, dtype: int64</code></pre>
<div class="sourceCode" id="cb696"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb696-1"><a href="df_plt.html#cb696-1" aria-hidden="true" tabindex="-1"></a><span class="co"># way 2</span></span>
<span id="cb696-2"><a href="df_plt.html#cb696-2" aria-hidden="true" tabindex="-1"></a>milk_df.Calories</span></code></pre></div>
<pre><code>## 0     60
## 1    100
## 2    120
## 3    130
## Name: Calories, dtype: int64</code></pre>
</div>
</div>
<p>This will return the relative column.</p>
<p><strong>NOTE for R users.</strong> In R, we have two different behaviours if we use <code>df["COLNAME"]</code> compared to <code>df$COLNAME</code>. In the first case, a subset of our data frame is returned (and the class is mantained), in the second case, we return the column as a vector (without the column title!). Additionally, we can use the <code>select()</code> function from the <code>tidyverse</code> package to select columns.</p>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="df_plt.html#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the select() function in R</span></span>
<span id="cb698-2"><a href="df_plt.html#cb698-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="sc">|&gt;</span> <span class="fu">select</span>(Calories)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 1
##   Calories
##      &lt;dbl&gt;
## 1       60
## 2      100
## 3      120
## 4      130</code></pre>
<p>Recall that the pipe operator (<code>|&gt;</code>) is used to chain operations together, so it will take whatever we have at the left, and use it as a first argument to the function to the right.
The above R code is equivalent to <code>select(milk_df, Calories)</code>.
Note, <code>select</code> will return the column as a subset of a data frame, and is equivalent to the <code>[""]</code> notation.
Sometimes this can be better, as you might not want to change the type of your objects <em>inadvertently during execution</em>.</p>
<p><strong>Accessing multiple columns.</strong> To access multiple variables at the same time, we can pass a vector of variable names:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb700"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb700-1"><a href="df_plt.html#cb700-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; and &#39;Protein&#39; columns in R and storing it </span></span>
<span id="cb700-2"><a href="df_plt.html#cb700-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in a new variable</span></span>
<span id="cb700-3"><a href="df_plt.html#cb700-3" aria-hidden="true" tabindex="-1"></a>calories_protein <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">select</span>(Calories, Protein)</span>
<span id="cb700-4"><a href="df_plt.html#cb700-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb700-5"><a href="df_plt.html#cb700-5" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative</span></span>
<span id="cb700-6"><a href="df_plt.html#cb700-6" aria-hidden="true" tabindex="-1"></a><span class="co"># calories_protein &lt;- milk_df[c(&quot;Calories&quot;, &quot;Protein&quot;)]</span></span>
<span id="cb700-7"><a href="df_plt.html#cb700-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb700-8"><a href="df_plt.html#cb700-8" aria-hidden="true" tabindex="-1"></a>calories_protein</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Calories Protein
##      &lt;dbl&gt;   &lt;dbl&gt;
## 1       60       1
## 2      100       7
## 3      120       3
## 4      130       1</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb702"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb702-1"><a href="df_plt.html#cb702-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; and &#39;Protein&#39; columns in Python and storing it </span></span>
<span id="cb702-2"><a href="df_plt.html#cb702-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in a new variable</span></span>
<span id="cb702-3"><a href="df_plt.html#cb702-3" aria-hidden="true" tabindex="-1"></a>calories_protein <span class="op">=</span> milk_df[[<span class="st">&#39;Calories&#39;</span>, <span class="st">&#39;Protein&#39;</span>]]</span>
<span id="cb702-4"><a href="df_plt.html#cb702-4" aria-hidden="true" tabindex="-1"></a>calories_protein</span></code></pre></div>
<pre><code>##    Calories  Protein
## 0        60        1
## 1       100        7
## 2       120        3
## 3       130        1</code></pre>
</div>
</div>
<p>Note that once we access (and store, as in this second example) a subset of a data frame, we get out another data frame. Note also that the <code>$</code> (in R) and <code>.</code> (in Python) cannot access multiple columns.</p>
<p><strong>Accessing rows.</strong> To access individual rows in the data frames, we can use indexing.
Similarly to vectors, to access multiple rows at the same time, we can pass a vector of row indices:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb704"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb704-1"><a href="df_plt.html#cb704-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first row in R</span></span>
<span id="cb704-2"><a href="df_plt.html#cb704-2" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb706"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb706-1"><a href="df_plt.html#cb706-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first and second rows in R</span></span>
<span id="cb706-2"><a href="df_plt.html#cb706-2" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 2 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## 2 Soy            100       7     2            10     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb708"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb708-1"><a href="df_plt.html#cb708-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first row in Python</span></span>
<span id="cb708-2"><a href="df_plt.html#cb708-2" aria-hidden="true" tabindex="-1"></a>milk_df.iloc[<span class="dv">0</span>]</span></code></pre></div>
<pre><code>## Milk_Type        Almond
## Calories             60
## Protein               1
## Fiber               1.0
## Carbohydrates         8
## Sugars              7.0
## Fats                2.5
## Name: 0, dtype: object</code></pre>
<div class="sourceCode" id="cb710"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb710-1"><a href="df_plt.html#cb710-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first and second rows in Python</span></span>
<span id="cb710-2"><a href="df_plt.html#cb710-2" aria-hidden="true" tabindex="-1"></a>milk_df.iloc[<span class="dv">0</span>:<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0</code></pre>
</div>
</div>
<p><strong>In R</strong>, when we use <code>[1:2, ]</code> on a data frame, we are working with a two-dimensional object.
The <code>1:2</code> represents the row indices that we want to select, and the empty space after the comma indicates that we want to select all columns.
So, <code>[1:2, ]</code> will select the first two rows and all columns of the data frame.
This is different from selecting a vector because a vector is a one-dimensional object, and we only need to specify the indices of the elements we want to select.</p>
<p><strong>In Python</strong>, when we use <code>.iloc[0:2]</code> on a data frame, we are working with a two-dimensional object.
The <code>0:2</code> represents the row indices that we want to select, and the absence of a second argument after the comma indicates that we want to select all columns.
So, <code>.iloc[0:2]</code> will select the first two rows and all columns of the data frame.
This is different from selecting elements from a vector because a list is a one-dimensional object, and we only need to specify the indices of the elements we want to select.
Note also that when accessing only one row, in python, the returned element will be reshaped into a column vector.</p>
<p>Having said that, we can also access a subset of the data frame by specifying both rows and columns <strong>simultaneously</strong>:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb712"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb712-1"><a href="df_plt.html#cb712-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing a subset of the data frame in R</span></span>
<span id="cb712-2"><a href="df_plt.html#cb712-2" aria-hidden="true" tabindex="-1"></a>subset_df <span class="ot">&lt;-</span> milk_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(<span class="st">&quot;Milk_Type&quot;</span>, <span class="st">&quot;Calories&quot;</span>, <span class="st">&quot;Protein&quot;</span>)]</span>
<span id="cb712-3"><a href="df_plt.html#cb712-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively </span></span>
<span id="cb712-4"><a href="df_plt.html#cb712-4" aria-hidden="true" tabindex="-1"></a><span class="co"># subset_df &lt;- milk_df[1:2, 1:3]</span></span>
<span id="cb712-5"><a href="df_plt.html#cb712-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb712-6"><a href="df_plt.html#cb712-6" aria-hidden="true" tabindex="-1"></a>subset_df</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Milk_Type Calories Protein
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt;
## 1 Almond          60       1
## 2 Soy            100       7</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb714"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb714-1"><a href="df_plt.html#cb714-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing a subset of the data frame in Python</span></span>
<span id="cb714-2"><a href="df_plt.html#cb714-2" aria-hidden="true" tabindex="-1"></a>subset_df <span class="op">=</span> milk_df.loc[<span class="dv">0</span>:<span class="dv">2</span>, [<span class="st">&quot;Milk_Type&quot;</span>, <span class="st">&quot;Calories&quot;</span>, <span class="st">&quot;Protein&quot;</span>]]</span>
<span id="cb714-3"><a href="df_plt.html#cb714-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively </span></span>
<span id="cb714-4"><a href="df_plt.html#cb714-4" aria-hidden="true" tabindex="-1"></a><span class="co"># subset_df = milk_df.iloc[0:2, [0, 1, 2]]</span></span>
<span id="cb714-5"><a href="df_plt.html#cb714-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb714-6"><a href="df_plt.html#cb714-6" aria-hidden="true" tabindex="-1"></a>subset_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein
## 0    Almond        60        1
## 1       Soy       100        7
## 2       Oat       120        3</code></pre>
</div>
</div>
<p><strong>NOTE for Python users</strong>: Be careful, in this second statement we used an even different function, <code>loc</code>.
In pandas, <code>loc</code> and <code>iloc</code> are two ways to select data from a DataFrame, called <em>indexers</em>.</p>
<p>The <code>loc</code> indexer is used with the actual labels of the index or columns.
On the other hand, <code>iloc</code> is used for indexing by integer position.
This means that you’re referring to the row or column by its position in the DataFrame (like the index in a vector), not by its label.
In summary, use loc when you want to refer to items by their label and iloc when you want to refer to them by their integer position.</p>
<p><strong>Overwriting Elements</strong> We can, of course, overwrite and change elements of our data frames.
For instance, the simplest thing we could do at the moment, is to fill in the missing values of our data frame for our column “Fibers”.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb716"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb716-1"><a href="df_plt.html#cb716-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputing missing values in R</span></span>
<span id="cb716-2"><a href="df_plt.html#cb716-2" aria-hidden="true" tabindex="-1"></a><span class="co"># overwriting the original dataset</span></span>
<span id="cb716-3"><a href="df_plt.html#cb716-3" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>Fiber[<span class="fu">is.na</span>(milk_df<span class="sc">$</span>Fiber)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="fl">0.7</span>)</span>
<span id="cb716-4"><a href="df_plt.html#cb716-4" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1   1               8      7
## 2 Soy            100       7   2              10     NA
## 3 Oat            120       3   1.2            20     19
## 4 Rice           130       1   0.7            25     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb718"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb718-1"><a href="df_plt.html#cb718-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputing missing values in Python</span></span>
<span id="cb718-2"><a href="df_plt.html#cb718-2" aria-hidden="true" tabindex="-1"></a><span class="co"># overwriting the original dataset</span></span>
<span id="cb718-3"><a href="df_plt.html#cb718-3" aria-hidden="true" tabindex="-1"></a>milk_df.loc[np.isnan(milk_df[<span class="st">&#39;Fiber&#39;</span>]), <span class="st">&#39;Fiber&#39;</span>] <span class="op">=</span>  [<span class="fl">1.2</span>, <span class="fl">0.7</span>]</span>
<span id="cb718-4"><a href="df_plt.html#cb718-4" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0
## 2       Oat       120        3    1.2             20    19.0   2.5
## 3      Rice       130        1    0.7             25     NaN   2.5</code></pre>
</div>
</div>
<p>Note that, to impute the missing values, we can also use the <code>replace_na()</code> function in R and the <code>fillna()</code> function in Python, but these functions will overwrite all NAs in the dataset, leaving little to no flexibility.</p>
<div id="accessing-information-about-the-data-frame" class="section level4 hasAnchor" number="5.1.1.1">
<h4><span class="header-section-number">5.1.1.1</span> Accessing Information about the Data Frame<a href="df_plt.html#accessing-information-about-the-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can access various information about the data frame, such as its dimensions, number of rows, number of columns, column names, and a summary of its contents, with a lot of different functions.
These will be not explained in detail, but can be useful for a lot of reasons related to exploratory analysis.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb720"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb720-1"><a href="df_plt.html#cb720-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing information about the data frame in R</span></span>
<span id="cb720-2"><a href="df_plt.html#cb720-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions </span></span>
<span id="cb720-3"><a href="df_plt.html#cb720-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 4 7</code></pre>
<div class="sourceCode" id="cb722"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb722-1"><a href="df_plt.html#cb722-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows and columns</span></span>
<span id="cb722-2"><a href="df_plt.html#cb722-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb724"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb724-1"><a href="df_plt.html#cb724-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb726"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb726-1"><a href="df_plt.html#cb726-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variable names</span></span>
<span id="cb726-2"><a href="df_plt.html#cb726-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] &quot;Milk_Type&quot;     &quot;Calories&quot;      &quot;Protein&quot;      
## [4] &quot;Fiber&quot;         &quot;Carbohydrates&quot; &quot;Sugars&quot;       
## [7] &quot;Fats&quot;</code></pre>
<div class="sourceCode" id="cb728"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb728-1"><a href="df_plt.html#cb728-1" aria-hidden="true" tabindex="-1"></a><span class="co">#variable names and types</span></span>
<span id="cb728-2"><a href="df_plt.html#cb728-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(milk_df)</span></code></pre></div>
<pre><code>## tibble [4 × 7] (S3: tbl_df/tbl/data.frame)
##  $ Milk_Type    : chr [1:4] &quot;Almond&quot; &quot;Soy&quot; &quot;Oat&quot; &quot;Rice&quot;
##  $ Calories     : num [1:4] 60 100 120 130
##  $ Protein      : num [1:4] 1 7 3 1
##  $ Fiber        : num [1:4] 1 2 1.2 0.7
##  $ Carbohydrates: num [1:4] 8 10 20 25
##  $ Sugars       : num [1:4] 7 NA 19 NA
##  $ Fats         : num [1:4] 2.5 4 2.5 2.5</code></pre>
<div class="sourceCode" id="cb730"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb730-1"><a href="df_plt.html#cb730-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb730-2"><a href="df_plt.html#cb730-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(milk_df)</span></code></pre></div>
<pre><code>##   Milk_Type            Calories        Protein 
##  Length:4           Min.   : 60.0   Min.   :1  
##  Class :character   1st Qu.: 90.0   1st Qu.:1  
##  Mode  :character   Median :110.0   Median :2  
##                     Mean   :102.5   Mean   :3  
##                     3rd Qu.:122.5   3rd Qu.:4  
##                     Max.   :130.0   Max.   :7  
##                                                
##      Fiber       Carbohydrates       Sugars  
##  Min.   :0.700   Min.   : 8.00   Min.   : 7  
##  1st Qu.:0.925   1st Qu.: 9.50   1st Qu.:10  
##  Median :1.100   Median :15.00   Median :13  
##  Mean   :1.225   Mean   :15.75   Mean   :13  
##  3rd Qu.:1.400   3rd Qu.:21.25   3rd Qu.:16  
##  Max.   :2.000   Max.   :25.00   Max.   :19  
##                                  NA&#39;s   :2   
##       Fats      
##  Min.   :2.500  
##  1st Qu.:2.500  
##  Median :2.500  
##  Mean   :2.875  
##  3rd Qu.:2.875  
##  Max.   :4.000  
## </code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb732"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb732-1"><a href="df_plt.html#cb732-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing information about the data frame in Python</span></span>
<span id="cb732-2"><a href="df_plt.html#cb732-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions </span></span>
<span id="cb732-3"><a href="df_plt.html#cb732-3" aria-hidden="true" tabindex="-1"></a>milk_df.shape</span></code></pre></div>
<pre><code>## (4, 7)</code></pre>
<div class="sourceCode" id="cb734"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb734-1"><a href="df_plt.html#cb734-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows and columns</span></span>
<span id="cb734-2"><a href="df_plt.html#cb734-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(milk_df)</span></code></pre></div>
<pre><code>## 4</code></pre>
<div class="sourceCode" id="cb736"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb736-1"><a href="df_plt.html#cb736-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(milk_df.columns) <span class="co"># or milk_df.shape[1]</span></span></code></pre></div>
<pre><code>## 7</code></pre>
<div class="sourceCode" id="cb738"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb738-1"><a href="df_plt.html#cb738-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variable names</span></span>
<span id="cb738-2"><a href="df_plt.html#cb738-2" aria-hidden="true" tabindex="-1"></a>milk_df.columns</span></code></pre></div>
<pre><code>## Index([&#39;Milk_Type&#39;, &#39;Calories&#39;, &#39;Protein&#39;, &#39;Fiber&#39;, &#39;Carbohydrates&#39;, &#39;Sugars&#39;,
##        &#39;Fats&#39;],
##       dtype=&#39;object&#39;)</code></pre>
<div class="sourceCode" id="cb740"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb740-1"><a href="df_plt.html#cb740-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variable names and types</span></span>
<span id="cb740-2"><a href="df_plt.html#cb740-2" aria-hidden="true" tabindex="-1"></a>milk_df.info()</span></code></pre></div>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 4 entries, 0 to 3
## Data columns (total 7 columns):
##  #   Column         Non-Null Count  Dtype  
## ---  ------         --------------  -----  
##  0   Milk_Type      4 non-null      object 
##  1   Calories       4 non-null      int64  
##  2   Protein        4 non-null      int64  
##  3   Fiber          4 non-null      float64
##  4   Carbohydrates  4 non-null      int64  
##  5   Sugars         2 non-null      float64
##  6   Fats           4 non-null      float64
## dtypes: float64(3), int64(3), object(1)
## memory usage: 356.0+ bytes</code></pre>
<div class="sourceCode" id="cb742"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb742-1"><a href="df_plt.html#cb742-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb742-2"><a href="df_plt.html#cb742-2" aria-hidden="true" tabindex="-1"></a>milk_df.describe()</span></code></pre></div>
<pre><code>##          Calories   Protein     Fiber  Carbohydrates     Sugars   Fats
## count    4.000000  4.000000  4.000000       4.000000   2.000000  4.000
## mean   102.500000  3.000000  1.225000      15.750000  13.000000  2.875
## std     30.956959  2.828427  0.556028       8.098354   8.485281  0.750
## min     60.000000  1.000000  0.700000       8.000000   7.000000  2.500
## 25%     90.000000  1.000000  0.925000       9.500000  10.000000  2.500
## 50%    110.000000  2.000000  1.100000      15.000000  13.000000  2.500
## 75%    122.500000  4.000000  1.400000      21.250000  16.000000  2.875
## max    130.000000  7.000000  2.000000      25.000000  19.000000  4.000</code></pre>
</div>
</div>
<p>Based on the information above, how would you access the last 2 rows and the last 2 columns of your data frame?</p>
</div>
</div>
<div id="manipulating-data-frames" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Manipulating Data Frames<a href="df_plt.html#manipulating-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with data in R or Python, most of the time we need to perform some data manipulation.
This could involve modifying our data frame, accessing specific parts of it that are of interest, or creating new variables based on existing ones.
Fortunately, both R and Python provide a set of powerful functions for these tasks.</p>
<p>In R, we have <code>bind_rows</code>, <code>filter</code>, <code>arrange</code>, and <code>mutate</code>.
In Python, we have <code>concat</code>, <code>query</code>, <code>sort_values</code>, and <code>assign</code>.
We will now explore each of these functions in detail.</p>
<div id="adding-new-rows" class="section level4 hasAnchor" number="5.1.2.1">
<h4><span class="header-section-number">5.1.2.1</span> Adding New Rows<a href="df_plt.html#adding-new-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To add new rows (or collate two data frames together!) we can use functions <code>bind_rows</code> (in R) and <code>concat</code> (in Python).
This is formally referred to <em>concatenating</em>, which means to create a new data frame by attaching new rows to a data frame from a different one that shares the same columns.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb744"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb744-1"><a href="df_plt.html#cb744-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new data frame in R</span></span>
<span id="cb744-2"><a href="df_plt.html#cb744-2" aria-hidden="true" tabindex="-1"></a>extra_milk_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb744-3"><a href="df_plt.html#cb744-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Milk_Type =</span> <span class="fu">c</span>(<span class="st">&quot;Cashew&quot;</span>, <span class="st">&quot;Hazelnut&quot;</span>),</span>
<span id="cb744-4"><a href="df_plt.html#cb744-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Calories =</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">130</span>),</span>
<span id="cb744-5"><a href="df_plt.html#cb744-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Protein =</span> <span class="fu">c</span>(<span class="fl">0.7</span>, <span class="dv">2</span>),</span>
<span id="cb744-6"><a href="df_plt.html#cb744-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fiber =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>),</span>
<span id="cb744-7"><a href="df_plt.html#cb744-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Carbohydrates =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">8</span>),</span>
<span id="cb744-8"><a href="df_plt.html#cb744-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sugars =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">3</span>),</span>
<span id="cb744-9"><a href="df_plt.html#cb744-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fats =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb744-10"><a href="df_plt.html#cb744-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb744-11"><a href="df_plt.html#cb744-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb744-12"><a href="df_plt.html#cb744-12" aria-hidden="true" tabindex="-1"></a><span class="co"># attaching new rows to our existing data frame</span></span>
<span id="cb744-13"><a href="df_plt.html#cb744-13" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(extra_milk_df)</span>
<span id="cb744-14"><a href="df_plt.html#cb744-14" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60     1     1               8    7  
## 2 Soy            100     7     2              10   NA  
## 3 Oat            120     3     1.2            20   19  
## 4 Rice           130     1     0.7            25   NA  
## 5 Cashew          80     0.7   1               2    0.5
## 6 Hazelnut       130     2     2               8    3  
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb746"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb746-1"><a href="df_plt.html#cb746-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a new data frame in Python</span></span>
<span id="cb746-2"><a href="df_plt.html#cb746-2" aria-hidden="true" tabindex="-1"></a>extra_milk_df <span class="op">=</span> pd.DataFrame({</span>
<span id="cb746-3"><a href="df_plt.html#cb746-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Milk_Type&#39;</span>: [<span class="st">&quot;Cashew&quot;</span>, <span class="st">&quot;Hazelnut&quot;</span>],</span>
<span id="cb746-4"><a href="df_plt.html#cb746-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Calories&#39;</span>: [<span class="dv">80</span>, <span class="dv">130</span>],</span>
<span id="cb746-5"><a href="df_plt.html#cb746-5" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Protein&#39;</span>: [<span class="fl">0.7</span>, <span class="dv">2</span>],</span>
<span id="cb746-6"><a href="df_plt.html#cb746-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Fiber&#39;</span>: [<span class="dv">1</span>, <span class="dv">2</span>],</span>
<span id="cb746-7"><a href="df_plt.html#cb746-7" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Carbohydrates&#39;</span>: [<span class="dv">2</span>, <span class="dv">8</span>],</span>
<span id="cb746-8"><a href="df_plt.html#cb746-8" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Sugars&#39;</span>: [<span class="fl">0.5</span>, <span class="dv">3</span>],</span>
<span id="cb746-9"><a href="df_plt.html#cb746-9" aria-hidden="true" tabindex="-1"></a>  <span class="st">&#39;Fats&#39;</span>: [<span class="dv">3</span>, <span class="dv">9</span>]</span>
<span id="cb746-10"><a href="df_plt.html#cb746-10" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb746-11"><a href="df_plt.html#cb746-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb746-12"><a href="df_plt.html#cb746-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Attaching new rows to our existing data frame</span></span>
<span id="cb746-13"><a href="df_plt.html#cb746-13" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> pd.concat([milk_df, extra_milk_df], ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb746-14"><a href="df_plt.html#cb746-14" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60      1.0    1.0              8     7.0   2.5
## 1       Soy       100      7.0    2.0             10     NaN   4.0
## 2       Oat       120      3.0    1.2             20    19.0   2.5
## 3      Rice       130      1.0    0.7             25     NaN   2.5
## 4    Cashew        80      0.7    1.0              2     0.5   3.0
## 5  Hazelnut       130      2.0    2.0              8     3.0   9.0</code></pre>
</div>
</div>
<p>Note that <strong>in R</strong> you can use also the <code>rbind</code> function that we have seen in the past week.</p>
<p><strong>In Python</strong> you will need to add the <code>ignore_index=True</code> argument, otherwise this will mess up your indexing of the data frame, and could cause unexpected results.</p>
</div>
<div id="adding-new-columns" class="section level4 hasAnchor" number="5.1.2.2">
<h4><span class="header-section-number">5.1.2.2</span> Adding New Columns<a href="df_plt.html#adding-new-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Adding new columns allows us to easily add new columns that are functions of existing ones.
In R, we use <code>mutate()</code>, and in Python, we use <code>assign</code>.</p>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb748"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb748-1"><a href="df_plt.html#cb748-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in R</span></span>
<span id="cb748-2"><a href="df_plt.html#cb748-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components and computing the </span></span>
<span id="cb748-3"><a href="df_plt.html#cb748-3" aria-hidden="true" tabindex="-1"></a><span class="co"># protein content</span></span>
<span id="cb748-4"><a href="df_plt.html#cb748-4" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">sugar_percent =</span> (Sugars <span class="sc">/</span> Carbohydrates) <span class="sc">*</span> <span class="dv">100</span>, </span>
<span id="cb748-5"><a href="df_plt.html#cb748-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tot_wei =</span> Protein <span class="sc">+</span> Fiber <span class="sc">+</span> Carbohydrates <span class="sc">+</span> Fats,</span>
<span id="cb748-6"><a href="df_plt.html#cb748-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">protein_content =</span> Protein <span class="sc">/</span> tot_wei <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb748-7"><a href="df_plt.html#cb748-7" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars  Fats sugar_percent tot_wei protein_content
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;   &lt;dbl&gt;           &lt;dbl&gt;
## 1 Almond          60     1     1               8    7     2.5          87.5    12.5            8   
## 2 Soy            100     7     2              10   NA     4            NA      23             30.4 
## 3 Oat            120     3     1.2            20   19     2.5          95      26.7           11.2 
## 4 Rice           130     1     0.7            25   NA     2.5          NA      29.2            3.42
## 5 Cashew          80     0.7   1               2    0.5   3            25       6.7           10.4 
## 6 Hazelnut       130     2     2               8    3     9            37.5    21              9.52</code></pre>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb750"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb750-1"><a href="df_plt.html#cb750-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in Python</span></span>
<span id="cb750-2"><a href="df_plt.html#cb750-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components and computing the </span></span>
<span id="cb750-3"><a href="df_plt.html#cb750-3" aria-hidden="true" tabindex="-1"></a><span class="co"># protein content</span></span>
<span id="cb750-4"><a href="df_plt.html#cb750-4" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> milk_df.assign(</span>
<span id="cb750-5"><a href="df_plt.html#cb750-5" aria-hidden="true" tabindex="-1"></a>    sugar_percent <span class="op">=</span> <span class="kw">lambda</span> df: (df.Sugars <span class="op">/</span> df.Carbohydrates) <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb750-6"><a href="df_plt.html#cb750-6" aria-hidden="true" tabindex="-1"></a>    tot_wei <span class="op">=</span> <span class="kw">lambda</span> df: df.Protein <span class="op">+</span> df.Fiber <span class="op">+</span> df.Carbohydrates <span class="op">+</span> df.Fats,</span>
<span id="cb750-7"><a href="df_plt.html#cb750-7" aria-hidden="true" tabindex="-1"></a>    protein_content <span class="op">=</span> <span class="kw">lambda</span> df: df.Protein <span class="op">/</span> df.tot_wei <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb750-8"><a href="df_plt.html#cb750-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb750-9"><a href="df_plt.html#cb750-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb750-10"><a href="df_plt.html#cb750-10" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 0    Almond        60      1.0    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 1       Soy       100      7.0    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 2       Oat       120      3.0    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130      1.0    0.7             25     NaN   2.5            NaN     29.2         3.424658
## 4    Cashew        80      0.7    1.0              2     0.5   3.0           25.0      6.7        10.447761
## 5  Hazelnut       130      2.0    2.0              8     3.0   9.0           37.5     21.0         9.523810</code></pre>
<p>The advantage of using <code>mutate</code> and <code>assign</code> over directly overwriting columns is that those function allow you to reference other columns that are being created within the same call.
This makes it possible to create multiple interdependent columns in one go.
In contrast, when overwriting columns directly, you would have to create each new column one at a time, which could be less efficient and harder to read.</p>
<p>If we had to do the same code manually, each one at a time, this would have looked like the following:</p>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb752"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb752-1"><a href="df_plt.html#cb752-1" aria-hidden="true" tabindex="-1"></a><span class="do">### equivalent to above statement</span></span>
<span id="cb752-2"><a href="df_plt.html#cb752-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-3"><a href="df_plt.html#cb752-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in R</span></span>
<span id="cb752-4"><a href="df_plt.html#cb752-4" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>sugar_percent <span class="ot">&lt;-</span> (milk_df<span class="sc">$</span>Sugars <span class="sc">/</span> milk_df<span class="sc">$</span>Carbohydrates) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb752-5"><a href="df_plt.html#cb752-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-6"><a href="df_plt.html#cb752-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components</span></span>
<span id="cb752-7"><a href="df_plt.html#cb752-7" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>tot_wei <span class="ot">&lt;-</span> milk_df<span class="sc">$</span>Protein <span class="sc">+</span> milk_df<span class="sc">$</span>Fiber <span class="sc">+</span> milk_df<span class="sc">$</span>Carbohydrates <span class="sc">+</span> milk_df<span class="sc">$</span>Fats</span>
<span id="cb752-8"><a href="df_plt.html#cb752-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-9"><a href="df_plt.html#cb752-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, computing the protein content</span></span>
<span id="cb752-10"><a href="df_plt.html#cb752-10" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>protein_content <span class="ot">=</span> milk_df<span class="sc">$</span>Protein <span class="sc">/</span> milk_df<span class="sc">$</span>tot_wei <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb752-11"><a href="df_plt.html#cb752-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb752-12"><a href="df_plt.html#cb752-12" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60     1     1               8    7  
## 2 Soy            100     7     2              10   NA  
## 3 Oat            120     3     1.2            20   19  
## 4 Rice           130     1     0.7            25   NA  
## 5 Cashew          80     0.7   1               2    0.5
## 6 Hazelnut       130     2     2               8    3  
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb754"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb754-1"><a href="df_plt.html#cb754-1" aria-hidden="true" tabindex="-1"></a><span class="co">### equivalent to above statement</span></span>
<span id="cb754-2"><a href="df_plt.html#cb754-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb754-3"><a href="df_plt.html#cb754-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in Python</span></span>
<span id="cb754-4"><a href="df_plt.html#cb754-4" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;sugar_percent&#39;</span>] <span class="op">=</span> (milk_df[<span class="st">&#39;Sugars&#39;</span>] <span class="op">/</span> milk_df[<span class="st">&#39;Carbohydrates&#39;</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb754-5"><a href="df_plt.html#cb754-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb754-6"><a href="df_plt.html#cb754-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components</span></span>
<span id="cb754-7"><a href="df_plt.html#cb754-7" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;tot_wei&#39;</span>] <span class="op">=</span> milk_df[<span class="st">&#39;Protein&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Fiber&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Carbohydrates&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Fats&#39;</span>]</span>
<span id="cb754-8"><a href="df_plt.html#cb754-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb754-9"><a href="df_plt.html#cb754-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, computing the protein content</span></span>
<span id="cb754-10"><a href="df_plt.html#cb754-10" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;protein_content&#39;</span>] <span class="op">=</span> milk_df[<span class="st">&#39;Protein&#39;</span>] <span class="op">/</span> milk_df[<span class="st">&#39;tot_wei&#39;</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb754-11"><a href="df_plt.html#cb754-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb754-12"><a href="df_plt.html#cb754-12" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 0    Almond        60      1.0    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 1       Soy       100      7.0    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 2       Oat       120      3.0    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130      1.0    0.7             25     NaN   2.5            NaN     29.2         3.424658
## 4    Cashew        80      0.7    1.0              2     0.5   3.0           25.0      6.7        10.447761
## 5  Hazelnut       130      2.0    2.0              8     3.0   9.0           37.5     21.0         9.523810</code></pre>
<p>You can see how this makes the code longer and potentially harder to read, <strong>particularly in R</strong>.</p>
<p>Note also how, over the rows of soy and rice, the <code>sugar_percent</code> column has missing values, and similarly the <code>protein_content</code> variable has skewed values: this is because the value of the sugar content was missing originally.
Be careful about missing values!</p>
</div>
<div id="filtering-rows" class="section level4 hasAnchor" number="5.1.2.3">
<h4><span class="header-section-number">5.1.2.3</span> Filtering Rows<a href="df_plt.html#filtering-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Filtering allows us to focus on a subset of the rows of a data frame.
This is based on the result of a vectorised logic expression.
In a way, we have already seen this in the past when selecting subsets of vectors!
In R, we use <code>filter()</code>, and in Python, we use <code>query()</code>.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb756-1"><a href="df_plt.html#cb756-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering rows where Calories is greater than 100 in R</span></span>
<span id="cb756-2"><a href="df_plt.html#cb756-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(Calories <span class="sc">&gt;</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Oat            120       3   1.2            20     19
## 2 Rice           130       1   0.7            25     NA
## 3 Hazelnut       130       2   2               8      3
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb758"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb758-1"><a href="df_plt.html#cb758-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering rows where Calories is greater than 100 in Python</span></span>
<span id="cb758-2"><a href="df_plt.html#cb758-2" aria-hidden="true" tabindex="-1"></a>milk_df.query(<span class="st">&#39;Calories &gt; 100&#39;</span>)</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 2       Oat       120      3.0    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130      1.0    0.7             25     NaN   2.5            NaN     29.2         3.424658
## 5  Hazelnut       130      2.0    2.0              8     3.0   9.0           37.5     21.0         9.523810</code></pre>
</div>
</div>
</div>
<div id="reordering-rows" class="section level4 hasAnchor" number="5.1.2.4">
<h4><span class="header-section-number">5.1.2.4</span> Reordering Rows<a href="df_plt.html#reordering-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Reordering allows us to arrange the rows in the data frame in a specific order.
In R, we use <code>arrange()</code>, and in Python, we use <code>sort_values()</code>.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="df_plt.html#cb760-1" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(sugar_percent))</span>
<span id="cb760-2"><a href="df_plt.html#cb760-2" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 6 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Oat            120     3     1.2            20   19  
## 2 Almond          60     1     1               8    7  
## 3 Hazelnut       130     2     2               8    3  
## 4 Cashew          80     0.7   1               2    0.5
## 5 Soy            100     7     2              10   NA  
## 6 Rice           130     1     0.7            25   NA  
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb762"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb762-1"><a href="df_plt.html#cb762-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arranging rows by decreasing sugar_percent in Python</span></span>
<span id="cb762-2"><a href="df_plt.html#cb762-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> milk_df.sort_values(<span class="st">&#39;sugar_percent&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb762-3"><a href="df_plt.html#cb762-3" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 2       Oat       120      3.0    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 0    Almond        60      1.0    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 5  Hazelnut       130      2.0    2.0              8     3.0   9.0           37.5     21.0         9.523810
## 4    Cashew        80      0.7    1.0              2     0.5   3.0           25.0      6.7        10.447761
## 1       Soy       100      7.0    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 3      Rice       130      1.0    0.7             25     NaN   2.5            NaN     29.2         3.424658</code></pre>
</div>
</div>
<p>These examples show the power of modern R and Python for data manipulation!
By these functions we can perform complex data manipulations with just a few lines of code.</p>
<p>Now the coolest thing, is that you can run all the commands above (and more!) in one single statement, through, in R, the power of the pipe (<code>|&gt;</code>), and in Python with Pandas by concatenating methods.
See the two chunks below:</p>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb764"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb764-1"><a href="df_plt.html#cb764-1" aria-hidden="true" tabindex="-1"></a>milk_df <span class="sc">|&gt;</span></span>
<span id="cb764-2"><a href="df_plt.html#cb764-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(Sugars)) <span class="sc">|&gt;</span></span>
<span id="cb764-3"><a href="df_plt.html#cb764-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">sugar_percent =</span> (Sugars <span class="sc">/</span> Carbohydrates) <span class="sc">*</span> <span class="dv">100</span>, </span>
<span id="cb764-4"><a href="df_plt.html#cb764-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">tot_wei =</span> Protein <span class="sc">+</span> Fiber <span class="sc">+</span> Carbohydrates <span class="sc">+</span> Fats,</span>
<span id="cb764-5"><a href="df_plt.html#cb764-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">protein_content =</span> Protein <span class="sc">/</span> tot_wei <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">|&gt;</span></span>
<span id="cb764-6"><a href="df_plt.html#cb764-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(protein_content)) <span class="sc">|&gt;</span></span>
<span id="cb764-7"><a href="df_plt.html#cb764-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Milk_Type, protein_content)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Milk_Type protein_content
##   &lt;chr&gt;               &lt;dbl&gt;
## 1 Oat                 11.2 
## 2 Cashew              10.4 
## 3 Hazelnut             9.52
## 4 Almond               8</code></pre>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb766"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb766-1"><a href="df_plt.html#cb766-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb766-2"><a href="df_plt.html#cb766-2" aria-hidden="true" tabindex="-1"></a>  milk_df</span>
<span id="cb766-3"><a href="df_plt.html#cb766-3" aria-hidden="true" tabindex="-1"></a>    .query(<span class="st">&#39;Sugars == Sugars&#39;</span>)  <span class="co"># Equivalent to !is.na(Sugars) in R</span></span>
<span id="cb766-4"><a href="df_plt.html#cb766-4" aria-hidden="true" tabindex="-1"></a>    .assign(</span>
<span id="cb766-5"><a href="df_plt.html#cb766-5" aria-hidden="true" tabindex="-1"></a>        sugar_percent <span class="op">=</span> <span class="kw">lambda</span> df: (df.Sugars <span class="op">/</span> df.Carbohydrates) <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb766-6"><a href="df_plt.html#cb766-6" aria-hidden="true" tabindex="-1"></a>        tot_wei <span class="op">=</span> <span class="kw">lambda</span> df: df.Protein <span class="op">+</span> df.Fiber <span class="op">+</span> df.Carbohydrates <span class="op">+</span> df.Fats,</span>
<span id="cb766-7"><a href="df_plt.html#cb766-7" aria-hidden="true" tabindex="-1"></a>        protein_content <span class="op">=</span> <span class="kw">lambda</span> df: df.Protein <span class="op">/</span> df.tot_wei <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb766-8"><a href="df_plt.html#cb766-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb766-9"><a href="df_plt.html#cb766-9" aria-hidden="true" tabindex="-1"></a>    .sort_values(<span class="st">&#39;protein_content&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb766-10"><a href="df_plt.html#cb766-10" aria-hidden="true" tabindex="-1"></a>    [[<span class="st">&#39;Milk_Type&#39;</span>, <span class="st">&#39;protein_content&#39;</span>]]</span>
<span id="cb766-11"><a href="df_plt.html#cb766-11" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##   Milk_Type  protein_content
## 2       Oat        11.235955
## 4    Cashew        10.447761
## 5  Hazelnut         9.523810
## 0    Almond         8.000000</code></pre>
<p><strong>NOTE for Python users:</strong> In this Python code, <code>query('Sugars == Sugars')</code> is used to filter out rows where ‘Sugars’ is <code>NaN</code> (since <code>NaN != NaN</code>).
Also, for the statement to evaluate correctly, we need the <code>()</code> brackets around the whole code chunk.
This is because python is reading it as whole line, equivalent to <code>INPUT_DF.QUERY_OUT.ASSIGN_OUT.SORT_OUT[[INDEXING]]</code>.</p>
<p><strong>NOTE for users learning both:</strong> The difference between these two statements is one of the reasons I personally prefer modern R <em>for data manipulation and plotting</em>.
Good news is: you can use Python functions in R in a seamless way.
Whilst this will be beyond the scope of this module, if you are curious on how to do so, you should probably read the <code>reticulate</code> interface guide.
<a href="https://rstudio.github.io/reticulate/">You will find this here</a>.
As a testament, this whole module was made possible via reticulate: these notes were written using R and python simultaneously.
You can see how in the environment corner R Studio is tracking both the python environment and the R environment side to side in a seamless way.</p>
</div>
</div>
<div id="a-real-data-frame" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> A Real Data Frame<a href="df_plt.html#a-real-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have the basis of manipulating data frames, before proceeding to the next steps, let’s work with a real-world data frame: <code>mtcars</code>!
This data frame is available in both R (natively) and Python (in <code>plotnine.data.mtcars</code>) and contains various car attributes.
However, to simulate a real world scenario, we’ll see how to import it from a csv file.</p>
<div id="importing-the-data-frame" class="section level4 hasAnchor" number="5.1.3.1">
<h4><span class="header-section-number">5.1.3.1</span> Importing the Data Frame<a href="df_plt.html#importing-the-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, let’s import the <code>mtcars</code> data frame.
You’ll need to download this from Moodle, and save it under your working directory as “mtcars.csv”.
Remember that we learned how to read from CSV files in week 1!
Well, this is the first time we are doing this in a practical sense.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="df_plt.html#cb768-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing the data frame in R</span></span>
<span id="cb768-2"><a href="df_plt.html#cb768-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;mtcars.csv&quot;</span>)</span></code></pre></div>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb769"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb769-1"><a href="df_plt.html#cb769-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="op">=</span> pd.read_csv(<span class="st">&quot;mtcars.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="understanding-the-data-frames" class="section level4 hasAnchor" number="5.1.3.2">
<h4><span class="header-section-number">5.1.3.2</span> Understanding the Data Frames<a href="df_plt.html#understanding-the-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>mtcars</code> data frame contains the following columns:</p>
<ul>
<li><code>mpg</code>: Miles/(US) gallon</li>
<li><code>cyl</code>: Number of cylinders</li>
<li><code>disp</code>: Displacement (cu.in.)</li>
<li><code>hp</code>: Gross horsepower</li>
<li><code>drat</code>: Rear axle ratio</li>
<li><code>wt</code>: Weight (1000 lbs)</li>
<li><code>qsec</code>: 1/4 mile time</li>
<li><code>vs</code>: Engine (0 = V-shaped, 1 = straight)</li>
<li><code>am</code>: Transmission (0 = automatic, 1 = manual)</li>
<li><code>gear</code>: Number of forward gears</li>
<li><code>carb</code>: Number of carburetors</li>
</ul>
</div>
<div id="exploring-your-data-frame" class="section level4 hasAnchor" number="5.1.3.3">
<h4><span class="header-section-number">5.1.3.3</span> Exploring your data frame<a href="df_plt.html#exploring-your-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can display the first few values of the data frame using the <code>head()</code> function in R and Python.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb770"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb770-1"><a href="df_plt.html#cb770-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the first few values in R</span></span>
<span id="cb770-2"><a href="df_plt.html#cb770-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code></pre></div>
<pre><code>##    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## 1 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## 2 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## 3 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## 4 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## 5 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## 6 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb772"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb772-1"><a href="df_plt.html#cb772-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the first few values in Python</span></span>
<span id="cb772-2"><a href="df_plt.html#cb772-2" aria-hidden="true" tabindex="-1"></a>mtcars.head()</span></code></pre></div>
<pre><code>##     mpg  cyl   disp   hp  drat     wt   qsec  vs  am  gear  carb
## 0  21.0    6  160.0  110  3.90  2.620  16.46   0   1     4     4
## 1  21.0    6  160.0  110  3.90  2.875  17.02   0   1     4     4
## 2  22.8    4  108.0   93  3.85  2.320  18.61   1   1     4     1
## 3  21.4    6  258.0  110  3.08  3.215  19.44   1   0     3     1
## 4  18.7    8  360.0  175  3.15  3.440  17.02   0   0     3     2</code></pre>
</div>
</div>
<p>In RStudio, you can also explore the data frame visually via the <code>View()</code> function.
This opens the data frame in a spreadsheet-like view, which can be very useful for getting a sense of the data.
A shortcut for this is via the “spreadsheet” button on your environment pane, highlighted in yellow in the figure below:<br />
<br />
<img src="images/chapter5/view_button.png" width="468" /></p>
<p>Try to click it!</p>
</div>
<div id="factor-or-categorical-variables" class="section level4 hasAnchor" number="5.1.3.4">
<h4><span class="header-section-number">5.1.3.4</span> Factor (or Categorical) Variables<a href="df_plt.html#factor-or-categorical-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In R, a factor is a variable that can take on a limited number of distinct values, such as ‘yes’ and ‘no’.
It’s used to store categorical data.
In Python, we use the <code>category</code> data type for similar purposes.</p>
<p>In the <code>mtcars</code> data frame, the <code>vs</code> and <code>am</code> columns are currently integers, but they represent categorical data.
In fact, one represent the engine type of the car, and the other the type of transmission.
Therefore, to specifically tell our programming languages this, we should convert them to factors (in R) or categories (in Python).
This will affect many things when dealing with those variables, like producing summaries or displaying those in plots.</p>
<p>Here’s how we can do this:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb774"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb774-1"><a href="df_plt.html#cb774-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting to factors in R</span></span>
<span id="cb774-2"><a href="df_plt.html#cb774-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span> </span>
<span id="cb774-3"><a href="df_plt.html#cb774-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">vs =</span> <span class="fu">factor</span>(vs,</span>
<span id="cb774-4"><a href="df_plt.html#cb774-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;V-shaped&quot;</span>, <span class="st">&quot;straight&quot;</span>)),</span>
<span id="cb774-5"><a href="df_plt.html#cb774-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">am =</span> <span class="fu">factor</span>(am,</span>
<span id="cb774-6"><a href="df_plt.html#cb774-6" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;automatic&quot;</span>, <span class="st">&quot;manual&quot;</span>)))</span>
<span id="cb774-7"><a href="df_plt.html#cb774-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb774-8"><a href="df_plt.html#cb774-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the conversion</span></span>
<span id="cb774-9"><a href="df_plt.html#cb774-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : int  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : int  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : Factor w/ 2 levels &quot;V-shaped&quot;,&quot;straight&quot;: 1 1 2 2 1 2 1 2 2 2 ...
##  $ am  : Factor w/ 2 levels &quot;automatic&quot;,&quot;manual&quot;: 2 2 2 1 1 1 1 1 1 1 ...
##  $ gear: int  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: int  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb776"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb776-1"><a href="df_plt.html#cb776-1" aria-hidden="true" tabindex="-1"></a><span class="co"># assigning labels as strings</span></span>
<span id="cb776-2"><a href="df_plt.html#cb776-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="op">=</span> mtcars.assign(</span>
<span id="cb776-3"><a href="df_plt.html#cb776-3" aria-hidden="true" tabindex="-1"></a>  vs <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x:</span>
<span id="cb776-4"><a href="df_plt.html#cb776-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;V-Shaped&quot;</span> <span class="cf">if</span> x <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">&quot;straight&quot;</span>,  mtcars[<span class="st">&#39;vs&#39;</span>])),</span>
<span id="cb776-5"><a href="df_plt.html#cb776-5" aria-hidden="true" tabindex="-1"></a>  am <span class="op">=</span> <span class="bu">list</span>(<span class="bu">map</span>(<span class="kw">lambda</span> x:</span>
<span id="cb776-6"><a href="df_plt.html#cb776-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;automatic&quot;</span> <span class="cf">if</span> x <span class="op">==</span> <span class="dv">0</span> <span class="cf">else</span> <span class="st">&quot;manual&quot;</span>,  mtcars[<span class="st">&#39;am&#39;</span>]))</span>
<span id="cb776-7"><a href="df_plt.html#cb776-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb776-8"><a href="df_plt.html#cb776-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb776-9"><a href="df_plt.html#cb776-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting to categories in Python</span></span>
<span id="cb776-10"><a href="df_plt.html#cb776-10" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&#39;vs&#39;</span>] <span class="op">=</span> mtcars[<span class="st">&#39;vs&#39;</span>].astype(<span class="st">&#39;category&#39;</span>)</span>
<span id="cb776-11"><a href="df_plt.html#cb776-11" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&#39;am&#39;</span>] <span class="op">=</span> mtcars[<span class="st">&#39;am&#39;</span>].astype(<span class="st">&#39;category&#39;</span>)</span>
<span id="cb776-12"><a href="df_plt.html#cb776-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb776-13"><a href="df_plt.html#cb776-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the conversion</span></span>
<span id="cb776-14"><a href="df_plt.html#cb776-14" aria-hidden="true" tabindex="-1"></a>mtcars.info()</span></code></pre></div>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 32 entries, 0 to 31
## Data columns (total 11 columns):
##  #   Column  Non-Null Count  Dtype   
## ---  ------  --------------  -----   
##  0   mpg     32 non-null     float64 
##  1   cyl     32 non-null     int64   
##  2   disp    32 non-null     float64 
##  3   hp      32 non-null     int64   
##  4   drat    32 non-null     float64 
##  5   wt      32 non-null     float64 
##  6   qsec    32 non-null     float64 
##  7   vs      32 non-null     category
##  8   am      32 non-null     category
##  9   gear    32 non-null     int64   
##  10  carb    32 non-null     int64   
## dtypes: category(2), float64(5), int64(4)
## memory usage: 2.7 KB</code></pre>
<div class="sourceCode" id="cb778"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb778-1"><a href="df_plt.html#cb778-1" aria-hidden="true" tabindex="-1"></a>mtcars.head()</span></code></pre></div>
<pre><code>##     mpg  cyl   disp   hp  drat     wt   qsec        vs         am  gear  carb
## 0  21.0    6  160.0  110  3.90  2.620  16.46  V-Shaped     manual     4     4
## 1  21.0    6  160.0  110  3.90  2.875  17.02  V-Shaped     manual     4     4
## 2  22.8    4  108.0   93  3.85  2.320  18.61  straight     manual     4     1
## 3  21.4    6  258.0  110  3.08  3.215  19.44  straight  automatic     3     1
## 4  18.7    8  360.0  175  3.15  3.440  17.02  V-Shaped  automatic     3     2</code></pre>
</div>
</div>
<p>This code converts the <code>vs</code> and <code>am</code> columns to factors or categories and then checks that the conversion was successful via the <code>str</code> function in R and the <code>info()</code> method in python.
The process in Python is a bit more involved as the <code>astype</code> function does not allow automatic assignment of labels to the categories.</p>
</div>
</div>
<div id="group-by-and-summarise" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Group by and summarise<a href="df_plt.html#group-by-and-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Ok cool, we know how to handle data frames.
Great.
However, this is the time we make something useful of them, no?
Like, for instance, extracting information.
You know, starting to see the patterns, connecting the dots.
All of that crazy stuff that they do in Social Media companies, like learning your family favorite band’s, the type of food they’re eating, or the dance moves they’re doing every morning.
You know, turning things and people into numbers, the favorite statistician’s activity.</p>
<p><a href="distopia"><img src="images/chapter5/distopia.jpeg" width="512" /></a></p>
<p>We’ve learned how to compute summary statistics like mean and max for entire data frames. However, this doesn’t always reveal the full story. Consider now individuals and observations that share common characteristics (such as a person’s city or a car’s engine type). We can group data by these variables, and analyse them separately. When we do so patterns begin to emerge from the numerical chaos.</p>
<p>In this subsection, we will learn how to create groups of observations, and aggregate and summarize information within the groups, allowing us to uncover more meaningful insights.</p>
<p>A <strong>grouped data frame</strong> is a version of the data frame split into groups based on specified conditions.
Each group is a subset of data frame rows that have the same values in specified columns.
Grouping is a powerful concept because it allows you to perform operations on subsets of the data frame.
This is achieved via <code>group_by</code> in R and <code>groupby</code> in Python.</p>
<p>Then, the <code>summarise</code> function (in R), or <code>agg</code> (in Python, for aggregate) applies a transformation to one or more columns within each subgroup of a grouped data frame.
This transformation is typically an aggregation operation that reduces each subgroup to a single row, such as computing the mean, sum, or count.
Graphically:</p>
<p><img src="images/chapter5/groupbysumm.png" width="612" /></p>
<p>Let’s use our <code>mtcars</code> data frame to illustrate these functions work.
First, we’ll compute the average miles per gallon (mpg) and horsepower (hp) across various engine types (vs).
In the <code>mtcars</code> data frame, the <code>vs</code> column represents the engine type: 0 for V-shaped and 1 for straight.
In our graph above one would be the circle, the other the square.<br />
We will group by the <code>vs</code> column, and we will run a summary, the mean, in this case, for the variables <code>mpg</code> and <code>hp</code> .
In our graph <code>mean(mpg)</code> would be <span class="math inline">\(f_1(V1)\)</span>, and <code>mean(hp)</code> would be corresponding to <span class="math inline">\(f_2(V2)\)</span>.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb780"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb780-1"><a href="df_plt.html#cb780-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by &#39;vs&#39; and compute average &#39;mpg&#39; and &#39;hp&#39; in R</span></span>
<span id="cb780-2"><a href="df_plt.html#cb780-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb780-3"><a href="df_plt.html#cb780-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vs) <span class="sc">|&gt;</span></span>
<span id="cb780-4"><a href="df_plt.html#cb780-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg), <span class="at">avg_hp =</span> <span class="fu">mean</span>(hp))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   vs       avg_mpg avg_hp
##   &lt;fct&gt;      &lt;dbl&gt;  &lt;dbl&gt;
## 1 V-shaped    16.6  190. 
## 2 straight    24.6   91.4</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb782"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb782-1"><a href="df_plt.html#cb782-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb782-2"><a href="df_plt.html#cb782-2" aria-hidden="true" tabindex="-1"></a>  mtcars</span>
<span id="cb782-3"><a href="df_plt.html#cb782-3" aria-hidden="true" tabindex="-1"></a>  .groupby(<span class="st">&#39;vs&#39;</span>, observed<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb782-4"><a href="df_plt.html#cb782-4" aria-hidden="true" tabindex="-1"></a>  .agg({<span class="st">&#39;mpg&#39;</span> : <span class="st">&#39;mean&#39;</span>, <span class="st">&#39;hp&#39;</span> : <span class="st">&#39;mean&#39;</span>})</span>
<span id="cb782-5"><a href="df_plt.html#cb782-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##                 mpg          hp
## vs                             
## V-Shaped  16.616667  189.722222
## straight  24.557143   91.357143</code></pre>
</div>
</div>
<p>The results show that the average mpg are higher for straight engines compared to V-shaped engines.
Controversely, on the other hand, the average horse power are lower for straight engines compared to V-shaped engines.
This could be due to the design and efficiency differences between the two engine types: usually straight engines are for regular small cars, whilst V-shaped engines tend to be in sports cars.
The first will be more efficient and be less powerful compared to the second.
See?
We have extracted information!</p>
<p>We can make this example more and more complicated.
Let’s add a second grouping variable: the type of transmission (am).
In the <code>mtcars</code> data frame, the <code>am</code> column represents the transmission type: 0 for automatic and 1 for manual.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb784"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb784-1"><a href="df_plt.html#cb784-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by &#39;vs&#39; and &#39;am&#39;, and compute average &#39;mpg&#39; and &#39;hp&#39; </span></span>
<span id="cb784-2"><a href="df_plt.html#cb784-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and min qsec</span></span>
<span id="cb784-3"><a href="df_plt.html#cb784-3" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">|&gt;</span></span>
<span id="cb784-4"><a href="df_plt.html#cb784-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(vs, am) <span class="sc">|&gt;</span></span>
<span id="cb784-5"><a href="df_plt.html#cb784-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_mpg =</span> <span class="fu">mean</span>(mpg),</span>
<span id="cb784-6"><a href="df_plt.html#cb784-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">avg_hp =</span> <span class="fu">mean</span>(hp),</span>
<span id="cb784-7"><a href="df_plt.html#cb784-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_qsec =</span> <span class="fu">min</span>(qsec))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;vs&#39;. You can override
## using the `.groups` argument.</code></pre>
<pre><code>## # A tibble: 4 × 5
## # Groups:   vs [2]
##   vs       am        avg_mpg avg_hp min_qsec
##   &lt;fct&gt;    &lt;fct&gt;       &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
## 1 V-shaped automatic    15.0  194.      15.4
## 2 V-shaped manual       19.8  181.      14.5
## 3 straight automatic    20.7  102.      18.3
## 4 straight manual       28.4   80.6     16.9</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb787"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb787-1"><a href="df_plt.html#cb787-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Group by &#39;vs&#39; and &#39;am&#39;, and compute average &#39;mpg&#39; and &#39;hp&#39; </span></span>
<span id="cb787-2"><a href="df_plt.html#cb787-2" aria-hidden="true" tabindex="-1"></a><span class="co"># and min qsec</span></span>
<span id="cb787-3"><a href="df_plt.html#cb787-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb787-4"><a href="df_plt.html#cb787-4" aria-hidden="true" tabindex="-1"></a>  mtcars</span>
<span id="cb787-5"><a href="df_plt.html#cb787-5" aria-hidden="true" tabindex="-1"></a>  .groupby([<span class="st">&#39;vs&#39;</span>, <span class="st">&#39;am&#39;</span>])</span>
<span id="cb787-6"><a href="df_plt.html#cb787-6" aria-hidden="true" tabindex="-1"></a>  .agg({<span class="st">&#39;mpg&#39;</span> : <span class="st">&#39;mean&#39;</span>,</span>
<span id="cb787-7"><a href="df_plt.html#cb787-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;hp&#39;</span> : <span class="st">&#39;mean&#39;</span>,</span>
<span id="cb787-8"><a href="df_plt.html#cb787-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;qsec&#39;</span> : <span class="st">&#39;min&#39;</span>})</span>
<span id="cb787-9"><a href="df_plt.html#cb787-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>##                           mpg          hp   qsec
## vs       am                                     
## V-Shaped automatic  15.050000  194.166667  15.41
##          manual     19.750000  180.833333  14.50
## straight automatic  20.742857  102.142857  18.30
##          manual     28.371429   80.571429  16.90
## 
## &lt;string&gt;:5: FutureWarning: The default of observed=False is deprecated and will be changed to True in a future version of pandas. Pass observed=False to retain current behavior or observed=True to adopt the future default and silence this warning.</code></pre>
</div>
</div>
<p>By adding a second grouping variable, we can explore more complex relationships in our data.
Looking at the mtcars analysis, we see that cars with automatic transmissions from the 1973-74 era generally consumed more fuel and took longer to accelerate, regardless of the engine type.
Hold up, isn’t that contrary to what we know about cars today?
Well, remember, this data is from the early 70s when automatic transmissions were mostly hydraulic and not as efficient as they are now.</p>
<p>Fast forward to today, and you’ll find that automatic transmissions can be just as, if not more, fuel-efficient than manual ones.
They can even outpace manual transmissions in terms of acceleration in certain vehicles!</p>
<p>Just think about F1: while it’s true that drivers have control over gear changes, it’s not entirely manual.
They use a semi-automatic transmission system where they initiate gear changes using paddles on the steering wheel, but the actual gear change is performed by an onboard computer.
So, while our analysis holds true for the cars of yesteryears, the automotive world has come a long way since then!</p>
</div>
<div id="exercise-an-mtcars-analysis" class="section level3 hasAnchor" number="5.1.5">
<h3><span class="header-section-number">5.1.5</span> Exercise: an mtcars analysis<a href="df_plt.html#exercise-an-mtcars-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this exercise, we will further explore the <code>mtcars</code> dataset.
The goal is to create a new variable, efficiency, and summarise the data to produce meaningful statistics.
You should:</p>
<ol style="list-style-type: decimal">
<li><p>Create a new column “efficiency” which is the ratio of miles per gallon to horsepower.</p></li>
<li><p>Filter the data to only include cars with the straight engine.</p></li>
<li><p>Arrange these cars in descending order of efficiency and print the head of our d</p></li>
<li><p>Group the original data by type of transmission and number of cylinders.</p></li>
<li><p>Calculate the average efficiency for each group.</p></li>
</ol>
<p>Do our finding reflect what we mentioned above?</p>
</div>
</div>
<div id="plotting-with-ggplot-and-plotnine" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Plotting with ggplot (and plotnine)<a href="df_plt.html#plotting-with-ggplot-and-plotnine" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>When we talk about plotting with ggplot and plotnine, we’re referring to two powerful tools for creating graphics in R and Python, respectively.
These tools are based on a concept known as the Grammar of Graphics.</p>
<p>So, what is the Grammar of Graphics?
Well, just like how grammar rules can help us construct sentences in a language, the Grammar of Graphics provides a structured framework for describing and building graphs.
In other words, it’s like a language for creating graphics, where <strong>we translate data in visual elements</strong>.</p>
<p>This grammar was implemented in R through a package called ggplot2 and in Python through a package called plotnine.
The Grammar of Graphics allows us to create a wide variety of plots by breaking up graphs into semantic components, specifically <strong>scales</strong> and <strong>layers</strong>.</p>
<ul>
<li><p><strong>Scales</strong> refer to the rules for mapping <em>variables</em> from our data to <em>aesthetics</em> (visual elements) like color, size, or position.
These are specified via the <code>aes</code> function.
For example, in a scatter plot of the car horsepower <code>hp</code> against miles per gallon <code>mpg</code> (from our <code>mtcars</code> dataset), the scale determines how the each car horsepower is translated into positions along the x-axis and how miles per gallon are translated into positions along the y-axis.
So to plot the <code>hp</code> against <code>mpg</code>, we will need to write <code>aes(x=hp, y=mpg)</code>.</p></li>
<li><p><strong>Layers</strong> are the actual data elements that we can see in the plot, like points, lines, or bars.
These are specifed in through functions starting with <code>geom_</code>.
In our scatter plot example, each point representing a car is a layer.
Some of the geometries will share the same aesthetics: for example, both the scatter plot and the line plot share the <span class="math inline">\(x\)</span> and the <span class="math inline">\(y\)</span> axis, however one represents data with points, the other with interconnected lines.</p></li>
</ul>
<p><img src="images/chapter5/ggplot.jpg" /></p>
<p>By specifying these components, we can flexibly and systematically create a wide variety of plots.
For instance, we could easily switch from a scatter plot to a line plot, or change the way data values are mapped to colors.
This makes ggplot and plotnine extremely powerful for data visualization.</p>
<p>If this sounds complicated, it’s really not in practice!
<code>ggplot</code> is one of those things that it’s easier done that said.
Let’s start with some basic plots to hopefully clear things a bit!</p>
<div id="basic-plots" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Basic Plots<a href="df_plt.html#basic-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="plotting-the-distribution-of-a-variable" class="section level4 hasAnchor" number="5.2.1.1">
<h4><span class="header-section-number">5.2.1.1</span> Plotting the distribution of a variable<a href="df_plt.html#plotting-the-distribution-of-a-variable" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A histogram is a representation of <em>the distribution</em> of a single variable, hence the <code>aes()</code> will <strong>only have the <code>x</code>.</strong> The histogram layer is translated via the function <code>geom_histogram</code>.
Let’s create a histogram of <code>mpg</code> (miles per gallon).</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb789"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb789-1"><a href="df_plt.html#cb789-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>mpg)) <span class="sc">+</span></span>
<span id="cb789-2"><a href="df_plt.html#cb789-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">5</span>)</span></code></pre></div>
<p><img src="images/unnamed-chunk-248-1.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb790"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb790-1"><a href="df_plt.html#cb790-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb790-2"><a href="df_plt.html#cb790-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;mpg&#39;</span>)) <span class="op">+</span></span>
<span id="cb790-3"><a href="df_plt.html#cb790-3" aria-hidden="true" tabindex="-1"></a>  geom_histogram(binwidth<span class="op">=</span><span class="dv">5</span>)</span>
<span id="cb790-4"><a href="df_plt.html#cb790-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-249-1.png" width="50%" /></p>
</div>
</div>
<p>Let’s break down the syntax: - <code>ggplot(mtcars, aes(x=mpg))</code>.
initializes a ggplot object.
<code>mtcars</code> is the data frame we’re using we wish to get the data from, and aes(x=mpg) sets the aesthetic mappings, which define how variables in the data are mapped to visual properties of the plot.
In this case, we’re mapping the mpg variable to the x-axis.</p>
<ul>
<li><p><code>+</code>.
The plus operator is used to add layers to the plot.
You can add as many layers as you want to a ggplot by chaining them together with <code>+</code>.</p></li>
<li><p><code>geom_histogram(binwidth=5)</code>.
This adds a histogram layer to the plot.
The binwidth argument sets the width of the bins in the histogram.
Geometries can have different options!
Try to change the binwidth and see what happens.</p></li>
</ul>
<p>To solidify the concept of aesthetic mapping, let’s see what happens by swapping the <code>x</code> for a <code>y</code> in our <code>aes</code> function:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="df_plt.html#cb792-1" aria-hidden="true" tabindex="-1"></a><span class="co"># python users looking at this example: this is one particular </span></span>
<span id="cb792-2"><a href="df_plt.html#cb792-2" aria-hidden="true" tabindex="-1"></a><span class="co"># case where ggplot2 in R is better then plotnine in python. The difference</span></span>
<span id="cb792-3"><a href="df_plt.html#cb792-3" aria-hidden="true" tabindex="-1"></a><span class="co"># here is that, in R, boxplot can accept both an x or y aesthetic</span></span>
<span id="cb792-4"><a href="df_plt.html#cb792-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb792-5"><a href="df_plt.html#cb792-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">5</span>)</span></code></pre></div>
<p><img src="images/unnamed-chunk-250-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb793"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb793-1"><a href="df_plt.html#cb793-1" aria-hidden="true" tabindex="-1"></a><span class="co"># this will produce an error in python since</span></span>
<span id="cb793-2"><a href="df_plt.html#cb793-2" aria-hidden="true" tabindex="-1"></a><span class="co"># geom_histogram only works with the x axis in plotnine.</span></span>
<span id="cb793-3"><a href="df_plt.html#cb793-3" aria-hidden="true" tabindex="-1"></a><span class="co"># plotnine has still minor limitations </span></span>
<span id="cb793-4"><a href="df_plt.html#cb793-4" aria-hidden="true" tabindex="-1"></a><span class="co"># compared to ggplot2 in R. Just look at the R output.</span></span>
<span id="cb793-5"><a href="df_plt.html#cb793-5" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb793-6"><a href="df_plt.html#cb793-6" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>)) <span class="op">+</span></span>
<span id="cb793-7"><a href="df_plt.html#cb793-7" aria-hidden="true" tabindex="-1"></a>  geom_histogram()</span>
<span id="cb793-8"><a href="df_plt.html#cb793-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &#39;stat_bin() must not be used with a y aesthetic.&#39;</code></pre>
<div class="sourceCode" id="cb795"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb795-1"><a href="df_plt.html#cb795-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can obtain a similar visualization via coord flip</span></span>
<span id="cb795-2"><a href="df_plt.html#cb795-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb795-3"><a href="df_plt.html#cb795-3" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;mpg&#39;</span>)) <span class="op">+</span></span>
<span id="cb795-4"><a href="df_plt.html#cb795-4" aria-hidden="true" tabindex="-1"></a>  geom_histogram() <span class="op">+</span></span>
<span id="cb795-5"><a href="df_plt.html#cb795-5" aria-hidden="true" tabindex="-1"></a>  coord_flip()</span>
<span id="cb795-6"><a href="df_plt.html#cb795-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;
## 
## /home/romano/Documents/EpiC/.venv/lib/python3.11/site-packages/plotnine/stats/stat_bin.py:109: PlotnineWarning: &#39;stat_bin()&#39; using &#39;bins = 6&#39;. Pick better value with &#39;binwidth&#39;.</code></pre>
<p><img src="images/unnamed-chunk-251-1.png" width="50%" /></p>
</div>
</div>
<p>You can see by how changing the axis aesthetic, the histogram was mirrored over the axis.
Let’s see what happens now, if we swap the <code>geom_histogram</code> layer for a <code>geom_boxplot</code>:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb797-1"><a href="df_plt.html#cb797-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb797-2"><a href="df_plt.html#cb797-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-252-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb798"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb798-1"><a href="df_plt.html#cb798-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb798-2"><a href="df_plt.html#cb798-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>)) <span class="op">+</span></span>
<span id="cb798-3"><a href="df_plt.html#cb798-3" aria-hidden="true" tabindex="-1"></a>  geom_boxplot()</span>
<span id="cb798-4"><a href="df_plt.html#cb798-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-253-1.png" width="50%" /></p>
</div>
</div>
<p>This will give us a complete different type of distribution plot, <em>the boxplot</em>!
A boxplot is a very useful graphical representation of a variable’s distribution based on a five-number summary: the minimum, first quartile (Q1), median, third quartile (Q3), and maximum.
The box represents the interquartile range (IQR), containing the middle 50% of the data, with a line indicating the median.
The whiskers extend from the box to the minimum and maximum values, excluding outliers, which are represented as individual points.
Boxplots are useful for understanding data distribution, detecting outliers, and comparing data sets.
The boxplot has a common aesthetic with the histogram: in fact, it’s just a different way to represent a distribution!
All we had to do was change the layer.</p>
<p>Funny enough, in ggplot, if we want, and they share aeshtetics, we can stack layers on top of each other just by adding more.
For instance:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="df_plt.html#cb800-1" aria-hidden="true" tabindex="-1"></a><span class="co"># R users, look at the output of python plot.</span></span>
<span id="cb800-2"><a href="df_plt.html#cb800-2" aria-hidden="true" tabindex="-1"></a><span class="co"># We can make the same plot in R!</span></span>
<span id="cb800-3"><a href="df_plt.html#cb800-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Can you translate the python code to ggplot2?</span></span>
<span id="cb800-4"><a href="df_plt.html#cb800-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb800-5"><a href="df_plt.html#cb800-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb800-6"><a href="df_plt.html#cb800-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-254-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb801"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb801-1"><a href="df_plt.html#cb801-1" aria-hidden="true" tabindex="-1"></a><span class="co"># the same plot in plotnine is not possible as </span></span>
<span id="cb801-2"><a href="df_plt.html#cb801-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the boxplot and the density plot have different aestethics. </span></span>
<span id="cb801-3"><a href="df_plt.html#cb801-3" aria-hidden="true" tabindex="-1"></a><span class="co"># however, we can plot (this should work in R too): </span></span>
<span id="cb801-4"><a href="df_plt.html#cb801-4" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb801-5"><a href="df_plt.html#cb801-5" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&quot;mpg&quot;</span>)) <span class="op">+</span></span>
<span id="cb801-6"><a href="df_plt.html#cb801-6" aria-hidden="true" tabindex="-1"></a>    geom_histogram(aes(y <span class="op">=</span> <span class="st">&quot;..density..&quot;</span>), binwidth<span class="op">=</span><span class="dv">3</span>) <span class="op">+</span></span>
<span id="cb801-7"><a href="df_plt.html#cb801-7" aria-hidden="true" tabindex="-1"></a>    geom_density()</span>
<span id="cb801-8"><a href="df_plt.html#cb801-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-255-1.png" width="50%" /></p>
</div>
</div>
<p>We have just added an estimate of our density to our boxplot/histogram!</p>
</div>
<div id="plotting-multiple-dimensions" class="section level4 hasAnchor" number="5.2.1.2">
<h4><span class="header-section-number">5.2.1.2</span> Plotting multiple dimensions<a href="df_plt.html#plotting-multiple-dimensions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>A scatterplot uses two dimensions, allowing us to visualize the relationship between two variables.
So, our aestetic, now gets another argument: we have now both the <code>x</code> and the <code>y</code>!
Let’s create a scatterplot of <code>mpg</code> against <code>hp</code> (horsepower), to replicate our initial example.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb803"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb803-1"><a href="df_plt.html#cb803-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>mpg)) <span class="sc">+</span></span>
<span id="cb803-2"><a href="df_plt.html#cb803-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="co"># + theme_minimal()</span></span></code></pre></div>
<p><img src="images/unnamed-chunk-256-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb804"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb804-1"><a href="df_plt.html#cb804-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb804-2"><a href="df_plt.html#cb804-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>)) <span class="op">+</span></span>
<span id="cb804-3"><a href="df_plt.html#cb804-3" aria-hidden="true" tabindex="-1"></a>  geom_point() <span class="co"># + theme_minimal()</span></span>
<span id="cb804-4"><a href="df_plt.html#cb804-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-257-1.png" width="50%" /></p>
</div>
</div>
<p>Uncomment the <code>theme_minimal</code> to add an additional theme to our plot, and you will have recreated the plot at the beginning of the section.</p>
<p><strong>Representing higher dimentions</strong>.
Now, the cool stuff is that we can introduce higher dimensions by mapping additional variables to other aesthetics like color (or the point shape).
Let’s color the points in our scatterplot based on the type of transmission (<code>am</code>).</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb806"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb806-1"><a href="df_plt.html#cb806-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>mpg, <span class="at">color=</span>am)) <span class="sc">+</span></span>
<span id="cb806-2"><a href="df_plt.html#cb806-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-258-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb807"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb807-1"><a href="df_plt.html#cb807-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb807-2"><a href="df_plt.html#cb807-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb807-3"><a href="df_plt.html#cb807-3" aria-hidden="true" tabindex="-1"></a>  geom_point()</span>
<span id="cb807-4"><a href="df_plt.html#cb807-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-259-1.png" width="50%" /></p>
</div>
</div>
<p>We can see graphically now why the mean consumption in the automatic transmission was higher in the example before!
You can see that it’s separate.</p>
<p>Note that we can add as many dimensions as our layer allows it.
For instance, to throw the engine type into the mix, I can change the shape of my points:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb809"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb809-1"><a href="df_plt.html#cb809-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>mpg, <span class="at">color=</span>am, <span class="at">shape=</span> vs)) <span class="sc">+</span></span>
<span id="cb809-2"><a href="df_plt.html#cb809-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-260-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb810"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb810-1"><a href="df_plt.html#cb810-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb810-2"><a href="df_plt.html#cb810-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>, shape<span class="op">=</span><span class="st">&#39;vs&#39;</span>)) <span class="op">+</span></span>
<span id="cb810-3"><a href="df_plt.html#cb810-3" aria-hidden="true" tabindex="-1"></a>  geom_point()</span>
<span id="cb810-4"><a href="df_plt.html#cb810-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-261-1.png" width="50%" /></p>
</div>
</div>
<p>Or again, maybe we want a different visualization completely!
As I can change the shape of my points, I can change the linetype of my boxplots:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb812"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb812-1"><a href="df_plt.html#cb812-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">y=</span>mpg, <span class="at">color=</span>am, <span class="at">linetype =</span> vs)) <span class="sc">+</span></span>
<span id="cb812-2"><a href="df_plt.html#cb812-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-262-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb813"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb813-1"><a href="df_plt.html#cb813-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb813-2"><a href="df_plt.html#cb813-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>, linetype<span class="op">=</span><span class="st">&#39;vs&#39;</span>)) <span class="op">+</span></span>
<span id="cb813-3"><a href="df_plt.html#cb813-3" aria-hidden="true" tabindex="-1"></a>  geom_boxplot()</span>
<span id="cb813-4"><a href="df_plt.html#cb813-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-263-1.png" width="50%" /></p>
</div>
</div>
</div>
</div>
<div id="advanced-plots" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Advanced plots<a href="df_plt.html#advanced-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><strong>This section will not be evaluated on the quizzes, however if you are feeling confident you should read it anyway as it shows how powerful ggplot can get. If you’re overwelmed, feel free to skip at the exercise, and complete up to the medium level.</strong></p>
<p>In ggplot you can change a bunch of graphical characteristics very easily by just adding things.
This is a very functional way of thinking of a plot, where we can <em>concatenate</em> (again, function compositions!) multiple graphical elements!
Few things you can easily change include:</p>
<ol style="list-style-type: decimal">
<li><p><strong>Themes</strong>: By adding themes you can use different themes to change the overall appearance of your plot.
For example, <code>theme_minimal()</code> gives a minimal theme with no background grid.
Try <code>theme_bw()</code> for a different one.</p></li>
<li><p><strong>Title</strong>: You can add or change the title of your plot by adding <code>ggtitle("Your Title")</code>.</p></li>
<li><p><strong>Labels</strong>: You can change the axis labels by adding <code>labs(x = "X Label Name", y = "Y Label Name")</code>.</p></li>
<li><p><strong>Limits</strong>: You can set the limits of your axes by adding <code>xlim(lower, upper)</code> and <code>ylim(lower, upper)</code>.</p></li>
</ol>
<p>Remember, you can concatenate all these things together one after the other in one single ggplot call:</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb815"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb815-1"><a href="df_plt.html#cb815-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>mpg, <span class="at">color=</span>am)) <span class="sc">+</span></span>
<span id="cb815-2"><a href="df_plt.html#cb815-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb815-3"><a href="df_plt.html#cb815-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Power Against Consumption&quot;</span>) <span class="sc">+</span></span>
<span id="cb815-4"><a href="df_plt.html#cb815-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">&quot;Horse Power&quot;</span>, <span class="at">y=</span><span class="st">&quot;Consumption (mpg)&quot;</span>) <span class="sc">+</span></span>
<span id="cb815-5"><a href="df_plt.html#cb815-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">250</span>) <span class="sc">+</span></span>
<span id="cb815-6"><a href="df_plt.html#cb815-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<pre><code>## Warning: Removed 2 rows containing missing values
## (`geom_point()`).</code></pre>
<p><img src="images/unnamed-chunk-264-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb817"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb817-1"><a href="df_plt.html#cb817-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb817-2"><a href="df_plt.html#cb817-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb817-3"><a href="df_plt.html#cb817-3" aria-hidden="true" tabindex="-1"></a>  geom_point() <span class="op">+</span></span>
<span id="cb817-4"><a href="df_plt.html#cb817-4" aria-hidden="true" tabindex="-1"></a>  ggtitle(<span class="st">&quot;Power Against Consumption&quot;</span>) <span class="op">+</span></span>
<span id="cb817-5"><a href="df_plt.html#cb817-5" aria-hidden="true" tabindex="-1"></a>  labs(x<span class="op">=</span><span class="st">&quot;Horse Power&quot;</span>, y<span class="op">=</span><span class="st">&quot;Consumption (mpg)&quot;</span>) <span class="op">+</span></span>
<span id="cb817-6"><a href="df_plt.html#cb817-6" aria-hidden="true" tabindex="-1"></a>  xlim(<span class="dv">0</span>, <span class="dv">250</span>) <span class="op">+</span></span>
<span id="cb817-7"><a href="df_plt.html#cb817-7" aria-hidden="true" tabindex="-1"></a>  theme_bw()</span>
<span id="cb817-8"><a href="df_plt.html#cb817-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;
## 
## /home/romano/Documents/EpiC/.venv/lib/python3.11/site-packages/plotnine/layer.py:364: PlotnineWarning: geom_point : Removed 2 rows containing missing values.</code></pre>
<p><img src="images/unnamed-chunk-265-1.png" width="50%" /></p>
</div>
</div>
<div id="multiple-plots-with-facets" class="section level4 hasAnchor" number="5.2.2.1">
<h4><span class="header-section-number">5.2.2.1</span> Multiple Plots with Facets<a href="df_plt.html#multiple-plots-with-facets" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Faceting is a way to create multiple subplots at once based on an extra factor variable.
This is a very clean way of representing several variables, as the subplots will share the relevant axes.
For instance, let’s show the relationship between miles per gallon (<code>mpg</code>) and horsepower (<code>hp</code>), transmission type (<code>am</code>) but separated by the highest gear (<code>gear</code>):</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb819"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb819-1"><a href="df_plt.html#cb819-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>mpg, <span class="at">color=</span>am)) <span class="sc">+</span></span>
<span id="cb819-2"><a href="df_plt.html#cb819-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb819-3"><a href="df_plt.html#cb819-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>gear)</span></code></pre></div>
<p><img src="images/unnamed-chunk-266-3.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb820"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb820-1"><a href="df_plt.html#cb820-1" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb820-2"><a href="df_plt.html#cb820-2" aria-hidden="true" tabindex="-1"></a>ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb820-3"><a href="df_plt.html#cb820-3" aria-hidden="true" tabindex="-1"></a>  geom_point() <span class="op">+</span> </span>
<span id="cb820-4"><a href="df_plt.html#cb820-4" aria-hidden="true" tabindex="-1"></a>  facet_wrap(<span class="st">&#39;~gear&#39;</span>)</span>
<span id="cb820-5"><a href="df_plt.html#cb820-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-267-1.png" width="50%" /></p>
</div>
</div>
<p>On your own, try what happens by adding the argument <code>nrow=3</code> to the <code>facet_wrap</code>, e.g. <code>facet_wrap(~gear, nrow=3)</code>.</p>
</div>
<div id="few-extra-layers" class="section level4 hasAnchor" number="5.2.2.2">
<h4><span class="header-section-number">5.2.2.2</span> Few extra layers<a href="df_plt.html#few-extra-layers" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>For completion, let’s see and explore some extra layers we can have.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb822"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb822-1"><a href="df_plt.html#cb822-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linegraph</span></span>
<span id="cb822-2"><a href="df_plt.html#cb822-2" aria-hidden="true" tabindex="-1"></a><span class="co"># great for continuous time variables</span></span>
<span id="cb822-3"><a href="df_plt.html#cb822-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>disp, <span class="at">color=</span>am)) <span class="sc">+</span></span>
<span id="cb822-4"><a href="df_plt.html#cb822-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-268-3.png" width="50%" /></p>
<div class="sourceCode" id="cb823"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb823-1"><a href="df_plt.html#cb823-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recall we can always filter based on any type of </span></span>
<span id="cb823-2"><a href="df_plt.html#cb823-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variable, what we learned over the first half translates equally</span></span>
<span id="cb823-3"><a href="df_plt.html#cb823-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to the second! And the plot adapts magically.</span></span>
<span id="cb823-4"><a href="df_plt.html#cb823-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars <span class="sc">|&gt;</span> <span class="fu">filter</span>(am <span class="sc">==</span> <span class="st">&quot;manual&quot;</span>),</span>
<span id="cb823-5"><a href="df_plt.html#cb823-5" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x=</span>hp, <span class="at">y=</span>disp)) <span class="sc">+</span></span>
<span id="cb823-6"><a href="df_plt.html#cb823-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-268-4.png" width="50%" /></p>
<div class="sourceCode" id="cb824"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb824-1"><a href="df_plt.html#cb824-1" aria-hidden="true" tabindex="-1"></a><span class="co"># barcharts</span></span>
<span id="cb824-2"><a href="df_plt.html#cb824-2" aria-hidden="true" tabindex="-1"></a><span class="co"># great for categorical variables</span></span>
<span id="cb824-3"><a href="df_plt.html#cb824-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>cyl, <span class="at">fill=</span>am)) <span class="sc">+</span></span>
<span id="cb824-4"><a href="df_plt.html#cb824-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span></code></pre></div>
<p><img src="images/unnamed-chunk-268-5.png" width="50%" /></p>
<div class="sourceCode" id="cb825"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb825-1"><a href="df_plt.html#cb825-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can store the plot in a variable and add more layers if </span></span>
<span id="cb825-2"><a href="df_plt.html#cb825-2" aria-hidden="true" tabindex="-1"></a><span class="co"># needed </span></span>
<span id="cb825-3"><a href="df_plt.html#cb825-3" aria-hidden="true" tabindex="-1"></a>pt <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>cyl, <span class="at">fill=</span>am)) <span class="sc">+</span></span>
<span id="cb825-4"><a href="df_plt.html#cb825-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()</span>
<span id="cb825-5"><a href="df_plt.html#cb825-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb825-6"><a href="df_plt.html#cb825-6" aria-hidden="true" tabindex="-1"></a>pt <span class="sc">+</span> <span class="fu">facet_wrap</span>(<span class="sc">~</span>vs)</span></code></pre></div>
<p><img src="images/unnamed-chunk-268-6.png" width="50%" /></p>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb826"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb826-1"><a href="df_plt.html#cb826-1" aria-hidden="true" tabindex="-1"></a><span class="co"># linegraph</span></span>
<span id="cb826-2"><a href="df_plt.html#cb826-2" aria-hidden="true" tabindex="-1"></a><span class="co"># great for continuous time variables</span></span>
<span id="cb826-3"><a href="df_plt.html#cb826-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb826-4"><a href="df_plt.html#cb826-4" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;disp&#39;</span>, color<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb826-5"><a href="df_plt.html#cb826-5" aria-hidden="true" tabindex="-1"></a>  geom_line()</span>
<span id="cb826-6"><a href="df_plt.html#cb826-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-269-1.png" width="50%" /></p>
<div class="sourceCode" id="cb828"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb828-1"><a href="df_plt.html#cb828-1" aria-hidden="true" tabindex="-1"></a><span class="co"># recall we can always filter based on any type of </span></span>
<span id="cb828-2"><a href="df_plt.html#cb828-2" aria-hidden="true" tabindex="-1"></a><span class="co"># variable, what we learned over the first half translates equally</span></span>
<span id="cb828-3"><a href="df_plt.html#cb828-3" aria-hidden="true" tabindex="-1"></a><span class="co"># to the second! And the plot adapts magically.</span></span>
<span id="cb828-4"><a href="df_plt.html#cb828-4" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb828-5"><a href="df_plt.html#cb828-5" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars.query(<span class="st">&quot;am == &#39;manual&#39;&quot;</span>),</span>
<span id="cb828-6"><a href="df_plt.html#cb828-6" aria-hidden="true" tabindex="-1"></a>  aes(x<span class="op">=</span><span class="st">&#39;hp&#39;</span>, y<span class="op">=</span><span class="st">&#39;disp&#39;</span>)) <span class="op">+</span></span>
<span id="cb828-7"><a href="df_plt.html#cb828-7" aria-hidden="true" tabindex="-1"></a>  geom_line()</span>
<span id="cb828-8"><a href="df_plt.html#cb828-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-269-2.png" width="50%" /></p>
<div class="sourceCode" id="cb830"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb830-1"><a href="df_plt.html#cb830-1" aria-hidden="true" tabindex="-1"></a><span class="co"># barcharts</span></span>
<span id="cb830-2"><a href="df_plt.html#cb830-2" aria-hidden="true" tabindex="-1"></a><span class="co"># great for categorical variables</span></span>
<span id="cb830-3"><a href="df_plt.html#cb830-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb830-4"><a href="df_plt.html#cb830-4" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;cyl&#39;</span>, fill<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb830-5"><a href="df_plt.html#cb830-5" aria-hidden="true" tabindex="-1"></a>  geom_bar()</span>
<span id="cb830-6"><a href="df_plt.html#cb830-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-269-3.png" width="50%" /></p>
<div class="sourceCode" id="cb832"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb832-1"><a href="df_plt.html#cb832-1" aria-hidden="true" tabindex="-1"></a><span class="co"># we can store the plot in a variable and add more layers if </span></span>
<span id="cb832-2"><a href="df_plt.html#cb832-2" aria-hidden="true" tabindex="-1"></a><span class="co"># needed </span></span>
<span id="cb832-3"><a href="df_plt.html#cb832-3" aria-hidden="true" tabindex="-1"></a>pt <span class="op">=</span> (ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;cyl&#39;</span>, fill<span class="op">=</span><span class="st">&#39;am&#39;</span>)) <span class="op">+</span></span>
<span id="cb832-4"><a href="df_plt.html#cb832-4" aria-hidden="true" tabindex="-1"></a>  geom_bar())</span>
<span id="cb832-5"><a href="df_plt.html#cb832-5" aria-hidden="true" tabindex="-1"></a>pt <span class="op">+</span> facet_wrap(<span class="st">&#39;~vs&#39;</span>)</span></code></pre></div>
<pre><code>## &lt;Figure Size: (640 x 480)&gt;</code></pre>
<p><img src="images/unnamed-chunk-269-4.png" width="50%" /></p>
</div>
</div>
</div>
<div id="saving-and-exporting-plots" class="section level4 hasAnchor" number="5.2.2.3">
<h4><span class="header-section-number">5.2.2.3</span> Saving and Exporting Plots<a href="df_plt.html#saving-and-exporting-plots" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>You can save your plots to a file in both R and Python.
To do so, you will first need to assign the plot to a variable.</p>
<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb834"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb834-1"><a href="df_plt.html#cb834-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mtcars, <span class="fu">aes</span>(<span class="at">x=</span>mpg, <span class="at">y=</span>hp)) <span class="sc">+</span></span>
<span id="cb834-2"><a href="df_plt.html#cb834-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb834-3"><a href="df_plt.html#cb834-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb834-4"><a href="df_plt.html#cb834-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb834-5"><a href="df_plt.html#cb834-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">&quot;my_plot.png&quot;</span>, g, <span class="at">width=</span><span class="dv">6</span>, <span class="at">height=</span><span class="dv">4</span>)</span></code></pre></div>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb835"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb835-1"><a href="df_plt.html#cb835-1" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> (</span>
<span id="cb835-2"><a href="df_plt.html#cb835-2" aria-hidden="true" tabindex="-1"></a>  ggplot(mtcars, aes(x<span class="op">=</span><span class="st">&#39;mpg&#39;</span>, y<span class="op">=</span><span class="st">&#39;hp&#39;</span>)) <span class="op">+</span></span>
<span id="cb835-3"><a href="df_plt.html#cb835-3" aria-hidden="true" tabindex="-1"></a>  geom_point() <span class="op">+</span></span>
<span id="cb835-4"><a href="df_plt.html#cb835-4" aria-hidden="true" tabindex="-1"></a>  theme_minimal()</span>
<span id="cb835-5"><a href="df_plt.html#cb835-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb835-6"><a href="df_plt.html#cb835-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb835-7"><a href="df_plt.html#cb835-7" aria-hidden="true" tabindex="-1"></a>g.save(<span class="st">&quot;my_plot.png&quot;</span>, width<span class="op">=</span><span class="dv">6</span>, height<span class="op">=</span><span class="dv">4</span>)</span></code></pre></div>
<pre><code>## /home/romano/Documents/EpiC/.venv/lib/python3.11/site-packages/plotnine/ggplot.py:587: PlotnineWarning: Saving 6 x 4 in image.
## /home/romano/Documents/EpiC/.venv/lib/python3.11/site-packages/plotnine/ggplot.py:588: PlotnineWarning: Filename: my_plot.png</code></pre>
</div>
</div>
<p>This will save the scatter plot as a PNG file named “plot.png”.
You can change the filename to save it as a different type (like .jpg or .pdf) or to a different location as usual!.</p>
</div>
</div>
<div id="exercise-ggplots-of-periodic-functions" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Exercise: ggplots of periodic functions<a href="df_plt.html#exercise-ggplots-of-periodic-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this exercises we will be plotting few sine and cosine waves.
This should combine both knowledge of creating a data frame, and ggplot.
The exercise has various levels of completition, from a basic level where we will be plotting a sine function from 1 to 10, to an advance level where we will be displaying multiple periodic functions.</p>
<p><strong>Basic.</strong> Via ggplot, plot a sinusoidal function, <span class="math inline">\(y = \sin(x)\)</span>, from 0 to 10:</p>
<ol style="list-style-type: decimal">
<li><p>You want to create a sequence of numbers, <code>x</code>, of at least 100 values ranging from 0 to 10.</p></li>
<li><p>You then want to run the sine function on this sequence to get the <code>y</code></p></li>
<li><p>Store the results of this operation in a data frame</p></li>
<li><p>Plot a line using ggplot’s <code>geom_line()</code>.</p></li>
</ol>
<p><strong>Medium.</strong> Modify the code above to add the additional function <span class="math inline">\(y=\cos(x)\)</span>.
You should get something like:</p>
<p><img src="images/unnamed-chunk-272-1.png" width="50%" /></p>
<ul>
<li><p>The x-axis should range from 0 to 10, with a step size of 0.01.</p></li>
<li><p>Use different colours for each curve (sine or cosine)</p></li>
<li><p>How many columns should have your dataframe?</p></li>
</ul>
<p><strong>Advanced.</strong> Using <code>ggplot</code>, write a program that generates the plot below:</p>
<p><img src="images/unnamed-chunk-273-1.png" width="50%" /></p>
<p>Each subplot should be comparing sines and cosines with different frequencies.
The plot should show 6 sinusoidal functions:<span class="math display">\[\sin\left(\frac{x}{2}\right), \sin(x), \sin(2x), \cos\left(\frac{x}{2}\right), \cos(x), \cos(2x)\]</span></p>
<ul>
<li><p>The plot should have three subplots, one for each frequency (<span class="math inline">\(\frac{1}{2}\)</span>, 1, and 2).
Each subplot should contain both the sine and cosine functions, as above</p></li>
<li><p>Avoid <em>computing everything by hand</em> (e.g. copy pasting the dataframe code 6 times) or <code>for</code> loop.
TIP: Use <code>map</code> to generate your dataframes and <code>reduce</code> to combine them.
Use lambda functions where necessary.</p></li>
</ul>
<style type="text/css">
.book .book-body .page-wrapper .page-inner {
  max-width: 1200px !important;
}
</style>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="maps_alg.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="challenge.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
