<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics</title>
  <meta name="description" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Data Frames and Plotting | Lancaster University MATH245 Computational Mathematics" />
  
  
  

<meta name="author" content="Lecturers: Dr Eduard Campillo-Funollet and Dr Gaetano Romano" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="maps_alg.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro_prog.html"><a href="intro_prog.html"><i class="fa fa-check"></i><b>1</b> Introduction to Computational Mathematics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro_prog.html"><a href="intro_prog.html#what-is-a-computer"><i class="fa fa-check"></i><b>1.1</b> What is a Computer?</a></li>
<li class="chapter" data-level="1.2" data-path="intro_prog.html"><a href="intro_prog.html#computing-accessing-memory-and-storing"><i class="fa fa-check"></i><b>1.2</b> Computing, Accessing Memory and Storing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="log_vec.html"><a href="log_vec.html"><i class="fa fa-check"></i><b>2</b> Logic and Vectors</a>
<ul>
<li class="chapter" data-level="2.1" data-path="log_vec.html"><a href="log_vec.html#comparisons"><i class="fa fa-check"></i><b>2.1</b> Comparisons</a></li>
<li class="chapter" data-level="2.2" data-path="log_vec.html"><a href="log_vec.html#logical-arithmetic"><i class="fa fa-check"></i><b>2.2</b> Logical Arithmetic</a></li>
<li class="chapter" data-level="2.3" data-path="log_vec.html"><a href="log_vec.html#flow"><i class="fa fa-check"></i><b>2.3</b> Flow</a></li>
<li class="chapter" data-level="2.4" data-path="log_vec.html"><a href="log_vec.html#vectors"><i class="fa fa-check"></i><b>2.4</b> Vectors</a></li>
<li class="chapter" data-level="2.5" data-path="log_vec.html"><a href="log_vec.html#accessing-vectors"><i class="fa fa-check"></i><b>2.5</b> Accessing vectors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="func_loop.html"><a href="func_loop.html"><i class="fa fa-check"></i><b>3</b> Functions and Loops</a>
<ul>
<li class="chapter" data-level="3.1" data-path="func_loop.html"><a href="func_loop.html#functions"><i class="fa fa-check"></i><b>3.1</b> Functions</a></li>
<li class="chapter" data-level="3.2" data-path="func_loop.html"><a href="func_loop.html#looping"><i class="fa fa-check"></i><b>3.2</b> State and For Loop</a></li>
<li class="chapter" data-level="3.3" data-path="func_loop.html"><a href="func_loop.html#more-about-looping"><i class="fa fa-check"></i><b>3.3</b> More about looping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="maps_alg.html"><a href="maps_alg.html"><i class="fa fa-check"></i><b>4</b> Functional Programming and Linear Algebra</a>
<ul>
<li class="chapter" data-level="4.1" data-path="maps_alg.html"><a href="maps_alg.html#Maps"><i class="fa fa-check"></i><b>4.1</b> An intro to Functional Programming</a></li>
<li class="chapter" data-level="4.2" data-path="maps_alg.html"><a href="maps_alg.html#doing-linear-algebra"><i class="fa fa-check"></i><b>4.2</b> Doing Linear Algebra</a></li>
<li class="chapter" data-level="4.3" data-path="maps_alg.html"><a href="maps_alg.html#an-end-note-to-this-chapter"><i class="fa fa-check"></i><b>4.3</b> An end note to this chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="df_plt.html"><a href="df_plt.html"><i class="fa fa-check"></i><b>5</b> Data Frames and Plotting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="df_plt.html"><a href="df_plt.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data Frames</a></li>
<li class="chapter" data-level="5.2" data-path="df_plt.html"><a href="df_plt.html#plotting-with-ggplot"><i class="fa fa-check"></i><b>5.2</b> Plotting with ggplot</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lancaster University MATH245 Computational Mathematics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="df_plt" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Data Frames and Plotting<a href="df_plt.html#df_plt" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this chapter, we will delve into the world of Data Frames and Plotting.
These are crucial concepts in Computational Mathematics that will enable us to handle and visualize data effectively.</p>
<div id="a-note-for-r-users." class="section level4 hasAnchor" number="5.0.0.1">
<h4><span class="header-section-number">5.0.0.1</span> A note for R users.<a href="df_plt.html#a-note-for-r-users." class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Before we start, we will need to import a very important library for writing modern R code.</p>
<p>This is the tidyverse…</p>
<div class="sourceCode" id="cb611"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb611-1"><a href="df_plt.html#cb611-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p>We should also discuss about a very important operator, the <strong>pipe</strong> operator, that, as you will see, it will enable us to concatenate functions on data frames and mutate and access their variables or rows with extreme ease compared to traditional R code.</p>
<div id="the-pipe-operator" class="section level5 hasAnchor" number="5.0.0.1.1">
<h5><span class="header-section-number">5.0.0.1.1</span> The pipe operator<a href="df_plt.html#the-pipe-operator" class="anchor-section" aria-label="Anchor link to header"></a></h5>
</div>
</div>
<div id="a-note-for-python-users" class="section level4 hasAnchor" number="5.0.0.2">
<h4><span class="header-section-number">5.0.0.2</span> A note for python users<a href="df_plt.html#a-note-for-python-users" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb612"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb612-1"><a href="df_plt.html#cb612-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb612-2"><a href="df_plt.html#cb612-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotnine <span class="im">as</span> plt</span>
<span id="cb612-3"><a href="df_plt.html#cb612-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code></pre></div>
</div>
<div id="data-frames" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Data Frames<a href="df_plt.html#data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A <strong>data frame</strong> is a table-like data structure available in languages like R and Python.
It is similar to a spreadsheet or SQL table, or a dictionary of Series objects in Python.
Data frames are generally used for statistical analysis in R and Python programming.</p>
<p>In a data frame, the columns are named vectors, each containing a particular type of data (numeric, string, date, time).
Unlike a matrix where every element must have the same data type, a data frame allows each column to have a different data type.
This makes data frames more flexible for data analysis tasks where we often deal with data that have <em>heterogeneous</em> types.
The columns of a data frame are often referred to as <strong>variables</strong> or <strong>features</strong> in statistics.
In the context of mathematics or physics, these could be considered as <strong>parameters</strong> or <strong>attributes</strong>.
The rows of the data frame correspond to a single observation across these variables.</p>
<div id="constructing-and-accessing-data-frames" class="section level3 hasAnchor" number="5.1.1">
<h3><span class="header-section-number">5.1.1</span> Constructing and Accessing Data Frames<a href="df_plt.html#constructing-and-accessing-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let's start by constructing a data frame.
We'll use a dataset of different types of non-dairy milks, with their respective nutritional contents:</p>
<table style="width:100%;">
<colgroup>
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>Milk Type</th>
<th>Calories</th>
<th>Protein (g)</th>
<th>Fiber (g)</th>
<th>Carbohydrates (g)</th>
<th>Sugars (g)</th>
<th>Fats (g)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Almond</td>
<td>60</td>
<td>1</td>
<td>1</td>
<td>8</td>
<td>7</td>
<td>2.5</td>
</tr>
<tr class="even">
<td>Soy</td>
<td>100</td>
<td>7</td>
<td>2</td>
<td>10</td>
<td>NA</td>
<td>4</td>
</tr>
<tr class="odd">
<td>Oat</td>
<td>120</td>
<td>3</td>
<td>NA</td>
<td>20</td>
<td>19</td>
<td>2.5</td>
</tr>
<tr class="even">
<td>Rice</td>
<td>130</td>
<td>1</td>
<td>NA</td>
<td>25</td>
<td>NA</td>
<td>2.5</td>
</tr>
</tbody>
</table>
<p>In this dataset, the first column will be a <code>character</code> column, to indicate the type of the milk, whilst the others will be numericals.
Furthemore, the “Fiber” and “Sugars” columns for Soy, Oat and Rice milk have NA values, indicating missing or not applicable data.
This is often the case in real data, where usually information will not be available to us in the best way as possible.
In this case, R and python will just tell us that we have a “Not Applicable (NA)” or “Not a Number (NaN)” unknown value.</p>
<p>Now, let’s see how we can create this data frame in R and Python:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb613"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb613-1"><a href="df_plt.html#cb613-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a data frame in R</span></span>
<span id="cb613-2"><a href="df_plt.html#cb613-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb613-3"><a href="df_plt.html#cb613-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Milk_Type =</span> <span class="fu">c</span>(<span class="st">&quot;Almond&quot;</span>, <span class="st">&quot;Soy&quot;</span>, <span class="st">&quot;Oat&quot;</span>, <span class="st">&quot;Rice&quot;</span>),</span>
<span id="cb613-4"><a href="df_plt.html#cb613-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Calories =</span> <span class="fu">c</span>(<span class="dv">60</span>, <span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">130</span>),</span>
<span id="cb613-5"><a href="df_plt.html#cb613-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">Protein =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">1</span>),</span>
<span id="cb613-6"><a href="df_plt.html#cb613-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fiber =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="cn">NA</span>, <span class="cn">NA</span>),</span>
<span id="cb613-7"><a href="df_plt.html#cb613-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Carbohydrates =</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>),</span>
<span id="cb613-8"><a href="df_plt.html#cb613-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">Sugars =</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="cn">NA</span>, <span class="dv">19</span>, <span class="cn">NA</span>),</span>
<span id="cb613-9"><a href="df_plt.html#cb613-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">Fats =</span> <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="dv">4</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>)</span>
<span id="cb613-10"><a href="df_plt.html#cb613-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb613-11"><a href="df_plt.html#cb613-11" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(milk_df)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## 2 Soy            100       7     2            10     NA
## 3 Oat            120       3    NA            20     19
## 4 Rice           130       1    NA            25     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb615"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb615-1"><a href="df_plt.html#cb615-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a data frame in Python</span></span>
<span id="cb615-2"><a href="df_plt.html#cb615-2" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> {</span>
<span id="cb615-3"><a href="df_plt.html#cb615-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Milk_Type&#39;</span>: [<span class="st">&#39;Almond&#39;</span>, <span class="st">&#39;Soy&#39;</span>, <span class="st">&#39;Oat&#39;</span>, <span class="st">&#39;Rice&#39;</span>],</span>
<span id="cb615-4"><a href="df_plt.html#cb615-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Calories&#39;</span>: [<span class="dv">60</span>, <span class="dv">100</span>, <span class="dv">120</span>, <span class="dv">130</span>],</span>
<span id="cb615-5"><a href="df_plt.html#cb615-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Protein&#39;</span>: [<span class="dv">1</span>, <span class="dv">7</span>, <span class="dv">3</span>, <span class="dv">1</span>],</span>
<span id="cb615-6"><a href="df_plt.html#cb615-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Fiber&#39;</span>: [<span class="dv">1</span>, <span class="dv">2</span>, np.nan, np.nan],</span>
<span id="cb615-7"><a href="df_plt.html#cb615-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Carbohydrates&#39;</span>: [<span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">20</span>, <span class="dv">25</span>],</span>
<span id="cb615-8"><a href="df_plt.html#cb615-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Sugars&#39;</span>: [<span class="dv">7</span>, np.nan, <span class="dv">19</span>, np.nan],</span>
<span id="cb615-9"><a href="df_plt.html#cb615-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Fats&#39;</span>: [<span class="fl">2.5</span>, <span class="dv">4</span>, <span class="fl">2.5</span>, <span class="fl">2.5</span>]</span>
<span id="cb615-10"><a href="df_plt.html#cb615-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb615-11"><a href="df_plt.html#cb615-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb615-12"><a href="df_plt.html#cb615-12" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> pd.DataFrame(data)</span>
<span id="cb615-13"><a href="df_plt.html#cb615-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(milk_df)</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0
## 2       Oat       120        3    NaN             20    19.0   2.5
## 3      Rice       130        1    NaN             25     NaN   2.5</code></pre>
</div>
</div>
<p><strong>Accessing Variables</strong> To access individual variables (columns) of the data frame, we can use the <code>$</code> operator in R and the <code>[]</code> operator in Python:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb617"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb617-1"><a href="df_plt.html#cb617-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; column in R</span></span>
<span id="cb617-2"><a href="df_plt.html#cb617-2" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>Calories</span></code></pre></div>
<pre><code>## [1]  60 100 120 130</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb619"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb619-1"><a href="df_plt.html#cb619-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; column in Python</span></span>
<span id="cb619-2"><a href="df_plt.html#cb619-2" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;Calories&#39;</span>]</span></code></pre></div>
<pre><code>## 0     60
## 1    100
## 2    120
## 3    130
## Name: Calories, dtype: int64</code></pre>
</div>
</div>
<p>This will return the relative column, which, note, in R is returned <em>as a vector</em>, while in python as a column of a data frame.</p>
<p><strong>NOTE for R users.</strong> In R, we use the <code>select()</code> function from the <code>tidyverse</code> package to select columns.</p>
<div class="sourceCode" id="cb621"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb621-1"><a href="df_plt.html#cb621-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Using the select() function in R</span></span>
<span id="cb621-2"><a href="df_plt.html#cb621-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="sc">|&gt;</span> <span class="fu">select</span>(Calories)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 1
##   Calories
##      &lt;dbl&gt;
## 1       60
## 2      100
## 3      120
## 4      130</code></pre>
<p>Recall that the pipe operator (<code>|&gt;</code>) is used to chain operations together, so it will take whatever we have at the left, and use it as a first argument to the function to the right. The above R code is equivalent to <code>select(milk_df, Calories)</code>. Note, <code>select</code> will return the column as a vector of a data frame. Sometimes this can be better, as you might not want to change the type of your objects <em>inadvertently during execution</em>.</p>
<p>To access multiple variables at the same time, we can pass a vector of variable names:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb623"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb623-1"><a href="df_plt.html#cb623-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; and &#39;Protein&#39; columns in R and storing it </span></span>
<span id="cb623-2"><a href="df_plt.html#cb623-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in a new variable</span></span>
<span id="cb623-3"><a href="df_plt.html#cb623-3" aria-hidden="true" tabindex="-1"></a>calories_protein <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">select</span>(Calories, Protein)</span>
<span id="cb623-4"><a href="df_plt.html#cb623-4" aria-hidden="true" tabindex="-1"></a>calories_protein</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   Calories Protein
##      &lt;dbl&gt;   &lt;dbl&gt;
## 1       60       1
## 2      100       7
## 3      120       3
## 4      130       1</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb625"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb625-1"><a href="df_plt.html#cb625-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the &#39;Calories&#39; and &#39;Protein&#39; columns in Python and storing it </span></span>
<span id="cb625-2"><a href="df_plt.html#cb625-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in a new variable</span></span>
<span id="cb625-3"><a href="df_plt.html#cb625-3" aria-hidden="true" tabindex="-1"></a>calories_protein <span class="op">=</span> milk_df[[<span class="st">&#39;Calories&#39;</span>, <span class="st">&#39;Protein&#39;</span>]]</span>
<span id="cb625-4"><a href="df_plt.html#cb625-4" aria-hidden="true" tabindex="-1"></a>calories_protein</span></code></pre></div>
<pre><code>##    Calories  Protein
## 0        60        1
## 1       100        7
## 2       120        3
## 3       130        1</code></pre>
</div>
</div>
<p>Note that once we access (and store, as in this second example) a subset of a data frame, we get out another data frame.</p>
<p><strong>Accessing rows.</strong> To access individual rows in the data frames, we can use indexing.
Similarly to vectors, to access multiple rows at the same time, we can pass a vector of row indices:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb627"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb627-1"><a href="df_plt.html#cb627-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first row in R</span></span>
<span id="cb627-2"><a href="df_plt.html#cb627-2" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="dv">1</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 1 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb629"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb629-1"><a href="df_plt.html#cb629-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first and second rows in R</span></span>
<span id="cb629-2"><a href="df_plt.html#cb629-2" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>## # A tibble: 2 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1     1             8      7
## 2 Soy            100       7     2            10     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb631"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb631-1"><a href="df_plt.html#cb631-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first row in Python</span></span>
<span id="cb631-2"><a href="df_plt.html#cb631-2" aria-hidden="true" tabindex="-1"></a>milk_df.iloc[<span class="dv">0</span>]</span></code></pre></div>
<pre><code>## Milk_Type        Almond
## Calories             60
## Protein               1
## Fiber               1.0
## Carbohydrates         8
## Sugars              7.0
## Fats                2.5
## Name: 0, dtype: object</code></pre>
<div class="sourceCode" id="cb633"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb633-1"><a href="df_plt.html#cb633-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing the first and second rows in Python</span></span>
<span id="cb633-2"><a href="df_plt.html#cb633-2" aria-hidden="true" tabindex="-1"></a>milk_df.iloc[<span class="dv">0</span>:<span class="dv">2</span>]</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0</code></pre>
</div>
</div>
<p><strong>In R</strong>, when we use <code>[1:2, ]</code> on a data frame, we are working with a two-dimensional object. The <code>1:2</code> represents the row indices that we want to select, and the empty space after the comma indicates that we want to select all columns. So, <code>[1:2, ]</code> will select the first two rows and all columns of the data frame. This is different from selecting a vector because a vector is a one-dimensional object, and we only need to specify the indices of the elements we want to select.</p>
<p><strong>In Python</strong>, when we use <code>.iloc[0:2]</code> on a data frame, we are working with a two-dimensional object. The <code>0:2</code> represents the row indices that we want to select, and the absence of a second argument after the comma indicates that we want to select all columns. So, <code>.iloc[0:2]</code> will select the first two rows and all columns of the data frame. This is different from selecting elements from a vector because a list is a one-dimensional object, and we only need to specify the indices of the elements we want to select. Note also that when accessing only one row, in python, the returned element will be reshaped into a column vector.</p>
<p>Having said that, we can also access a subset of the data frame by specifying both rows and columns <strong>simultaneously</strong>:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb635"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb635-1"><a href="df_plt.html#cb635-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing a subset of the data frame in R</span></span>
<span id="cb635-2"><a href="df_plt.html#cb635-2" aria-hidden="true" tabindex="-1"></a>subset_df <span class="ot">&lt;-</span> milk_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(<span class="st">&quot;Milk_Type&quot;</span>, <span class="st">&quot;Calories&quot;</span>, <span class="st">&quot;Protein&quot;</span>)]</span>
<span id="cb635-3"><a href="df_plt.html#cb635-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively </span></span>
<span id="cb635-4"><a href="df_plt.html#cb635-4" aria-hidden="true" tabindex="-1"></a><span class="co"># subset_df &lt;- milk_df[1:2, 1:3]</span></span>
<span id="cb635-5"><a href="df_plt.html#cb635-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb635-6"><a href="df_plt.html#cb635-6" aria-hidden="true" tabindex="-1"></a>subset_df</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Milk_Type Calories Protein
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt;
## 1 Almond          60       1
## 2 Soy            100       7</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb637"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb637-1"><a href="df_plt.html#cb637-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing a subset of the data frame in Python</span></span>
<span id="cb637-2"><a href="df_plt.html#cb637-2" aria-hidden="true" tabindex="-1"></a>subset_df <span class="op">=</span> milk_df.loc[<span class="dv">0</span>:<span class="dv">2</span>, [<span class="st">&quot;Milk_Type&quot;</span>, <span class="st">&quot;Calories&quot;</span>, <span class="st">&quot;Protein&quot;</span>]]</span>
<span id="cb637-3"><a href="df_plt.html#cb637-3" aria-hidden="true" tabindex="-1"></a><span class="co"># alternatively </span></span>
<span id="cb637-4"><a href="df_plt.html#cb637-4" aria-hidden="true" tabindex="-1"></a><span class="co"># subset_df = milk_df.iloc[0:2, [0, 1, 2]]</span></span>
<span id="cb637-5"><a href="df_plt.html#cb637-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb637-6"><a href="df_plt.html#cb637-6" aria-hidden="true" tabindex="-1"></a>subset_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein
## 0    Almond        60        1
## 1       Soy       100        7
## 2       Oat       120        3</code></pre>
</div>
</div>
<p><strong>NOTE for Python users</strong>: Be careful, in this second statement we used an even different function, <code>loc</code>. In pandas, <code>loc</code> and <code>iloc</code> are two ways to select data from a DataFrame, called <em>indexers</em>.</p>
<p>The <code>loc</code> indexer is used with the actual labels of the index or columns. On the other hand, <code>iloc</code> is used for indexing by integer position. This means that you’re referring to the row or column by its position in the DataFrame (like the index in a vector), not by its label. In summary, use loc when you want to refer to items by their label and iloc when you want to refer to them by their integer position.</p>
<p><strong>Overwriting Elements</strong> We can, of course, overwrite and change elements of our data frames. For instance, the simplest thing we could do at the moment, is to fill in the missing values of our data frame for our column “Fibers”.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb639"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb639-1"><a href="df_plt.html#cb639-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputing missing values in R</span></span>
<span id="cb639-2"><a href="df_plt.html#cb639-2" aria-hidden="true" tabindex="-1"></a><span class="co"># overwriting the original dataset</span></span>
<span id="cb639-3"><a href="df_plt.html#cb639-3" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>Fiber[<span class="fu">is.na</span>(milk_df<span class="sc">$</span>Fiber)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">1.2</span>, <span class="fl">0.7</span>)</span>
<span id="cb639-4"><a href="df_plt.html#cb639-4" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1   1               8      7
## 2 Soy            100       7   2              10     NA
## 3 Oat            120       3   1.2            20     19
## 4 Rice           130       1   0.7            25     NA
## # ℹ 1 more variable: Fats &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb641"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb641-1"><a href="df_plt.html#cb641-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Imputing missing values in Python</span></span>
<span id="cb641-2"><a href="df_plt.html#cb641-2" aria-hidden="true" tabindex="-1"></a><span class="co"># overwriting the original dataset</span></span>
<span id="cb641-3"><a href="df_plt.html#cb641-3" aria-hidden="true" tabindex="-1"></a>milk_df.loc[np.isnan(milk_df[<span class="st">&#39;Fiber&#39;</span>]), <span class="st">&#39;Fiber&#39;</span>] <span class="op">=</span>  [<span class="fl">1.2</span>, <span class="fl">0.7</span>]</span>
<span id="cb641-4"><a href="df_plt.html#cb641-4" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats
## 0    Almond        60        1    1.0              8     7.0   2.5
## 1       Soy       100        7    2.0             10     NaN   4.0
## 2       Oat       120        3    1.2             20    19.0   2.5
## 3      Rice       130        1    0.7             25     NaN   2.5</code></pre>
</div>
</div>
<p>Note that, to impute the missing values, we can also use the <code>replace_na()</code> function in R and the <code>fillna()</code> function in Python, but these functions will overwrite all NAs in the dataset, leaving little to no flexibility.</p>
<div id="accessing-information-about-the-data-frame" class="section level4 hasAnchor" number="5.1.1.1">
<h4><span class="header-section-number">5.1.1.1</span> Accessing Information about the Data Frame<a href="df_plt.html#accessing-information-about-the-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can access various information about the data frame, such as its dimensions, number of rows, number of columns, column names, and a summary of its contents, with a lot of different functions. These will be not explained in detail, but can be useful for a lot of reasons related to exploratory analysis.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb643"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb643-1"><a href="df_plt.html#cb643-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing information about the data frame in R</span></span>
<span id="cb643-2"><a href="df_plt.html#cb643-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions </span></span>
<span id="cb643-3"><a href="df_plt.html#cb643-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 4 7</code></pre>
<div class="sourceCode" id="cb645"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb645-1"><a href="df_plt.html#cb645-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows and columns</span></span>
<span id="cb645-2"><a href="df_plt.html#cb645-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb647"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb647-1"><a href="df_plt.html#cb647-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] 7</code></pre>
<div class="sourceCode" id="cb649"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb649-1"><a href="df_plt.html#cb649-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variable names</span></span>
<span id="cb649-2"><a href="df_plt.html#cb649-2" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(milk_df)</span></code></pre></div>
<pre><code>## [1] &quot;Milk_Type&quot;     &quot;Calories&quot;      &quot;Protein&quot;      
## [4] &quot;Fiber&quot;         &quot;Carbohydrates&quot; &quot;Sugars&quot;       
## [7] &quot;Fats&quot;</code></pre>
<div class="sourceCode" id="cb651"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb651-1"><a href="df_plt.html#cb651-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb651-2"><a href="df_plt.html#cb651-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(milk_df)</span></code></pre></div>
<pre><code>##   Milk_Type            Calories        Protein 
##  Length:4           Min.   : 60.0   Min.   :1  
##  Class :character   1st Qu.: 90.0   1st Qu.:1  
##  Mode  :character   Median :110.0   Median :2  
##                     Mean   :102.5   Mean   :3  
##                     3rd Qu.:122.5   3rd Qu.:4  
##                     Max.   :130.0   Max.   :7  
##                                                
##      Fiber       Carbohydrates       Sugars  
##  Min.   :0.700   Min.   : 8.00   Min.   : 7  
##  1st Qu.:0.925   1st Qu.: 9.50   1st Qu.:10  
##  Median :1.100   Median :15.00   Median :13  
##  Mean   :1.225   Mean   :15.75   Mean   :13  
##  3rd Qu.:1.400   3rd Qu.:21.25   3rd Qu.:16  
##  Max.   :2.000   Max.   :25.00   Max.   :19  
##                                  NA&#39;s   :2   
##       Fats      
##  Min.   :2.500  
##  1st Qu.:2.500  
##  Median :2.500  
##  Mean   :2.875  
##  3rd Qu.:2.875  
##  Max.   :4.000  
## </code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb653"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb653-1"><a href="df_plt.html#cb653-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accessing information about the data frame in Python</span></span>
<span id="cb653-2"><a href="df_plt.html#cb653-2" aria-hidden="true" tabindex="-1"></a><span class="co"># dimensions </span></span>
<span id="cb653-3"><a href="df_plt.html#cb653-3" aria-hidden="true" tabindex="-1"></a>milk_df.shape</span></code></pre></div>
<pre><code>## (4, 7)</code></pre>
<div class="sourceCode" id="cb655"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb655-1"><a href="df_plt.html#cb655-1" aria-hidden="true" tabindex="-1"></a><span class="co"># number of rows and columns</span></span>
<span id="cb655-2"><a href="df_plt.html#cb655-2" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(milk_df)</span></code></pre></div>
<pre><code>## 4</code></pre>
<div class="sourceCode" id="cb657"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb657-1"><a href="df_plt.html#cb657-1" aria-hidden="true" tabindex="-1"></a><span class="bu">len</span>(milk_df.columns) <span class="co"># or milk_df.shape[1]</span></span></code></pre></div>
<pre><code>## 7</code></pre>
<div class="sourceCode" id="cb659"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb659-1"><a href="df_plt.html#cb659-1" aria-hidden="true" tabindex="-1"></a><span class="co"># variable names</span></span>
<span id="cb659-2"><a href="df_plt.html#cb659-2" aria-hidden="true" tabindex="-1"></a>milk_df.columns</span></code></pre></div>
<pre><code>## Index([&#39;Milk_Type&#39;, &#39;Calories&#39;, &#39;Protein&#39;, &#39;Fiber&#39;, &#39;Carbohydrates&#39;, &#39;Sugars&#39;,
##        &#39;Fats&#39;],
##       dtype=&#39;object&#39;)</code></pre>
<div class="sourceCode" id="cb661"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb661-1"><a href="df_plt.html#cb661-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summary statistics</span></span>
<span id="cb661-2"><a href="df_plt.html#cb661-2" aria-hidden="true" tabindex="-1"></a>milk_df.describe()</span></code></pre></div>
<pre><code>##          Calories   Protein     Fiber  Carbohydrates     Sugars   Fats
## count    4.000000  4.000000  4.000000       4.000000   2.000000  4.000
## mean   102.500000  3.000000  1.225000      15.750000  13.000000  2.875
## std     30.956959  2.828427  0.556028       8.098354   8.485281  0.750
## min     60.000000  1.000000  0.700000       8.000000   7.000000  2.500
## 25%     90.000000  1.000000  0.925000       9.500000  10.000000  2.500
## 50%    110.000000  2.000000  1.100000      15.000000  13.000000  2.500
## 75%    122.500000  4.000000  1.400000      21.250000  16.000000  2.875
## max    130.000000  7.000000  2.000000      25.000000  19.000000  4.000</code></pre>
</div>
</div>
<p>Based on the information above, how would you access the last 5 rows and the last 2 columns of your data frame?</p>
</div>
</div>
<div id="manipulating-data-frames" class="section level3 hasAnchor" number="5.1.2">
<h3><span class="header-section-number">5.1.2</span> Manipulating Data Frames<a href="df_plt.html#manipulating-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When working with data in R or Python, most of the time we need to perform some data manipulation. This could involve modifying our data frame, accessing specific parts of it that are of interest, or creating new variables based on existing ones. Fortunately, both R and Python provide a set of powerful functions for these tasks.</p>
<p>In R, we have <code>filter()</code>, <code>arrange()</code>, <code>select()</code>, and <code>mutate()</code>. In Python, we have <code>query</code>, <code>sort_values</code>, <code>loc</code> or <code>iloc</code>, and <code>assign</code>. We will now explore each of these functions in detail.</p>
<div id="adding-new-columns" class="section level4 hasAnchor" number="5.1.2.1">
<h4><span class="header-section-number">5.1.2.1</span> Adding New Columns<a href="df_plt.html#adding-new-columns" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Adding new columns allows us to easily add new columns that are functions of existing ones. In R, we use <code>mutate()</code>, and in Python, we use <code>assign</code>.</p>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb663"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb663-1"><a href="df_plt.html#cb663-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in R</span></span>
<span id="cb663-2"><a href="df_plt.html#cb663-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components and computing the </span></span>
<span id="cb663-3"><a href="df_plt.html#cb663-3" aria-hidden="true" tabindex="-1"></a><span class="co"># protein content</span></span>
<span id="cb663-4"><a href="df_plt.html#cb663-4" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">sugar_percent =</span> (Sugars <span class="sc">/</span> Carbohydrates) <span class="sc">*</span> <span class="dv">100</span>, </span>
<span id="cb663-5"><a href="df_plt.html#cb663-5" aria-hidden="true" tabindex="-1"></a>                              <span class="at">tot_wei =</span> Protein <span class="sc">+</span> Fiber <span class="sc">+</span> Carbohydrates <span class="sc">+</span> Fats,</span>
<span id="cb663-6"><a href="df_plt.html#cb663-6" aria-hidden="true" tabindex="-1"></a>                              <span class="at">protein_content =</span> Protein <span class="sc">/</span> tot_wei <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb663-7"><a href="df_plt.html#cb663-7" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1   1               8      7
## 2 Soy            100       7   2              10     NA
## 3 Oat            120       3   1.2            20     19
## 4 Rice           130       1   0.7            25     NA
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb665"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb665-1"><a href="df_plt.html#cb665-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in Python</span></span>
<span id="cb665-2"><a href="df_plt.html#cb665-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components and computing the </span></span>
<span id="cb665-3"><a href="df_plt.html#cb665-3" aria-hidden="true" tabindex="-1"></a><span class="co"># protein content</span></span>
<span id="cb665-4"><a href="df_plt.html#cb665-4" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> milk_df.assign(</span>
<span id="cb665-5"><a href="df_plt.html#cb665-5" aria-hidden="true" tabindex="-1"></a>    sugar_percent <span class="op">=</span> <span class="kw">lambda</span> df: (df[<span class="st">&#39;Sugars&#39;</span>] <span class="op">/</span> df[<span class="st">&#39;Carbohydrates&#39;</span>]) <span class="op">*</span> <span class="dv">100</span>,</span>
<span id="cb665-6"><a href="df_plt.html#cb665-6" aria-hidden="true" tabindex="-1"></a>    tot_wei <span class="op">=</span> <span class="kw">lambda</span> df: df[<span class="st">&#39;Protein&#39;</span>] <span class="op">+</span> df[<span class="st">&#39;Fiber&#39;</span>] <span class="op">+</span> df[<span class="st">&#39;Carbohydrates&#39;</span>] <span class="op">+</span> df[<span class="st">&#39;Fats&#39;</span>],</span>
<span id="cb665-7"><a href="df_plt.html#cb665-7" aria-hidden="true" tabindex="-1"></a>    protein_content <span class="op">=</span> <span class="kw">lambda</span> df: df[<span class="st">&#39;Protein&#39;</span>] <span class="op">/</span> df[<span class="st">&#39;tot_wei&#39;</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb665-8"><a href="df_plt.html#cb665-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb665-9"><a href="df_plt.html#cb665-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb665-10"><a href="df_plt.html#cb665-10" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 0    Almond        60        1    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 1       Soy       100        7    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 2       Oat       120        3    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130        1    0.7             25     NaN   2.5            NaN     29.2         3.424658</code></pre>
<p>The advantage of using <code>mutate</code> and <code>assign</code> over directly overwriting columns is that those function allow you to reference other columns that are being created within the same call. This makes it possible to create multiple interdependent columns in one go. In contrast, when overwriting columns directly, you would have to create each new column one at a time, which could be less efficient and harder to read.</p>
<p>If we had to do the same code manually, each one at a time, this would have looked like the following:</p>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb667"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb667-1"><a href="df_plt.html#cb667-1" aria-hidden="true" tabindex="-1"></a><span class="do">### equivalent to above statement</span></span>
<span id="cb667-2"><a href="df_plt.html#cb667-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-3"><a href="df_plt.html#cb667-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in R</span></span>
<span id="cb667-4"><a href="df_plt.html#cb667-4" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>sugar_percent <span class="ot">&lt;-</span> (milk_df<span class="sc">$</span>Sugars <span class="sc">/</span> milk_df<span class="sc">$</span>Carbohydrates) <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb667-5"><a href="df_plt.html#cb667-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-6"><a href="df_plt.html#cb667-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components</span></span>
<span id="cb667-7"><a href="df_plt.html#cb667-7" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>tot_wei <span class="ot">&lt;-</span> milk_df<span class="sc">$</span>Protein <span class="sc">+</span> milk_df<span class="sc">$</span>Fiber <span class="sc">+</span> milk_df<span class="sc">$</span>Carbohydrates <span class="sc">+</span> milk_df<span class="sc">$</span>Fats</span>
<span id="cb667-8"><a href="df_plt.html#cb667-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-9"><a href="df_plt.html#cb667-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, computing the protein content</span></span>
<span id="cb667-10"><a href="df_plt.html#cb667-10" aria-hidden="true" tabindex="-1"></a>milk_df<span class="sc">$</span>protein_content <span class="ot">=</span> milk_df<span class="sc">$</span>Protein <span class="sc">/</span> milk_df<span class="sc">$</span>tot_wei <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb667-11"><a href="df_plt.html#cb667-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb667-12"><a href="df_plt.html#cb667-12" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Almond          60       1   1               8      7
## 2 Soy            100       7   2              10     NA
## 3 Oat            120       3   1.2            20     19
## 4 Rice           130       1   0.7            25     NA
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb669"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb669-1"><a href="df_plt.html#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="co">### equivalent to above statement</span></span>
<span id="cb669-2"><a href="df_plt.html#cb669-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-3"><a href="df_plt.html#cb669-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute percentage of sugars over carbohydrates in Python</span></span>
<span id="cb669-4"><a href="df_plt.html#cb669-4" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;sugar_percent&#39;</span>] <span class="op">=</span> (milk_df[<span class="st">&#39;Sugars&#39;</span>] <span class="op">/</span> milk_df[<span class="st">&#39;Carbohydrates&#39;</span>]) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb669-5"><a href="df_plt.html#cb669-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-6"><a href="df_plt.html#cb669-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, adding the total weight of the components</span></span>
<span id="cb669-7"><a href="df_plt.html#cb669-7" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;tot_wei&#39;</span>] <span class="op">=</span> milk_df[<span class="st">&#39;Protein&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Fiber&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Carbohydrates&#39;</span>] <span class="op">+</span> milk_df[<span class="st">&#39;Fats&#39;</span>]</span>
<span id="cb669-8"><a href="df_plt.html#cb669-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-9"><a href="df_plt.html#cb669-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Finally, computing the protein content</span></span>
<span id="cb669-10"><a href="df_plt.html#cb669-10" aria-hidden="true" tabindex="-1"></a>milk_df[<span class="st">&#39;protein_content&#39;</span>] <span class="op">=</span> milk_df[<span class="st">&#39;Protein&#39;</span>] <span class="op">/</span> milk_df[<span class="st">&#39;tot_wei&#39;</span>] <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb669-11"><a href="df_plt.html#cb669-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb669-12"><a href="df_plt.html#cb669-12" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 0    Almond        60        1    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 1       Soy       100        7    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 2       Oat       120        3    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130        1    0.7             25     NaN   2.5            NaN     29.2         3.424658</code></pre>
<p>You can see how this makes the code longer and potentially harder to read. However, it can be useful when the computation of each new column depends on the columns added in the previous steps.</p>
<p>Note also how, over the rows of soy and rice, the <code>sugar_percent</code> column has missing values, and similarly the <code>protein_content</code> variable has skewed values: this is because the value of the sugar content was missing originally. Be careful about missing values!</p>
</div>
<div id="filtering-rows" class="section level4 hasAnchor" number="5.1.2.2">
<h4><span class="header-section-number">5.1.2.2</span> Filtering Rows<a href="df_plt.html#filtering-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Filtering allows us to focus on a subset of the rows of a data frame. This is based on the result of a vectorised logic expression. In a way, we have already seen this in the past when selecting subsets of vectors! In R, we use <code>filter()</code>, and in Python, we use <code>query()</code>.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb671"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb671-1"><a href="df_plt.html#cb671-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering rows where Calories is greater than 100 in R</span></span>
<span id="cb671-2"><a href="df_plt.html#cb671-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="sc">|&gt;</span> <span class="fu">filter</span>(Calories <span class="sc">&gt;</span> <span class="dv">100</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Oat            120       3   1.2            20     19
## 2 Rice           130       1   0.7            25     NA
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb673"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb673-1"><a href="df_plt.html#cb673-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtering rows where Calories is greater than 100 in Python</span></span>
<span id="cb673-2"><a href="df_plt.html#cb673-2" aria-hidden="true" tabindex="-1"></a>milk_df.query(<span class="st">&#39;Calories &gt; 100&#39;</span>)</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 2       Oat       120        3    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 3      Rice       130        1    0.7             25     NaN   2.5            NaN     29.2         3.424658</code></pre>
</div>
</div>
</div>
<div id="reordering-rows" class="section level4 hasAnchor" number="5.1.2.3">
<h4><span class="header-section-number">5.1.2.3</span> Reordering Rows<a href="df_plt.html#reordering-rows" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Reordering allows us to arrange the rows in the data frame in a specific order. In R, we use <code>arrange()</code>, and in Python, we use <code>sort_values()</code>.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="df_plt.html#cb675-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arranging rows by decreasing sugar_percent in R</span></span>
<span id="cb675-2"><a href="df_plt.html#cb675-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="ot">&lt;-</span> milk_df <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(sugar_percent))</span>
<span id="cb675-3"><a href="df_plt.html#cb675-3" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>## # A tibble: 4 × 10
##   Milk_Type Calories Protein Fiber Carbohydrates Sugars
##   &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;         &lt;dbl&gt;  &lt;dbl&gt;
## 1 Oat            120       3   1.2            20     19
## 2 Almond          60       1   1               8      7
## 3 Soy            100       7   2              10     NA
## 4 Rice           130       1   0.7            25     NA
## # ℹ 4 more variables: Fats &lt;dbl&gt;, sugar_percent &lt;dbl&gt;,
## #   tot_wei &lt;dbl&gt;, protein_content &lt;dbl&gt;</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb677"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb677-1"><a href="df_plt.html#cb677-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Arranging rows by decreasing sugar_percent in Python</span></span>
<span id="cb677-2"><a href="df_plt.html#cb677-2" aria-hidden="true" tabindex="-1"></a>milk_df <span class="op">=</span> milk_df.sort_values(<span class="st">&#39;sugar_percent&#39;</span>, ascending<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb677-3"><a href="df_plt.html#cb677-3" aria-hidden="true" tabindex="-1"></a>milk_df</span></code></pre></div>
<pre><code>##   Milk_Type  Calories  Protein  Fiber  Carbohydrates  Sugars  Fats  sugar_percent  tot_wei  protein_content
## 2       Oat       120        3    1.2             20    19.0   2.5           95.0     26.7        11.235955
## 0    Almond        60        1    1.0              8     7.0   2.5           87.5     12.5         8.000000
## 1       Soy       100        7    2.0             10     NaN   4.0            NaN     23.0        30.434783
## 3      Rice       130        1    0.7             25     NaN   2.5            NaN     29.2         3.424658</code></pre>
</div>
</div>
<p>These examples show the power of modern R and Python for data manipulation! By understanding these functions, we can perform complex data manipulations with just a few lines of code.</p>
</div>
</div>
<div id="a-real-data-frame" class="section level3 hasAnchor" number="5.1.3">
<h3><span class="header-section-number">5.1.3</span> A Real Data Frame<a href="df_plt.html#a-real-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Now that we have the basis of manipulating data frames, before proceeding to the next steps, let’s work with a real-world data frame: <code>mtcars</code>! This data frame is available in both R (natively) and Python (in <code>plotnine.data.mtcars</code>) and contains various car attributes. However, to simulate a real world scenario, we’ll see how to import it from a csv file.</p>
<div id="importing-the-data-frame" class="section level4 hasAnchor" number="5.1.3.1">
<h4><span class="header-section-number">5.1.3.1</span> Importing the Data Frame<a href="df_plt.html#importing-the-data-frame" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, let’s import the <code>mtcars</code> data frame. You’ll need to download this from Moodle, and save it under your working directory as “mtcars.csv”. Remember that we learned how to read from CSV files in week 1! Well, this is the first time we are doing this in a practical sense.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb679"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb679-1"><a href="df_plt.html#cb679-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing the data frame in R</span></span>
<span id="cb679-2"><a href="df_plt.html#cb679-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;mtcars.csv&quot;</span>)</span></code></pre></div>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb680"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb680-1"><a href="df_plt.html#cb680-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Importing the data frame in Python</span></span>
<span id="cb680-2"><a href="df_plt.html#cb680-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb680-3"><a href="df_plt.html#cb680-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb680-4"><a href="df_plt.html#cb680-4" aria-hidden="true" tabindex="-1"></a>mtcars <span class="op">=</span> pd.read_csv(<span class="st">&quot;mtcars.csv&quot;</span>)</span></code></pre></div>
</div>
</div>
</div>
<div id="understanding-the-data-frames" class="section level4 hasAnchor" number="5.1.3.2">
<h4><span class="header-section-number">5.1.3.2</span> Understanding the Data Frames<a href="df_plt.html#understanding-the-data-frames" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The <code>mtcars</code> data frame contains the following columns:</p>
<ul>
<li><code>mpg</code>: Miles/(US) gallon</li>
<li><code>cyl</code>: Number of cylinders</li>
<li><code>disp</code>: Displacement (cu.in.)</li>
<li><code>hp</code>: Gross horsepower</li>
<li><code>drat</code>: Rear axle ratio</li>
<li><code>wt</code>: Weight (1000 lbs)</li>
<li><code>qsec</code>: 1/4 mile time</li>
<li><code>vs</code>: Engine (0 = V-shaped, 1 = straight)</li>
<li><code>am</code>: Transmission (0 = automatic, 1 = manual)</li>
<li><code>gear</code>: Number of forward gears</li>
<li><code>carb</code>: Number of carburetors</li>
</ul>
</div>
<div id="displaying-the-first-few-values" class="section level4 hasAnchor" number="5.1.3.3">
<h4><span class="header-section-number">5.1.3.3</span> Displaying the First Few Values<a href="df_plt.html#displaying-the-first-few-values" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can display the first few values of the data frame using the <code>head()</code> function in R and Python.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb681"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb681-1"><a href="df_plt.html#cb681-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the first few values in R</span></span>
<span id="cb681-2"><a href="df_plt.html#cb681-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code></pre></div>
<pre><code>##    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## 1 21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## 2 21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## 3 22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## 4 21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## 5 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## 6 18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb683"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb683-1"><a href="df_plt.html#cb683-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Displaying the first few values in Python</span></span>
<span id="cb683-2"><a href="df_plt.html#cb683-2" aria-hidden="true" tabindex="-1"></a>mtcars.head()</span></code></pre></div>
<pre><code>##     mpg  cyl   disp   hp  drat     wt   qsec  vs  am  gear  carb
## 0  21.0    6  160.0  110  3.90  2.620  16.46   0   1     4     4
## 1  21.0    6  160.0  110  3.90  2.875  17.02   0   1     4     4
## 2  22.8    4  108.0   93  3.85  2.320  18.61   1   1     4     1
## 3  21.4    6  258.0  110  3.08  3.215  19.44   1   0     3     1
## 4  18.7    8  360.0  175  3.15  3.440  17.02   0   0     3     2</code></pre>
</div>
</div>
<p>In RStudio, you can also explore the data frame via the <code>View()</code> function. This opens the data frame in a spreadsheet-like view, which can be very useful for getting a sense of the data.</p>
</div>
<div id="factor-variables" class="section level4 hasAnchor" number="5.1.3.4">
<h4><span class="header-section-number">5.1.3.4</span> Factor Variables<a href="df_plt.html#factor-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In R, a factor is a variable that can take on a limited number of distinct values, such as ‘yes’ and ‘no’. It’s used to store categorical data. In Python, we use the <code>category</code> data type for similar purposes.</p>
<p>In the <code>mtcars</code> data frame, the <code>vs</code> and <code>am</code> columns are currently integers, but they represent categorical data. Therefore, we should convert them to factors in R or categories in Python.</p>
<p>Here’s how we can do this:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="df_plt.html#cb685-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting to factors in R</span></span>
<span id="cb685-2"><a href="df_plt.html#cb685-2" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>vs <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(mtcars<span class="sc">$</span>vs)</span>
<span id="cb685-3"><a href="df_plt.html#cb685-3" aria-hidden="true" tabindex="-1"></a>mtcars<span class="sc">$</span>am <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(mtcars<span class="sc">$</span>am)</span>
<span id="cb685-4"><a href="df_plt.html#cb685-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb685-5"><a href="df_plt.html#cb685-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the conversion</span></span>
<span id="cb685-6"><a href="df_plt.html#cb685-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mtcars)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    32 obs. of  11 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : int  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp: num  160 160 108 258 360 ...
##  $ hp  : int  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat: num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt  : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec: num  16.5 17 18.6 19.4 17 ...
##  $ vs  : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 1 1 2 2 1 2 1 2 2 2 ...
##  $ am  : Factor w/ 2 levels &quot;0&quot;,&quot;1&quot;: 2 2 2 1 1 1 1 1 1 1 ...
##  $ gear: int  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb: int  4 4 1 1 2 1 4 2 2 4 ...</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb687"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb687-1"><a href="df_plt.html#cb687-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Converting to categories in Python</span></span>
<span id="cb687-2"><a href="df_plt.html#cb687-2" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&#39;vs&#39;</span>] <span class="op">=</span> mtcars[<span class="st">&#39;vs&#39;</span>].astype(<span class="st">&#39;category&#39;</span>)</span>
<span id="cb687-3"><a href="df_plt.html#cb687-3" aria-hidden="true" tabindex="-1"></a>mtcars[<span class="st">&#39;am&#39;</span>] <span class="op">=</span> mtcars[<span class="st">&#39;am&#39;</span>].astype(<span class="st">&#39;category&#39;</span>)</span>
<span id="cb687-4"><a href="df_plt.html#cb687-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb687-5"><a href="df_plt.html#cb687-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Checking the conversion</span></span>
<span id="cb687-6"><a href="df_plt.html#cb687-6" aria-hidden="true" tabindex="-1"></a>mtcars.info()</span></code></pre></div>
<pre><code>## &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
## RangeIndex: 32 entries, 0 to 31
## Data columns (total 11 columns):
##  #   Column  Non-Null Count  Dtype   
## ---  ------  --------------  -----   
##  0   mpg     32 non-null     float64 
##  1   cyl     32 non-null     int64   
##  2   disp    32 non-null     float64 
##  3   hp      32 non-null     int64   
##  4   drat    32 non-null     float64 
##  5   wt      32 non-null     float64 
##  6   qsec    32 non-null     float64 
##  7   vs      32 non-null     category
##  8   am      32 non-null     category
##  9   gear    32 non-null     int64   
##  10  carb    32 non-null     int64   
## dtypes: category(2), float64(5), int64(4)
## memory usage: 2.7 KB</code></pre>
</div>
</div>
<p>This code converts the <code>vs</code> and <code>am</code> columns to factors or categories and then checks that the conversion was successful. By correctly representing these columns as categorical variables, we can perform more appropriate statistical analyses and get more meaningful insights from our data.</p>
</div>
</div>
<div id="group-by-and-summarise" class="section level3 hasAnchor" number="5.1.4">
<h3><span class="header-section-number">5.1.4</span> Group by and summarise<a href="df_plt.html#group-by-and-summarise" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>How to extract information… For doing so we need a real data frame…</p>
</div>
</div>
<div id="plotting-with-ggplot" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Plotting with ggplot<a href="df_plt.html#plotting-with-ggplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="more-basic-plots" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> More basic plots<a href="df_plt.html#more-basic-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="advanced-plots" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Advanced plots<a href="df_plt.html#advanced-plots" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="exercise-ggplots-of-periodic-functions" class="section level3 hasAnchor" number="5.2.3">
<h3><span class="header-section-number">5.2.3</span> Exercise: ggplots of periodic functions<a href="df_plt.html#exercise-ggplots-of-periodic-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this exercises we will be plotting few sine and cosine waves.
This should combine both knowledge of creating a data frame, and ggplot.
The exercise has various levels of completition, from a basic level where we will be plotting a sine function from 1 to 10, to an advance level where we will be displaying multiple periodic functions.</p>
<p><strong>Basic.</strong> Via ggplot, plot a sinusoidal function, <span class="math inline">\(y = \sin(x)\)</span>, from 0 to 10:</p>
<ol style="list-style-type: decimal">
<li><p>You want to create a sequence of numbers, <code>x</code>, of at least 100 values ranging from 0 to 10.</p></li>
<li><p>You then want to run the sine function on this sequence to get the <code>y</code></p></li>
<li><p>Store the results of this operation in a data frame</p></li>
<li><p>Plot a line using ggplot’s <code>geom_line()</code>.</p></li>
</ol>
<p><strong>Medium.</strong> Modify the code above to add the additional function <span class="math inline">\(y=\cos(x)\)</span>.
You should get something like:</p>
<p><img src="images/unnamed-chunk-218-1.png" width="50%" /></p>
<ul>
<li><p>The x-axis should range from 0 to 10, with a step size of 0.01.</p></li>
<li><p>Use different colours for each curve (sine or cosine)</p></li>
<li><p>How many columns should have your dataframe?</p></li>
</ul>
<p><strong>Advanced.</strong> Using <code>ggplot</code>, write a program that generates the plot below:</p>
<p><img src="images/unnamed-chunk-219-1.png" width="50%" /></p>
<p>Each subplot should be comparing sines and cosines with different frequencies.
The plot should show 6 sinusoidal functions:<span class="math display">\[\sin\left(\frac{x}{2}\right), \sin(x), \sin(2x), \cos\left(\frac{x}{2}\right), \cos(x), \cos(2x)\]</span></p>
<ul>
<li><p>The plot should have three subplots, one for each frequency (<span class="math inline">\(\frac{1}{2}\)</span>, 1, and 2).
Each subplot should contain both the sine and cosine functions, as above</p></li>
<li><p>Avoid <em>computing everything by hand</em> (e.g. copy pasting the dataframe code 6 times) or <code>for</code> loop.
TIP: Use <code>map</code> to generate your dataframes and <code>reduce</code> to combine them.
Use lambda functions where necessary.</p></li>
</ul>
<style type="text/css">
.book .book-body .page-wrapper .page-inner {
  max-width: 1200px !important;
}
</style>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="maps_alg.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
