<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Functions and Loops | Lancaster University MATH245 Computational Mathematics</title>
  <meta name="description" content="3 Functions and Loops | Lancaster University MATH245 Computational Mathematics" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Functions and Loops | Lancaster University MATH245 Computational Mathematics" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Functions and Loops | Lancaster University MATH245 Computational Mathematics" />
  
  
  

<meta name="author" content="Lecturers: Dr Eduard Campillo-Funollet and Dr Gaetano Romano" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="log_vec.html"/>
<link rel="next" href="maps_alg.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="intro_prog.html"><a href="intro_prog.html"><i class="fa fa-check"></i><b>1</b> Introduction to Computational Mathematics</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro_prog.html"><a href="intro_prog.html#what-is-a-computer"><i class="fa fa-check"></i><b>1.1</b> What is a Computer?</a></li>
<li class="chapter" data-level="1.2" data-path="intro_prog.html"><a href="intro_prog.html#computing-accessing-memory-and-storing"><i class="fa fa-check"></i><b>1.2</b> Computing, Accessing Memory and Storing</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="log_vec.html"><a href="log_vec.html"><i class="fa fa-check"></i><b>2</b> Logic and Vectors</a>
<ul>
<li class="chapter" data-level="2.1" data-path="log_vec.html"><a href="log_vec.html#comparisons"><i class="fa fa-check"></i><b>2.1</b> Comparisons</a></li>
<li class="chapter" data-level="2.2" data-path="log_vec.html"><a href="log_vec.html#logical-arithmetic"><i class="fa fa-check"></i><b>2.2</b> Logical Arithmetic</a></li>
<li class="chapter" data-level="2.3" data-path="log_vec.html"><a href="log_vec.html#flow"><i class="fa fa-check"></i><b>2.3</b> Flow</a></li>
<li class="chapter" data-level="2.4" data-path="log_vec.html"><a href="log_vec.html#vectors"><i class="fa fa-check"></i><b>2.4</b> Vectors</a></li>
<li class="chapter" data-level="2.5" data-path="log_vec.html"><a href="log_vec.html#accessing-vectors"><i class="fa fa-check"></i><b>2.5</b> Accessing vectors</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="func_loop.html"><a href="func_loop.html"><i class="fa fa-check"></i><b>3</b> Functions and Loops</a>
<ul>
<li class="chapter" data-level="3.1" data-path="func_loop.html"><a href="func_loop.html#functions"><i class="fa fa-check"></i><b>3.1</b> Functions</a></li>
<li class="chapter" data-level="3.2" data-path="func_loop.html"><a href="func_loop.html#looping"><i class="fa fa-check"></i><b>3.2</b> State and For Loop</a></li>
<li class="chapter" data-level="3.3" data-path="func_loop.html"><a href="func_loop.html#more-about-looping"><i class="fa fa-check"></i><b>3.3</b> More about looping</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="maps_alg.html"><a href="maps_alg.html"><i class="fa fa-check"></i><b>4</b> Functional Programming and Linear Algebra</a>
<ul>
<li class="chapter" data-level="4.1" data-path="maps_alg.html"><a href="maps_alg.html#Maps"><i class="fa fa-check"></i><b>4.1</b> An intro to Functional Programming</a></li>
<li class="chapter" data-level="4.2" data-path="maps_alg.html"><a href="maps_alg.html#doing-linear-algebra"><i class="fa fa-check"></i><b>4.2</b> Doing Linear Algebra</a></li>
<li class="chapter" data-level="4.3" data-path="maps_alg.html"><a href="maps_alg.html#an-end-note-to-this-chapter"><i class="fa fa-check"></i><b>4.3</b> An end note to this chapter</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="df_plt.html"><a href="df_plt.html"><i class="fa fa-check"></i><b>5</b> Data Frames and Plotting</a>
<ul>
<li class="chapter" data-level="5.1" data-path="df_plt.html"><a href="df_plt.html#data-frames"><i class="fa fa-check"></i><b>5.1</b> Data Frames</a></li>
<li class="chapter" data-level="5.2" data-path="df_plt.html"><a href="df_plt.html#plotting-with-ggplot-and-plotnine"><i class="fa fa-check"></i><b>5.2</b> Plotting with ggplot (and plotnine)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="challenge.html"><a href="challenge.html"><i class="fa fa-check"></i><b>6</b> Additional Programming Challenges</a>
<ul>
<li class="chapter" data-level="6.1" data-path="challenge.html"><a href="challenge.html#part-1-scientific-computing"><i class="fa fa-check"></i><b>6.1</b> Part 1: Scientific Computing</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Lancaster University MATH245 Computational Mathematics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="func_loop" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Functions and Loops<a href="func_loop.html#func_loop" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="functions" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Functions<a href="func_loop.html#functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Functions in mathematics, is an assignment of an element from a set to a
different set. Here we give a more “practical” definition.</p>
<p>In the realm of programming, a function is a reusable piece of code that
performs a specific task. Think of it as a mini-program within your
program, a tool you create to do a job so you don’t have to. And as a
program does, you give it an input, it will do some voudou magic, and it
will spit an output.</p>
<p><img src="images/chapter3/dark_magic.png" /></p>
<p>What’s the point of a function you might ask? Well, in programming, we
use functions when we have tasks that must be performed again and again.
When we notice a repetitive task occurring, it is a good idea to write a
function that performs this task. If you find yourself copying and
pasting the same piece of code more than three times, it’s time to stop
and think: “Should I write a function for this?” Remember, in the world
of coding, being lazy is often a good thing! We aim for efficiency, not
repetitive strain injury.</p>
<p><img src="images/chapter3/homer.jpg" width="366" /></p>
<p>Imagine if every time you need to compute the square root, you need to
write the code to compute the square root over and over again. Well, but
in practice, you don’t have to! There’s <em>a function</em> that does the job
for you already: <code>sqrt</code> In fact, it won’t come as a surprise that we’ve
already encountered many functions in the past weeks. For instance:</p>
<ul>
<li>Mathematical functions like <code>sqrt()</code> or <code>sin()</code> in R, and
<code>math.sqrt()</code> or <code>math.sin()</code> in Python.</li>
<li>Functions like <code>np.array()</code> or <code>c()</code> to create vectors.</li>
<li>Functions like <code>length()</code> in R or <code>len()</code> in Python to get
information about our data structures.</li>
</ul>
<p>Again, each function I mentioned, has an input, and an output: <code>sqrt</code>
takes a number as input and returns the square root of such number,
<code>length</code> or <code>len</code> take a whole vector as input, and return the length of
it…</p>
<p>Another incredibly useful function is the <code>help()</code> function, available
in both R and Python. This function takes a <strong>function</strong> as an input,
and provides us with information said function as output! For example:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="func_loop.html#cb400-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(sqrt)</span></code></pre></div>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb401"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb401-1"><a href="func_loop.html#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(math.sqrt)</span></code></pre></div>
</div>
</div>
<p>Whenever you will meet a <strong>built-in</strong> function, or a function from a
<strong>documented external library</strong> you can call the help on the function to
have an explanation about it! Documentation is a requirement in R
libraries, so pretty much all the functions you will meet are
documented! Unfortunately this is not the case for Python, where
documenting functions is not a requirement, so not always the <code>help</code>
will return something.</p>
<div id="writing-new-functions" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Writing new functions<a href="func_loop.html#writing-new-functions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The real power of functions comes when we start creating our own. We can
write new functions that perform specific tasks, tailored to our needs.
This allows us to do more complex, interesting, and fun things with our
code. So let’s dive in and learn how to create our own functions! We can
wrap our code in a function, and every time the function is called, this
code is run. This is incredibly useful for tasks we need to perform
multiple times. Let’s build for example a simple function that converts
pounds (lbs) to grams (g).</p>
<p>Mathematically, this is simply done by the formula: <span class="math display">\[
g = 453.5924 * lbs
\]</span></p>
<p>In <strong>R</strong>, we define a function using the <code>function()</code> command. The
arguments of the function are placed within the parentheses. Here’s how
we can create a function in R:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb402-1"><a href="func_loop.html#cb402-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams <span class="ot">&lt;-</span> <span class="cf">function</span>(lbs) {</span>
<span id="cb402-2"><a href="func_loop.html#cb402-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="ot">&lt;-</span> <span class="fl">453.5924</span> <span class="sc">*</span> lbs</span>
<span id="cb402-3"><a href="func_loop.html#cb402-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(grams)</span>
<span id="cb402-4"><a href="func_loop.html#cb402-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>In this function, <code>lbs</code> is the input (or argument), and the function
returns the equivalent weight in grams. In R, we create a new function
with the <code>function</code> statement, and then we assign it to a variable,
which is going to be containing our function. The <code>return()</code> statement
is used to specify the result that the function should output.</p>
<p>In <strong>Python</strong>, we define a function using the <code>def</code> keyword. The
arguments of the function are placed within the parentheses. Again we
need to use indentation: this is crucial in Python as it determines the
code blocks. Here’s how we can create a function in Python:</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb403-1"><a href="func_loop.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lbs_to_grams(lbs):</span>
<span id="cb403-2"><a href="func_loop.html#cb403-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="op">=</span> <span class="fl">453.5924</span> <span class="op">*</span> lbs</span>
<span id="cb403-3"><a href="func_loop.html#cb403-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> grams</span></code></pre></div>
<p>In this function, <code>lbs</code> is the input (or argument), and the function
returns the equivalent weight in grams: following the <code>def</code> keyword we
need both the function name, followed by the argument. The <code>return</code>
statement is used to specify the result that the function should output.</p>
<p>Now, once we have made the new function, we can call it with:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="func_loop.html#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="at">lbs=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 907.1848</code></pre>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="func_loop.html#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="at">lbs=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1360.777</code></pre>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="func_loop.html#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="co"># when calling we can also omit </span></span>
<span id="cb408-2"><a href="func_loop.html#cb408-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the argument name for brevity</span></span>
<span id="cb408-3"><a href="func_loop.html#cb408-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 1360.777</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb410"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb410-1"><a href="func_loop.html#cb410-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(lbs<span class="op">=</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 907.1848</code></pre>
<div class="sourceCode" id="cb412"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb412-1"><a href="func_loop.html#cb412-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(lbs<span class="op">=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 1360.7772</code></pre>
<div class="sourceCode" id="cb414"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb414-1"><a href="func_loop.html#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="co"># when calling we can also omit </span></span>
<span id="cb414-2"><a href="func_loop.html#cb414-2" aria-hidden="true" tabindex="-1"></a><span class="co"># the argument name for brevity</span></span>
<span id="cb414-3"><a href="func_loop.html#cb414-3" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## 1360.7772</code></pre>
</div>
</div>
<p>By creating functions like these, we can make our code more efficient
and easier to read. Plus, it saves us from having to remember the
conversion rate each time we want to convert pounds to grams!</p>
<p>The name of the function <code>lbs_to_grams</code> and its argument <code>lbs</code> are just
names that I chose. There are a few guidelines that could be useful when
naming functions:</p>
<ul>
<li><p>Names should be lowercase.</p></li>
<li><p>Use an underscore, _, to separate words within a name.</p></li>
<li><p>Strive for names that are concise and meaningful (this is not
easy!).</p></li>
<li><p>Avoid existing function names in R and python, such as <code>length()</code> or
<code>len()</code>.</p></li>
</ul>
<p>Also, you might have noticed we made a variable within the function
code, <code>grams</code>. But what does it mean to have variables within functions?
The variables used inside a function are local to that function. Think
of your function as a guarded sandbox, where no child leaves unless you
specifically tell them to. This sandbox is called and <em>enviroment</em>.
Let’s cover this concept formally!</p>
<div id="enviroments" class="section level4 hasAnchor" number="3.1.1.1">
<h4><span class="header-section-number">3.1.1.1</span> Enviroments<a href="func_loop.html#enviroments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In programming, an environment refers to a structure that holds
variables. When you create a variable in a program, the environment is
where this variable lives. The environment keeps track of the variable’s
name and its current value.</p>
<p>There are two types of environments: global and local.</p>
<ul>
<li><p>The <strong>global environment</strong> is the default environment where your
variables live unless you specify otherwise. When you create a
variable at the top level of your script, it’s stored in the global
environment.</p></li>
<li><p>A <strong>local environment</strong> is created when you call a function. Each
time a function is called, a new local environment is created for
that function call. This environment holds the variables that are
created within the function. These variables are only accessible
within the function call and cease to exist once the function call
is over.</p></li>
</ul>
<p>Let’s consider the <code>lbs_to_grams</code> function we made:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="func_loop.html#cb416-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams <span class="ot">&lt;-</span> <span class="cf">function</span>(lbs) {</span>
<span id="cb416-2"><a href="func_loop.html#cb416-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="ot">=</span> <span class="fl">453.5924</span> <span class="sc">*</span> lbs</span>
<span id="cb416-3"><a href="func_loop.html#cb416-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(grams)</span>
<span id="cb416-4"><a href="func_loop.html#cb416-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb416-5"><a href="func_loop.html#cb416-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-6"><a href="func_loop.html#cb416-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a variable in the global environment</span></span>
<span id="cb416-7"><a href="func_loop.html#cb416-7" aria-hidden="true" tabindex="-1"></a>glo_grams <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb416-8"><a href="func_loop.html#cb416-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb416-9"><a href="func_loop.html#cb416-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to access the local variable &quot;grams&quot;</span></span>
<span id="cb416-10"><a href="func_loop.html#cb416-10" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grams)</span></code></pre></div>
<pre><code>## Error in eval(expr, envir, enclos): object &#39;grams&#39; not found</code></pre>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="func_loop.html#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to access the global variable &quot;glo_grams&quot;</span></span>
<span id="cb418-2"><a href="func_loop.html#cb418-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(glo_grams)</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb420"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb420-1"><a href="func_loop.html#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lbs_to_grams(lbs):</span>
<span id="cb420-2"><a href="func_loop.html#cb420-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="op">=</span> <span class="fl">453.5924</span> <span class="op">*</span> lbs</span>
<span id="cb420-3"><a href="func_loop.html#cb420-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> grams</span>
<span id="cb420-4"><a href="func_loop.html#cb420-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-5"><a href="func_loop.html#cb420-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a variable in the global environment</span></span>
<span id="cb420-6"><a href="func_loop.html#cb420-6" aria-hidden="true" tabindex="-1"></a>glo_grams <span class="op">=</span> <span class="dv">2</span></span>
<span id="cb420-7"><a href="func_loop.html#cb420-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb420-8"><a href="func_loop.html#cb420-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to access the local variable &quot;grams&quot;</span></span>
<span id="cb420-9"><a href="func_loop.html#cb420-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(grams)</span></code></pre></div>
<pre><code>## name &#39;grams&#39; is not defined</code></pre>
<div class="sourceCode" id="cb422"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb422-1"><a href="func_loop.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Try to access the global variable &quot;glo_grams&quot;</span></span>
<span id="cb422-2"><a href="func_loop.html#cb422-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(glo_grams)</span></code></pre></div>
<pre><code>## 2</code></pre>
</div>
</div>
<p>In these functions, <code>lbs</code> and <code>grams</code> are variables in the local
environment of the function. They are created when the function is
called and cease to exist when the function call is over. If you try to
access <code>grams</code> outside of the function, you’ll get an error because
<code>grams</code> is not in the global environment.</p>
<p>On the other hand, <code>glo_grams</code> is in the global environment because it’s
created at the top level of the script, not within a function. You can
access <code>glo_grams</code> anywhere in your script <strong>even within a function</strong>.</p>
<p>This distinction between global and local variables helps keep our code
clean and reduces the chance of errors. It ensures that the function
does its job without interfering with the rest of our script! However,
it can be prone to errors too. Say for instance, I make a typo in the
argument name of my function above, and, for whatever reason I created a
lbs variable in the global… Like for instance:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="func_loop.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I specified in the global lbs at some point </span></span>
<span id="cb424-2"><a href="func_loop.html#cb424-2" aria-hidden="true" tabindex="-1"></a>lbs <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb424-3"><a href="func_loop.html#cb424-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-4"><a href="func_loop.html#cb424-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and here I made a typo!</span></span>
<span id="cb424-5"><a href="func_loop.html#cb424-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                            V</span></span>
<span id="cb424-6"><a href="func_loop.html#cb424-6" aria-hidden="true" tabindex="-1"></a>bug_lbs_to_grams <span class="ot">&lt;-</span> <span class="cf">function</span>(lb) {</span>
<span id="cb424-7"><a href="func_loop.html#cb424-7" aria-hidden="true" tabindex="-1"></a>  grams <span class="ot">=</span> <span class="fl">453.5924</span> <span class="sc">*</span> lbs</span>
<span id="cb424-8"><a href="func_loop.html#cb424-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(grams)</span>
<span id="cb424-9"><a href="func_loop.html#cb424-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb424-10"><a href="func_loop.html#cb424-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb424-11"><a href="func_loop.html#cb424-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, no matter what I call, I will always get the same result! </span></span>
<span id="cb424-12"><a href="func_loop.html#cb424-12" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g.: 453.5924 * 3 </span></span>
<span id="cb424-13"><a href="func_loop.html#cb424-13" aria-hidden="true" tabindex="-1"></a><span class="fu">bug_lbs_to_grams</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1360.777</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="func_loop.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bug_lbs_to_grams</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 1360.777</code></pre>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="func_loop.html#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bug_lbs_to_grams</span>(<span class="dv">42</span>)</span></code></pre></div>
<pre><code>## [1] 1360.777</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb430"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb430-1"><a href="func_loop.html#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="co"># I specified in the global lbs at some point </span></span>
<span id="cb430-2"><a href="func_loop.html#cb430-2" aria-hidden="true" tabindex="-1"></a>lbs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb430-3"><a href="func_loop.html#cb430-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-4"><a href="func_loop.html#cb430-4" aria-hidden="true" tabindex="-1"></a><span class="co"># and here I made a typo!</span></span>
<span id="cb430-5"><a href="func_loop.html#cb430-5" aria-hidden="true" tabindex="-1"></a><span class="co">#                     V</span></span>
<span id="cb430-6"><a href="func_loop.html#cb430-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> bug_lbs_to_grams(lb):</span>
<span id="cb430-7"><a href="func_loop.html#cb430-7" aria-hidden="true" tabindex="-1"></a>  grams <span class="op">=</span> <span class="fl">453.5924</span> <span class="op">*</span> lbs</span>
<span id="cb430-8"><a href="func_loop.html#cb430-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> grams</span>
<span id="cb430-9"><a href="func_loop.html#cb430-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb430-10"><a href="func_loop.html#cb430-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Then, no matter what I call, I will always get the same result! </span></span>
<span id="cb430-11"><a href="func_loop.html#cb430-11" aria-hidden="true" tabindex="-1"></a><span class="co"># e.g.: 453.5924 * 3 </span></span>
<span id="cb430-12"><a href="func_loop.html#cb430-12" aria-hidden="true" tabindex="-1"></a>bug_lbs_to_grams(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 1360.7772</code></pre>
<div class="sourceCode" id="cb432"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb432-1"><a href="func_loop.html#cb432-1" aria-hidden="true" tabindex="-1"></a>bug_lbs_to_grams(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## 1360.7772</code></pre>
<div class="sourceCode" id="cb434"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb434-1"><a href="func_loop.html#cb434-1" aria-hidden="true" tabindex="-1"></a>bug_lbs_to_grams(<span class="dv">42</span>)</span></code></pre></div>
<pre><code>## 1360.7772</code></pre>
</div>
</div>
<p>What happened above, is that I pass down as an input the <code>lb</code> argument
(without the s) <em>but this is nowhere used in the function</em> as inside the
code, at <code>grams = 453.5924 * lbs</code> I call the <code>lbs</code>. Now since the
compiler can’t find any <code>lbs</code> within the local enviroment, it will just
assume that this is the <code>lbs</code> I specified in the global. Hence, no
matter what I feed to the function, it will return the evaluation with
the global <code>lbs</code>. <strong>For this reason try not to name the variables inside
your functions as those outside it, in the rest of your script</strong>. What
happens if I do name a local variable and global variable in the same
way? Well, in this case, the function will use the local <code>lbs</code> variable,
and the global will use the global <code>lbs</code> variable <strong>but this is still
risky and prone to bugs</strong>.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="func_loop.html#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="co"># global lbs</span></span>
<span id="cb436-2"><a href="func_loop.html#cb436-2" aria-hidden="true" tabindex="-1"></a>lbs <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb436-3"><a href="func_loop.html#cb436-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb436-4"><a href="func_loop.html#cb436-4" aria-hidden="true" tabindex="-1"></a><span class="co"># but this does not affect the &quot;lbs&quot; of the function argument</span></span>
<span id="cb436-5"><a href="func_loop.html#cb436-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 907.1848</code></pre>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="func_loop.html#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1] 4535.924</code></pre>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="func_loop.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(<span class="dv">42</span>)</span></code></pre></div>
<pre><code>## [1] 19050.88</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb442"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb442-1"><a href="func_loop.html#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="co"># global lbs </span></span>
<span id="cb442-2"><a href="func_loop.html#cb442-2" aria-hidden="true" tabindex="-1"></a>lbs <span class="op">=</span> <span class="dv">3</span></span>
<span id="cb442-3"><a href="func_loop.html#cb442-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-4"><a href="func_loop.html#cb442-4" aria-hidden="true" tabindex="-1"></a><span class="co"># but this does not affect the &quot;lbs&quot; of the function argument</span></span>
<span id="cb442-5"><a href="func_loop.html#cb442-5" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 907.1848</code></pre>
<div class="sourceCode" id="cb444"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb444-1"><a href="func_loop.html#cb444-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(<span class="dv">10</span>)</span></code></pre></div>
<pre><code>## 4535.924</code></pre>
<div class="sourceCode" id="cb446"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb446-1"><a href="func_loop.html#cb446-1" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(<span class="dv">42</span>)</span></code></pre></div>
<pre><code>## 19050.8808</code></pre>
</div>
</div>
<p>For those who are newer to programming, don’t worry if the idea of
dealing with bugs and errors seems daunting. One of the most effective
ways to understand what’s happening in your code is to use <code>print</code>
statements. If you were confused by this section, try to add those
<code>print</code> statements to display the value of variables <code>lbs</code> and <code>grams</code>
within the functions above! In fact, by strategically placing print
statements in your code, you can see the values of variables at
different points in your program’s execution. This can help you
understand how your code is working and where potential issues might be.
As you gain more experience and confidence, you’ll naturally start to
develop more advanced strategies for managing and resolving bugs in your
code. Remember, everyone was a beginner once, and every expert has made
plenty of mistakes along the way. So don’t be discouraged by bugs in
your code - they’re just opportunities to learn and improve!</p>
<p><strong>NOTE for the more experienced users.</strong> It’s worth noting that
debugging tools can be incredibly helpful for identifying and resolving
issues in your code. A debugger is a program that helps you inspect
what’s happening in your program while it’s running. It allows you to
pause your program, inspect the values of variables in a given
environment at any point in time, and step through your code line by
line. This can be particularly useful for identifying issues like the
one we’ve discussed above. RStudio includes a built-in debugger that can
be a great help in these situations. You can learn more about debugging
in RStudio <a href="https://support.posit.co/hc/en-us/articles/205612627-Debugging-with-the-RStudio-IDE">in this
guide</a>.</p>
</div>
<div id="multiple-arguments" class="section level4 hasAnchor" number="3.1.1.2">
<h4><span class="header-section-number">3.1.1.2</span> Multiple arguments<a href="func_loop.html#multiple-arguments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Say we want now to convert pounds to milliliters. To convert from mass
to volume, we will need an additional information, the specific mass. In
physics, the specific mass (also known as the volumetric mass density)
of a substance is the mass per unit volume.</p>
<p>Fortunately for us, functions can take multiple arguments, allowing us
to give more elements to the local environment of the function. This
means we can customize the function’s behavior based on these inputs.
Let’s see how we can add more arguments to a function.</p>
<p>We’ll create a new function to convert pounds to milliliters. This
function will take a second argument: <code>specific_mass</code>. We’ll use the
function <strong>we created earlier</strong> to convert pounds to grams, and then,
using the <code>specific_mass</code>, we’ll convert grams to liters.</p>
<p>Here’s how we can do this in both R and Python:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="func_loop.html#cb448-1" aria-hidden="true" tabindex="-1"></a>lbs_to_ml <span class="ot">&lt;-</span> <span class="cf">function</span>(lbs, specific_mass) {</span>
<span id="cb448-2"><a href="func_loop.html#cb448-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="ot">&lt;-</span> <span class="fu">lbs_to_grams</span>(lbs)</span>
<span id="cb448-3"><a href="func_loop.html#cb448-3" aria-hidden="true" tabindex="-1"></a>  ml <span class="ot">&lt;-</span> grams <span class="sc">/</span> specific_mass</span>
<span id="cb448-4"><a href="func_loop.html#cb448-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ml)</span>
<span id="cb448-5"><a href="func_loop.html#cb448-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb448-6"><a href="func_loop.html#cb448-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-7"><a href="func_loop.html#cb448-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Specific mass of water and oil</span></span>
<span id="cb448-8"><a href="func_loop.html#cb448-8" aria-hidden="true" tabindex="-1"></a>water_mass <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb448-9"><a href="func_loop.html#cb448-9" aria-hidden="true" tabindex="-1"></a>oil_mass <span class="ot">=</span> <span class="fl">0.92</span></span>
<span id="cb448-10"><a href="func_loop.html#cb448-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb448-11"><a href="func_loop.html#cb448-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water and oil to ml</span></span>
<span id="cb448-12"><a href="func_loop.html#cb448-12" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>, water_mass)</span></code></pre></div>
<pre><code>## [1] 907.1848</code></pre>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="func_loop.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>, oil_mass)</span></code></pre></div>
<pre><code>## [1] 986.0704</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb452"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb452-1"><a href="func_loop.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lbs_to_ml(lbs, specific_mass):</span>
<span id="cb452-2"><a href="func_loop.html#cb452-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="op">=</span> lbs_to_grams(lbs)</span>
<span id="cb452-3"><a href="func_loop.html#cb452-3" aria-hidden="true" tabindex="-1"></a>  ml <span class="op">=</span> grams <span class="op">/</span> specific_mass</span>
<span id="cb452-4"><a href="func_loop.html#cb452-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ml</span>
<span id="cb452-5"><a href="func_loop.html#cb452-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-6"><a href="func_loop.html#cb452-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Specific mass of water and oil</span></span>
<span id="cb452-7"><a href="func_loop.html#cb452-7" aria-hidden="true" tabindex="-1"></a>water_mass <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb452-8"><a href="func_loop.html#cb452-8" aria-hidden="true" tabindex="-1"></a>oil_mass <span class="op">=</span> <span class="fl">0.92</span></span>
<span id="cb452-9"><a href="func_loop.html#cb452-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-10"><a href="func_loop.html#cb452-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water and oil to ml</span></span>
<span id="cb452-11"><a href="func_loop.html#cb452-11" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>, water_mass)</span></code></pre></div>
<pre><code>## 907.1848</code></pre>
<div class="sourceCode" id="cb454"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb454-1"><a href="func_loop.html#cb454-1" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>, oil_mass)</span></code></pre></div>
<pre><code>## 986.0704347826087</code></pre>
</div>
</div>
<p>To run the functions we just made:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="func_loop.html#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specific mass of water and oil</span></span>
<span id="cb456-2"><a href="func_loop.html#cb456-2" aria-hidden="true" tabindex="-1"></a>water_mass <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb456-3"><a href="func_loop.html#cb456-3" aria-hidden="true" tabindex="-1"></a>oil_mass <span class="ot">=</span> <span class="fl">0.92</span></span>
<span id="cb456-4"><a href="func_loop.html#cb456-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-5"><a href="func_loop.html#cb456-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water and oil to ml</span></span>
<span id="cb456-6"><a href="func_loop.html#cb456-6" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>, <span class="at">specific_mass=</span>water_mass)</span></code></pre></div>
<pre><code>## [1] 907.1848</code></pre>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="func_loop.html#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>, <span class="at">specific_mass=</span>oil_mass)</span></code></pre></div>
<pre><code>## [1] 986.0704</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb460"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb460-1"><a href="func_loop.html#cb460-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Specific mass of water and oil</span></span>
<span id="cb460-2"><a href="func_loop.html#cb460-2" aria-hidden="true" tabindex="-1"></a>water_mass <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb460-3"><a href="func_loop.html#cb460-3" aria-hidden="true" tabindex="-1"></a>oil_mass <span class="op">=</span> <span class="fl">0.92</span></span>
<span id="cb460-4"><a href="func_loop.html#cb460-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb460-5"><a href="func_loop.html#cb460-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water and oil to ml</span></span>
<span id="cb460-6"><a href="func_loop.html#cb460-6" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>, specific_mass<span class="op">=</span>water_mass)</span></code></pre></div>
<pre><code>## 907.1848</code></pre>
<div class="sourceCode" id="cb462"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb462-1"><a href="func_loop.html#cb462-1" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>, specific_mass<span class="op">=</span>oil_mass)</span></code></pre></div>
<pre><code>## 986.0704347826087</code></pre>
</div>
</div>
<p>Let’s say that 90% of the time when we are doing these calculations,
they are relative to using water. Then, to be more efficient, rather
than continuously having to give the mass of water, we could set the
arguments to have these as default values.</p>
<p>This is where default arguments in functions come into play. They are
incredibly useful as they allow us (and any potential future user) to
make certain parameters optional. This makes the function easier to use
and the the code more readable in general!</p>
<p>Here’s how we can do this in both R and Python:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="func_loop.html#cb464-1" aria-hidden="true" tabindex="-1"></a>lbs_to_ml <span class="ot">&lt;-</span> <span class="cf">function</span>(lbs, <span class="at">specific_weight =</span> <span class="dv">1</span>) {</span>
<span id="cb464-2"><a href="func_loop.html#cb464-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="ot">&lt;-</span> <span class="fu">lbs_to_grams</span>(lbs)</span>
<span id="cb464-3"><a href="func_loop.html#cb464-3" aria-hidden="true" tabindex="-1"></a>  ml <span class="ot">&lt;-</span> grams <span class="sc">/</span> specific_weight</span>
<span id="cb464-4"><a href="func_loop.html#cb464-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(ml)</span>
<span id="cb464-5"><a href="func_loop.html#cb464-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb464-6"><a href="func_loop.html#cb464-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb464-7"><a href="func_loop.html#cb464-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water to ml (default behavior)</span></span>
<span id="cb464-8"><a href="func_loop.html#cb464-8" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 907.1848</code></pre>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="func_loop.html#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of oil to ml (specific behavior)</span></span>
<span id="cb466-2"><a href="func_loop.html#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_ml</span>(<span class="dv">2</span>, <span class="fl">0.92</span>)</span></code></pre></div>
<pre><code>## [1] 986.0704</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb468"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb468-1"><a href="func_loop.html#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> lbs_to_ml(lbs, specific_weight<span class="op">=</span><span class="dv">1</span>):</span>
<span id="cb468-2"><a href="func_loop.html#cb468-2" aria-hidden="true" tabindex="-1"></a>  grams <span class="op">=</span> lbs_to_grams(lbs)</span>
<span id="cb468-3"><a href="func_loop.html#cb468-3" aria-hidden="true" tabindex="-1"></a>  ml <span class="op">=</span> grams <span class="op">/</span> specific_weight</span>
<span id="cb468-4"><a href="func_loop.html#cb468-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> ml</span>
<span id="cb468-5"><a href="func_loop.html#cb468-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb468-6"><a href="func_loop.html#cb468-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of water to ml (default behavior)</span></span>
<span id="cb468-7"><a href="func_loop.html#cb468-7" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## 907.1848</code></pre>
<div class="sourceCode" id="cb470"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb470-1"><a href="func_loop.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 2 lbs of oil to ml (specific behavior)</span></span>
<span id="cb470-2"><a href="func_loop.html#cb470-2" aria-hidden="true" tabindex="-1"></a>lbs_to_ml(<span class="dv">2</span>, <span class="fl">0.92</span>)</span></code></pre></div>
<pre><code>## 986.0704347826087</code></pre>
</div>
</div>
<p>As you can see, default arguments make our function more flexible and
easier to use. They allow the function to handle a wider range of
scenarios while keeping the code clean and readable.</p>
</div>
</div>
<div id="exercise-cups-to-grams-converter" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Exercise: cups to grams converter<a href="func_loop.html#exercise-cups-to-grams-converter" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So I once watched this movie with a small rat chef named Remy. Like it’s
a very popular one, but I can’t say the title for copyright reasons.
Anyway, let’s say that one day, Remy decides to leave his home in France
and set sail for the culinary world of the United States.</p>
<p>But as soon as Remy gets onto American soil, and he starts to explore
American recipes, he encounters a problem. All the measurements are in
cups! Back in France, he was used to grams and liters. “Mon Dieu!” he
exclaimed, “How am I supposed to cook with these cup measurements?”
[Imagine this phrase with a French accent].</p>
<p><img src="images/chapter3/chef.jpeg" width="292" /></p>
<p>But Remy is not a rat to be easily defeated: To make his life easier, he
decides to hire a programmer on Fiverr to convert cups to grams. You are
that programmer.</p>
<p>As we did with the functions we created before, you should:</p>
<ol style="list-style-type: decimal">
<li>Create a new function <code>cups_to_ml</code> that takes as input the number of
cups and returns as output the corresponding value in milliliters.
Use the relation <span class="math display">\[
cps = 236.588 * ml
\]</span></li>
<li>Create a new function called <code>ml_to_grams</code>. This function, as above,
will need the specific weight, but now the relation is given by the
inverse: <span class="math display">\[
g = ml * \rho,
\]</span> where <span class="math inline">\(\rho\)</span> is the specific weight.</li>
<li>Create a last function called <code>cups_to_grams</code>. This function should:
<ol style="list-style-type: lower-roman">
<li><p>Take as input two arguments: the number of cups, and a string
that specifies an ingredient, e.g. <code>"flour"</code> or <code>"water"</code>.
Default this second argument to <code>water</code>.</p></li>
<li><p>Convert the amount of cups in milliliters using the function
<code>cups_to_ml</code>.</p></li>
<li><p>With an if-if else-else statement, it should check the argument
<code>ingredient</code>, and set a <code>specific_weight</code> variable based on the
ingredient. You can find the values in the table below:</p>
<table>
<thead>
<tr class="header">
<th align="left">Ingredient</th>
<th align="left">Specific Weight (g/ml)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">water</td>
<td align="left">1</td>
</tr>
<tr class="even">
<td align="left">flour</td>
<td align="left">0.53</td>
</tr>
<tr class="odd">
<td align="left">oil</td>
<td align="left">0.92</td>
</tr>
<tr class="even">
<td align="left">oat Milk</td>
<td align="left">1.03</td>
</tr>
</tbody>
</table></li>
<li><p>Call the <code>ml_to_grams</code> function with the relative ml and
specific weight computed above, and return the result.</p></li>
</ol></li>
<li>Run the function to convert the following:
<ol style="list-style-type: lower-roman">
<li>2 cups of water</li>
<li>Half a cup of oil</li>
<li>3 cups of oat milk</li>
<li>2 cups of flour plus one cup of water</li>
</ol></li>
</ol>
</div>
</div>
<div id="looping" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> State and For Loop<a href="func_loop.html#looping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Normally, if you have to run some operations on multiple objects, you
would store these objects in a vector, and then work with the vector
directly. This is what we’ve been doing in the past weeks, and what
works for most of the times. For instance, let’s say we have a vector
called <code>measurements</code> in lbs and we want to convert all these
measurements to grams. Then, we can simply take our function
<code>lbs_to_grams</code> we made above, and run it on the <code>measurements</code> vector:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="func_loop.html#cb472-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a vector of measurements in lbs</span></span>
<span id="cb472-2"><a href="func_loop.html#cb472-2" aria-hidden="true" tabindex="-1"></a>measurements <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb472-3"><a href="func_loop.html#cb472-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb472-4"><a href="func_loop.html#cb472-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert measurements to grams</span></span>
<span id="cb472-5"><a href="func_loop.html#cb472-5" aria-hidden="true" tabindex="-1"></a><span class="fu">lbs_to_grams</span>(measurements)</span></code></pre></div>
<pre><code>## [1]  453.5924  907.1848 1360.7772</code></pre>
</div>
<div>
<p><strong>python</strong></p>
<div class="sourceCode" id="cb474"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb474-1"><a href="func_loop.html#cb474-1" aria-hidden="true" tabindex="-1"></a><span class="co"># importing numpy</span></span>
<span id="cb474-2"><a href="func_loop.html#cb474-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb474-3"><a href="func_loop.html#cb474-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-4"><a href="func_loop.html#cb474-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of measurements in lbs</span></span>
<span id="cb474-5"><a href="func_loop.html#cb474-5" aria-hidden="true" tabindex="-1"></a>measurements <span class="op">=</span> np.array([<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>])</span>
<span id="cb474-6"><a href="func_loop.html#cb474-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb474-7"><a href="func_loop.html#cb474-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert measurements to grams</span></span>
<span id="cb474-8"><a href="func_loop.html#cb474-8" aria-hidden="true" tabindex="-1"></a>lbs_to_grams(measurements)</span></code></pre></div>
<pre><code>## array([ 453.5924,  907.1848, 1360.7772])</code></pre>
</div>
</div>
<p>This will run the function on each element of the vector
<strong>independently</strong>.</p>
<p>More formally: in the first two weeks, we learned how to work with
vectors and vectorised functions, designed to operate on whole vectors
directly. Technically, we say that vectorised functions are trivially
parallelizable because there’s no dependency between elements (the value
of an element of the output vector does not depend on any other
element).</p>
<p>However, <em>while you should use vectorised functions as much as you can</em>,
they are not suitable for all programming tasks, particularly when the
computation of an element depends on the previous ones, i.e., when there
is a state involved.</p>
<p>A state is a scenario where certain steps in your code must be executed
in a specific order because the output of one step is the input to the
next step. In these circumstances, we find an answer in <strong>looping</strong>.
Loops allow us to execute a block of code multiple times, which is
exactly what we want in these scenarios.</p>
<p>The Fibonacci sequence is a classic example of a state. If you’re not
familiar with it, the Fibonacci sequence is a series of numbers in which
each number is the sum of the two preceding ones, usually starting with
0 and 1. The first 10 values in the series will be:</p>
<table>
<caption>This table shows the first 10 numbers of the Fibonacci sequence,
starting from <span class="math inline">\(r_{0}\)</span> to <span class="math inline">\(r_{9}\)</span>.</caption>
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
<col width="9%" />
</colgroup>
<thead>
<tr class="header">
<th><span class="math inline">\(r_{i}\)</span></th>
<th><span class="math inline">\(r_{0}\)</span></th>
<th><span class="math inline">\(r_{1}\)</span></th>
<th><span class="math inline">\(r_{2}\)</span></th>
<th><span class="math inline">\(r_{3}\)</span></th>
<th><span class="math inline">\(r_{4}\)</span></th>
<th><span class="math inline">\(r_{5}\)</span></th>
<th><span class="math inline">\(r_{6}\)</span></th>
<th><span class="math inline">\(r_{7}\)</span></th>
<th><span class="math inline">\(r_{8}\)</span></th>
<th><span class="math inline">\(r_{9}\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Value</td>
<td>0</td>
<td>1</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>5</td>
<td>8</td>
<td>13</td>
<td>21</td>
<td>34</td>
</tr>
</tbody>
</table>
<p>More formally, the Fibonacci sequence is defined by the recurrence
relation:</p>
<p><span class="math display">\[
r_{i} = r_{i - 1} + r_{i - 2} \quad \text{for}\quad i &gt; 2,
\]</span></p>
<p>with initial conditions <span class="math inline">\(r_{1} = 0\)</span> and <span class="math inline">\(r_{2} = 1\)</span>.</p>
<p>Well, unsurprisingly, in mathematics, you have already met the “for”
statements! As in mathematics a “for” allows to build a relation, a
“for” loop is a control flow statement that allows code to be executed
repeatedly.</p>
<p>Therefore, to generate the Fibonacci sequence using a “for” loop, we
could use the following algorithm:</p>
<ol style="list-style-type: decimal">
<li>Start by defining the first two numbers in the sequence, 0 and 1.</li>
<li>For a given number of iterations, do the following:
<ul>
<li>Calculate the next number in the sequence as the sum of the
previous two numbers.</li>
<li>Update the previous two numbers to be the last number and the
newly calculated number.</li>
</ul></li>
</ol>
<p>We will return to the Fibonacci example after having introduced the
<code>for</code> loop syntax.</p>
<div id="the-syntax" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> The syntax<a href="func_loop.html#the-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As the syntax in R and python for looping is quite different, <strong>R and
python chunks will be separate</strong>. You should be able to read each
language independently.</p>
<p>We can code a for loop as following.</p>
<p><strong>In R:</strong></p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="func_loop.html#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb476-2"><a href="func_loop.html#cb476-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb476-3"><a href="func_loop.html#cb476-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>In this R code, to explain the syntax:</p>
<ul>
<li><code>for (i in 1:10)</code> is the start of the for loop. The iterator <code>i</code>
goes from 1 to 10. <code>1:10</code> creates a vector: this is the sequence of
values we want to iterate over.</li>
<li><code>print(i)</code> is the code chunk that we want to repeat. In this case it
prints the current value of <code>i</code>.</li>
<li><code>i</code> is the object that stores our current index. It gets updated at
each step over the sequence of values for 1 to 10.</li>
<li>The for loop ends when it has exhausted the sequence, i.e., when <code>i</code>
has taken all values from 1 to 10.</li>
</ul>
<p>We can also use the for loop to iterate over the elements of a vector
directly, rather than their indices. For example, a for loop that prints
the elements of a vector:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="func_loop.html#cb478-1" aria-hidden="true" tabindex="-1"></a>vec <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;cherry&quot;</span>)</span>
<span id="cb478-2"><a href="func_loop.html#cb478-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (fruit <span class="cf">in</span> vec) {</span>
<span id="cb478-3"><a href="func_loop.html#cb478-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(fruit)</span>
<span id="cb478-4"><a href="func_loop.html#cb478-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;apple&quot;
## [1] &quot;banana&quot;
## [1] &quot;cherry&quot;</code></pre>
<p>In this case, <code>fruit</code> is the iterator that gets updated at each step
over the sequence with the current element of the sequence. The for loop
ends when it has exhausted the sequence.</p>
<p>Try to edit both code chunks above, by adding a new variable called
<code>iter_counts</code>. Initialize this variable at 0, e.g. <code>iter_counts &lt;- 0</code>,
and update it in the cycle with <code>iter_counts &lt;- iter_counts + 1</code>. Print
it at the end: what’s the value for the first cycle? And for the second?</p>
<p><strong>In Python:</strong></p>
<p>In Python, we can print the numbers from 1 to 10 using a for loop as
follows:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb480-1"><a href="func_loop.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">11</span>):</span>
<span id="cb480-2"><a href="func_loop.html#cb480-2" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(i)</span></code></pre></div>
<pre><code>## 1
## 2
## 3
## 4
## 5
## 6
## 7
## 8
## 9
## 10</code></pre>
<p>In this Python code, to explain the syntax:</p>
<ul>
<li><code>for i in range(1, 11)</code> is the start of the for loop. The iterator
<code>i</code> goes from 1 to 10. This is the sequence we want to iterate over.
We use <code>range</code> function to generate this figure: this function is
analogue to <code>np.arange</code> from numpy, but generates a different object
called “range” that is specific to iterators</li>
<li><code>print(i)</code> is the code chunk that we want to repeat. It prints the
current value of <code>i</code>.</li>
<li><code>i</code> is the object that stores our current index. It gets updated at
each step over the sequence.</li>
<li>The for loop ends when it has exhausted the sequence, i.e., when <code>i</code>
has taken all values from 1 to 10.</li>
</ul>
<p>We can also use the for loop to iterate over the elements of a numpy
array directly, rather than their indices. For example, a for loop that
prints the elements of a numpy array:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb482-1"><a href="func_loop.html#cb482-1" aria-hidden="true" tabindex="-1"></a>arr <span class="op">=</span> np.array([<span class="st">&quot;apple&quot;</span>, <span class="st">&quot;banana&quot;</span>, <span class="st">&quot;cherry&quot;</span>])</span>
<span id="cb482-2"><a href="func_loop.html#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> fruit <span class="kw">in</span> arr:</span>
<span id="cb482-3"><a href="func_loop.html#cb482-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(fruit)</span></code></pre></div>
<pre><code>## apple
## banana
## cherry</code></pre>
<p>In this Python code:</p>
<ul>
<li><code>arr = np.array(["apple", "banana", "cherry"])</code> creates a numpy
array with the elements “apple”, “banana”, and “cherry”.</li>
<li><code>for fruit in arr:</code> is the start of the for loop. The iterator
<code>fruit</code> goes over each element in the numpy array <code>arr</code>.</li>
<li><code>print(fruit)</code> is the code chunk that we want to repeat. It prints
the current value of <code>fruit</code>.</li>
<li><code>fruit</code> is the object that stores the current element of the array.
It gets updated at each step over the sequence.</li>
<li>The for loop ends when it has exhausted the sequence, i.e., when
<code>fruit</code> has taken all values in the numpy array <code>arr</code>.</li>
</ul>
<p>Try to edit both code chunks above, by adding a new variable called
<code>iter_counts</code>. Initialize this variable at 0, e.g. <code>iter_counts = 0</code>,
and update it in the cycle with <code>iter_counts = iter_counts + 1</code>. Print
it at the end: what’s the value for the first cycle? And for the second?</p>
</div>
<div id="coding-the-fibonacci-sequence" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Coding The Fibonacci sequence<a href="func_loop.html#coding-the-fibonacci-sequence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Having covered how to write a for cycle, we come back to our Fibonacci
example. Differently from the loop above, in order to implement our
algorithm, we will need to <strong>update a variable</strong> within our loop. In our
case, this variable, is going to be a vector storing our Fibonacci
sequence, called <code>fibonacci</code>. At iteration 1, the vector will be 2
elements long (the first two number of the sequence), but as we go
through the loop, we will be adding more and more elements to the
vector.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="func_loop.html#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the first two numbers in the sequence</span></span>
<span id="cb484-2"><a href="func_loop.html#cb484-2" aria-hidden="true" tabindex="-1"></a>fibonacci <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb484-3"><a href="func_loop.html#cb484-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb484-4"><a href="func_loop.html#cb484-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the next 18 numbers in the sequence</span></span>
<span id="cb484-5"><a href="func_loop.html#cb484-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">20</span>) {</span>
<span id="cb484-6"><a href="func_loop.html#cb484-6" aria-hidden="true" tabindex="-1"></a>  fibonacci[i] <span class="ot">&lt;-</span> fibonacci[i <span class="sc">-</span> <span class="dv">1</span>] <span class="sc">+</span> fibonacci[i <span class="sc">-</span> <span class="dv">2</span>]</span>
<span id="cb484-7"><a href="func_loop.html#cb484-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alternatively</span></span>
<span id="cb484-8"><a href="func_loop.html#cb484-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># fibonacci &lt;- c(fibonacci, fibonacci[i - 1] + fibonacci[i - 2])</span></span>
<span id="cb484-9"><a href="func_loop.html#cb484-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb485"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb485-1"><a href="func_loop.html#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Initialize the first two numbers in the sequence</span></span>
<span id="cb485-2"><a href="func_loop.html#cb485-2" aria-hidden="true" tabindex="-1"></a>fibonacci <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb485-3"><a href="func_loop.html#cb485-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-4"><a href="func_loop.html#cb485-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate the next 18 numbers in the sequence</span></span>
<span id="cb485-5"><a href="func_loop.html#cb485-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2</span>, <span class="dv">20</span>):</span>
<span id="cb485-6"><a href="func_loop.html#cb485-6" aria-hidden="true" tabindex="-1"></a>  fibonacci.append(fibonacci[i <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> fibonacci[i <span class="op">-</span> <span class="dv">2</span>])</span>
<span id="cb485-7"><a href="func_loop.html#cb485-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alternatively</span></span>
<span id="cb485-8"><a href="func_loop.html#cb485-8" aria-hidden="true" tabindex="-1"></a>  <span class="co">#fibonacci = fibonacci + [fibonacci[i - 1] + fibonacci[i - 2]]</span></span>
<span id="cb485-9"><a href="func_loop.html#cb485-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-10"><a href="func_loop.html#cb485-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb485-11"><a href="func_loop.html#cb485-11" aria-hidden="true" tabindex="-1"></a><span class="co"># converting the list into a numpy array </span></span>
<span id="cb485-12"><a href="func_loop.html#cb485-12" aria-hidden="true" tabindex="-1"></a><span class="co"># (useful if we want to use vectorised operations later!)</span></span>
<span id="cb485-13"><a href="func_loop.html#cb485-13" aria-hidden="true" tabindex="-1"></a>fibonacci <span class="op">=</span> np.array(fibonacci)</span></code></pre></div>
</div>
</div>
<p>In the R code:</p>
<ul>
<li><code>fibonacci &lt;- c(0, 1)</code> initializes the first two numbers in the
Fibonacci sequence.</li>
<li><code>for (i in 3:20)</code> is the start of the for loop. The iterator <code>i</code>
goes from 3 to 20. This is the sequence we want to iterate over.</li>
<li><code>fibonacci[i] &lt;- fibonacci[i - 1] + fibonacci[i - 2]</code> is the code
chunk that we want to repeat. It calculates the <code>i</code>th number in the
Fibonacci sequence as the sum of the two preceding numbers and
<strong>appends it</strong> to the <code>fibonacci</code> vector. Given that at iteration
<code>i</code> we have no element <code>i</code> in the vector yet (this is still <code>i-1</code>
long), R will automatically extend the vector of one extra element.
Alternatively, you can use the
<code>c(fibonacci, fibonacci[i - 1] + fibonacci[i - 2])</code> to concatenate
an extra vector (with one element) to the existing vector.</li>
</ul>
<p>In the Python code:</p>
<ul>
<li><code>fibonacci = [0, 1]</code> initializes the first two numbers in the
Fibonacci sequence.</li>
<li><code>for i in range(2, 20)</code> is the start of the for loop. The iterator
<code>i</code> goes from 2 to 19. This is the sequence we want to iterate over.</li>
<li><code>fibonacci.append(fibonacci[i - 1] + fibonacci[i - 2])</code> is the code
chunk that we want to repeat. It calculates the <code>i</code>th number in the
Fibonacci sequence as the sum of the two preceding numbers and
<strong>appends it</strong> to the <code>fibonacci</code> list using the <code>append()</code> method.
The append method extends our vector, adding a new element at the
end of the existing one. Alternatively, you can use the
<code>fibonacci + [fibonacci[i - 1] + fibonacci[i - 2]]</code> to concatenate
an extra vector (with one element) to the existing vector.</li>
</ul>
<p>Our vectors, where we stored our results at every iteration, should be
20 elements long, containing the sequence.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="func_loop.html#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the Fibonacci sequence</span></span>
<span id="cb486-2"><a href="func_loop.html#cb486-2" aria-hidden="true" tabindex="-1"></a>fibonacci</span></code></pre></div>
<pre><code>##  [1]    0    1    1    2    3    5    8   13   21   34   55
## [12]   89  144  233  377  610  987 1597 2584 4181</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb488"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb488-1"><a href="func_loop.html#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the Fibonacci sequence</span></span>
<span id="cb488-2"><a href="func_loop.html#cb488-2" aria-hidden="true" tabindex="-1"></a>fibonacci</span></code></pre></div>
<pre><code>## array([   0,    1,    1,    2,    3,    5,    8,   13,   21,   34,   55,
##          89,  144,  233,  377,  610,  987, 1597, 2584, 4181])</code></pre>
</div>
</div>
<p><strong>Before you proceed</strong> make sure you understand what’s going on inside
the for loop. Add extra <code>print</code> statements to understand what’s
happening at every iteration, e.g. try to add: <code>print(i)</code>,
<code>print(fibonacci[i])</code> and <code>print(fibonacci[i-1])</code> before the
computation, or <code>print(fibonacci)</code> after the computation has been done.
<code>print</code> statements are extremely useful for debugging for cycles!</p>
<div id="safer-for-loops" class="section level4 hasAnchor" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Safer for loops<a href="func_loop.html#safer-for-loops" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The for loop above is straightforward and works fine for the specific
task of computing the Fibonacci sequence alone. However, it could
potentially lead to issues if you wanted to modify or extend the code.
For example, if you wanted to change the calculation logic or use it in
a different context, you would need to modify the loop itself. This
could introduce errors and make the code harder to maintain.</p>
<p>However, there is an approach that is generally safer and more robust:
that of working with <strong>functions within your loops</strong>.</p>
<p>Have a look at the code below:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="func_loop.html#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define a function to update the Fibonacci sequence</span></span>
<span id="cb490-2"><a href="func_loop.html#cb490-2" aria-hidden="true" tabindex="-1"></a>update_fibonacci <span class="ot">&lt;-</span> <span class="cf">function</span>(R) {</span>
<span id="cb490-3"><a href="func_loop.html#cb490-3" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">length</span>(R)</span>
<span id="cb490-4"><a href="func_loop.html#cb490-4" aria-hidden="true" tabindex="-1"></a>  r_t <span class="ot">&lt;-</span> R[n] <span class="sc">+</span> R[n <span class="sc">-</span> <span class="dv">1</span>]</span>
<span id="cb490-5"><a href="func_loop.html#cb490-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(<span class="fu">c</span>(R, r_t))</span>
<span id="cb490-6"><a href="func_loop.html#cb490-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb490-7"><a href="func_loop.html#cb490-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-8"><a href="func_loop.html#cb490-8" aria-hidden="true" tabindex="-1"></a><span class="co"># define a function to compute the Fibonacci sequence</span></span>
<span id="cb490-9"><a href="func_loop.html#cb490-9" aria-hidden="true" tabindex="-1"></a>compute_fibonacci <span class="ot">&lt;-</span> <span class="cf">function</span>(n) {</span>
<span id="cb490-10"><a href="func_loop.html#cb490-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Initialize the first two numbers in the sequence</span></span>
<span id="cb490-11"><a href="func_loop.html#cb490-11" aria-hidden="true" tabindex="-1"></a>  fibonacci <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb490-12"><a href="func_loop.html#cb490-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb490-13"><a href="func_loop.html#cb490-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Generate the next n-2 numbers in the sequence</span></span>
<span id="cb490-14"><a href="func_loop.html#cb490-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">3</span><span class="sc">:</span>n) </span>
<span id="cb490-15"><a href="func_loop.html#cb490-15" aria-hidden="true" tabindex="-1"></a>    fibonacci <span class="ot">&lt;-</span> <span class="fu">update_fibonacci</span>(fibonacci)</span>
<span id="cb490-16"><a href="func_loop.html#cb490-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb490-17"><a href="func_loop.html#cb490-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(fibonacci)</span>
<span id="cb490-18"><a href="func_loop.html#cb490-18" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb490-19"><a href="func_loop.html#cb490-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-20"><a href="func_loop.html#cb490-20" aria-hidden="true" tabindex="-1"></a><span class="fu">compute_fibonacci</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>##  [1]    0    1    1    2    3    5    8   13   21   34   55
## [12]   89  144  233  377  610  987 1597 2584 4181</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb492"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb492-1"><a href="func_loop.html#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to update the Fibonacci sequence</span></span>
<span id="cb492-2"><a href="func_loop.html#cb492-2" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> update_fibonacci(R):</span>
<span id="cb492-3"><a href="func_loop.html#cb492-3" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="bu">len</span>(R)</span>
<span id="cb492-4"><a href="func_loop.html#cb492-4" aria-hidden="true" tabindex="-1"></a>    r_t <span class="op">=</span> R[n <span class="op">-</span> <span class="dv">1</span>] <span class="op">+</span> R[n <span class="op">-</span> <span class="dv">2</span>]</span>
<span id="cb492-5"><a href="func_loop.html#cb492-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> R <span class="op">+</span> [r_t]</span>
<span id="cb492-6"><a href="func_loop.html#cb492-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-7"><a href="func_loop.html#cb492-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Define a function to compute the Fibonacci sequence</span></span>
<span id="cb492-8"><a href="func_loop.html#cb492-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> compute_fibonacci(n):</span>
<span id="cb492-9"><a href="func_loop.html#cb492-9" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Initialize the first two numbers in the sequence</span></span>
<span id="cb492-10"><a href="func_loop.html#cb492-10" aria-hidden="true" tabindex="-1"></a>    fibonacci <span class="op">=</span> [<span class="dv">0</span>, <span class="dv">1</span>]</span>
<span id="cb492-11"><a href="func_loop.html#cb492-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb492-12"><a href="func_loop.html#cb492-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Generate the next n-2 numbers in the sequence</span></span>
<span id="cb492-13"><a href="func_loop.html#cb492-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">3</span>, n <span class="op">+</span> <span class="dv">1</span>):</span>
<span id="cb492-14"><a href="func_loop.html#cb492-14" aria-hidden="true" tabindex="-1"></a>        fibonacci <span class="op">=</span> update_fibonacci(fibonacci)</span>
<span id="cb492-15"><a href="func_loop.html#cb492-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb492-16"><a href="func_loop.html#cb492-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fibonacci</span>
<span id="cb492-17"><a href="func_loop.html#cb492-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-18"><a href="func_loop.html#cb492-18" aria-hidden="true" tabindex="-1"></a>compute_fibonacci(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>## [0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181]</code></pre>
</div>
</div>
<p>This solution is better on a lot of ways. The calculation logic of the
Fibonacci sequence is encapsulated within its own function,
<code>update_fibonacci</code>. Now, suppose you found a better method to deal with
that, you’d only need to change that part (spoiler: you can, ask a GPT
model if it has ways to improve on <code>update_fibonacci</code>).</p>
<p>Also, the computation of the full Fibonacci sequence is encapsulated in
its own function, <code>compute_fibonacci</code>! This makes the code more
organized and less prone to errors due to variables defined elsewhere
<strong>as it does not touch global variables</strong>.</p>
<p>For this reason, you can easily <strong>reuse</strong> the <code>compute_fibonacci</code>
function in other parts of your code or even in different programs! For
instance, this function might turn out to be useful in the next
exercise, where you’ll have to call it with <code>n=10</code>.</p>
</div>
</div>
<div id="exercise-3" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Exercise<a href="func_loop.html#exercise-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Write now a new function <code>my_cusum</code> to compute the cumulative sum of a
list of numbers, using a for loop. Use the function to calculate the
cumulative sum of the first 10 elements of the Fibonacci sequence.</p>
<p>The function should:</p>
<ul>
<li><p>Take as input a vector</p></li>
<li><p>Initialize a new vector to store the cumulative sum</p></li>
<li><p>Then, in a cycle, update this vector with the cumulative sum of the
elements of the input vector</p>
<ul>
<li><p>The output vector should be of the same length of the input
vector</p></li>
<li><p>The first element of the output vector should be the same first
element of the input vector</p></li>
</ul></li>
<li><p>Using the code above, generate a Fibonacci sequence of 10 numbers</p></li>
<li><p>Run the function <code>my_cusum(fibonacci)</code> to obtain the cumulative sum
of the first then numbers of the Fibonacci sequence.</p></li>
<li><p>Compare the output of <code>my_cusum</code> with the built in function <code>cumsum</code>
(in R) or numpy’s <code>np.cumsum</code> (in Python).</p></li>
</ul>
</div>
</div>
<div id="more-about-looping" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> More about looping<a href="func_loop.html#more-about-looping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section we will be giving few extra details and concepts you
should know about looping. If you got familiar with the <code>for</code> cycle
above, they should be fairly straightforward to understand!</p>
<div id="nested-loops" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Nested loops<a href="func_loop.html#nested-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Nested loops are useful when we have to repeat a block of code for each
combination of elements from two or more sequences. This can be
incredibly useful in many situations, such as when we want to perform an
operation for each pair of elements in two lists or vectors.</p>
<p>A simple example, for instance, could be a nested loop that prints the
multiplication table from 1 to 4.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="func_loop.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb494-2"><a href="func_loop.html#cb494-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (j <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>) {</span>
<span id="cb494-3"><a href="func_loop.html#cb494-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(i, <span class="st">&quot;x&quot;</span>, j, <span class="st">&quot;=&quot;</span>, i<span class="sc">*</span>j))</span>
<span id="cb494-4"><a href="func_loop.html#cb494-4" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb494-5"><a href="func_loop.html#cb494-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;1 x 1 = 1&quot;
## [1] &quot;1 x 2 = 2&quot;
## [1] &quot;1 x 3 = 3&quot;
## [1] &quot;1 x 4 = 4&quot;
## [1] &quot;2 x 1 = 2&quot;
## [1] &quot;2 x 2 = 4&quot;
## [1] &quot;2 x 3 = 6&quot;
## [1] &quot;2 x 4 = 8&quot;
## [1] &quot;3 x 1 = 3&quot;
## [1] &quot;3 x 2 = 6&quot;
## [1] &quot;3 x 3 = 9&quot;
## [1] &quot;3 x 4 = 12&quot;
## [1] &quot;4 x 1 = 4&quot;
## [1] &quot;4 x 2 = 8&quot;
## [1] &quot;4 x 3 = 12&quot;
## [1] &quot;4 x 4 = 16&quot;</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb496"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb496-1"><a href="func_loop.html#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb496-2"><a href="func_loop.html#cb496-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">5</span>):</span>
<span id="cb496-3"><a href="func_loop.html#cb496-3" aria-hidden="true" tabindex="-1"></a>      <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>i<span class="sc">}</span><span class="ss"> x </span><span class="sc">{</span>j<span class="sc">}</span><span class="ss"> = </span><span class="sc">{</span>i<span class="op">*</span>j<span class="sc">}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<pre><code>## 1 x 1 = 1
## 1 x 2 = 2
## 1 x 3 = 3
## 1 x 4 = 4
## 2 x 1 = 2
## 2 x 2 = 4
## 2 x 3 = 6
## 2 x 4 = 8
## 3 x 1 = 3
## 3 x 2 = 6
## 3 x 3 = 9
## 3 x 4 = 12
## 4 x 1 = 4
## 4 x 2 = 8
## 4 x 3 = 12
## 4 x 4 = 16</code></pre>
</div>
</div>
<p><strong>NOTE for Python users</strong> In the print statement
<code>print(f"{i} x {j} = {i*j}")</code> we used <strong>f-string formatting</strong>, which was
introduced in Python 3.6 (the code above will break on previous
versions). It’s a way to embed expressions (like <code>i*j</code>) inside strings,
using curly braces <code>{}</code>. The expressions will be replaced with their
values when the string is created. The letter <code>f</code> at the beginning of
the string tells Python to allow these embedded expressions.</p>
<p>In our example <code>{i}</code> and <code>{j}</code> will be replaced by the values of the
variables <code>i</code> and <code>j</code>, and <code>{i*j}</code> will be replaced by the result of the
expression <code>i*j</code>. So if <code>i</code> is 2 and <code>j</code> is 3, the string would become
<code>"2 x 3 = 6"</code>. F-string formatting can be very useful for debugging
because it allows you to easily insert the values of variables into
strings, which you can then print to see what’s happening in your loops!</p>
</div>
<div id="while-loops" class="section level3 hasAnchor" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> While loops<a href="func_loop.html#while-loops" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Similarly to for loops, we have the while loops. They allow us to repeat
a block of code until a certain condition is met. This can be incredibly
useful in many situations, such as when we want to perform an operation
until a certain threshold is reached.</p>
<p>We can see how a while loop works below:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="func_loop.html#cb498-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb498-2"><a href="func_loop.html#cb498-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="dv">10</span>) {</span>
<span id="cb498-3"><a href="func_loop.html#cb498-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb498-4"><a href="func_loop.html#cb498-4" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb498-5"><a href="func_loop.html#cb498-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb500"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb500-1"><a href="func_loop.html#cb500-1" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb500-2"><a href="func_loop.html#cb500-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> i <span class="op">&lt;=</span> <span class="dv">10</span>:</span>
<span id="cb500-3"><a href="func_loop.html#cb500-3" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(i)</span>
<span id="cb500-4"><a href="func_loop.html#cb500-4" aria-hidden="true" tabindex="-1"></a>  i <span class="op">+=</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## 1
## 2
## 3
## 4
## 5
## 6
## 7
## 8
## 9
## 10</code></pre>
</div>
</div>
<p>In these codes:</p>
<ul>
<li><code>i &lt;- 1</code> and <code>i = 1</code> initialize the counter at 1.</li>
<li><code>while (i &lt;= 10)</code> and <code>while i &lt;= 10:</code> start the while loop. The
condition <code>i &lt;= 10</code> is what we check at each step. If it’s true, we
execute the code chunk inside the loop.</li>
<li><code>print(i)</code> and <code>print(i)</code> are the code chunks that we want to
repeat. They print the current value of <code>i</code>.</li>
<li><code>i &lt;- i + 1</code> and <code>i += 1</code> are crucial. They update <code>i</code> at each step,
ensuring that our condition will eventually be false. Without these
lines, <code>i</code> would always be 1, the condition would always be true,
and the while loop would run indefinitely.</li>
<li>The while loop ends when the condition <code>i &lt;= 10</code> is no longer met,
i.e., when <code>i</code> is greater than 10.</li>
</ul>
<p>We are missing one last ingredient to looping! Break and next.</p>
</div>
<div id="break-and-nextcontinue" class="section level3 hasAnchor" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Break and next/continue<a href="func_loop.html#break-and-nextcontinue" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Break and next/continue are control flow statements that can be used to
alter the flow of a loop. They can be used when we want to stop a loop
if a certain condition is met or skip an iteration if a certain
condition is met.</p>
<p>To see how they work, we write a loop that prints the numbers from 1 to
10, but skips the number 5 and stops after the number 8.</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb502"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb502-1"><a href="func_loop.html#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb502-2"><a href="func_loop.html#cb502-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">5</span>) {</span>
<span id="cb502-3"><a href="func_loop.html#cb502-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span>  <span class="co"># Skip the rest of the iteration </span></span>
<span id="cb502-4"><a href="func_loop.html#cb502-4" aria-hidden="true" tabindex="-1"></a>          <span class="co"># and continue with the next iteration</span></span>
<span id="cb502-5"><a href="func_loop.html#cb502-5" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb502-6"><a href="func_loop.html#cb502-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">&gt;</span> <span class="dv">8</span>) {</span>
<span id="cb502-7"><a href="func_loop.html#cb502-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>  <span class="co"># Immediately terminate the loop</span></span>
<span id="cb502-8"><a href="func_loop.html#cb502-8" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb502-9"><a href="func_loop.html#cb502-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)  <span class="co"># Print the current value of i</span></span>
<span id="cb502-10"><a href="func_loop.html#cb502-10" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 6
## [1] 7
## [1] 8</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb504"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb504-1"><a href="func_loop.html#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1</span>, <span class="dv">11</span>):</span>
<span id="cb504-2"><a href="func_loop.html#cb504-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> i <span class="op">==</span> <span class="dv">5</span>:</span>
<span id="cb504-3"><a href="func_loop.html#cb504-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">continue</span>  <span class="co"># Skip the rest of the iteration </span></span>
<span id="cb504-4"><a href="func_loop.html#cb504-4" aria-hidden="true" tabindex="-1"></a>              <span class="co"># and continue with the next iteration</span></span>
<span id="cb504-5"><a href="func_loop.html#cb504-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> i <span class="op">&gt;</span> <span class="dv">8</span>:</span>
<span id="cb504-6"><a href="func_loop.html#cb504-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span>  <span class="co"># Immediately terminate the loop</span></span>
<span id="cb504-7"><a href="func_loop.html#cb504-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(i)  <span class="co"># Print the current value of i</span></span></code></pre></div>
<pre><code>## 1
## 2
## 3
## 4
## 6
## 7
## 8</code></pre>
</div>
</div>
<p>Let’s break it down:</p>
<ul>
<li><code>if (i == 5) { next }</code> (R) and <code>if i == 5: continue</code> (python) are
the next/continue statements. If <code>i</code> is equal to 5, they skip the
rest of the loop and continue with the next iteration. 5 won’t be
printed!</li>
<li><code>if (i &gt; 8) { break }</code> and <code>if i &gt; 8: break</code> are the break
statements. If <code>i</code> is greater than 8, they immediately terminate the
loop, regardless of the loop condition. As a result, we stop at 8,
and don’t continue to up to 10. <code>break</code> could be an alternative
stopping condition to a while loop.</li>
</ul>
<p>Using <code>break</code> and <code>next</code> (or <code>continue</code> in Python) statements in loops
can sometimes make the code harder to understand and debug, because they
can lead to unexpected jumps in the control flow. This is especially
true in more complex loops where it’s not immediately clear when or if
the loop will be prematurely terminated or skipped.</p>
<p>Usually, there’s always alternatives to <code>breaks</code>. Let’s consider a
simple example where we want to find the first number in a list that is
divisible by a certain number. Using <code>break</code>:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="func_loop.html#cb506-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">27</span>, <span class="dv">30</span>)</span>
<span id="cb506-2"><a href="func_loop.html#cb506-2" aria-hidden="true" tabindex="-1"></a>divisor <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb506-3"><a href="func_loop.html#cb506-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (num <span class="cf">in</span> numbers) {</span>
<span id="cb506-4"><a href="func_loop.html#cb506-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (num <span class="sc">%%</span> divisor <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb506-5"><a href="func_loop.html#cb506-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(num, <span class="st">&quot;is the first number divisible by&quot;</span>, divisor))</span>
<span id="cb506-6"><a href="func_loop.html#cb506-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span>
<span id="cb506-7"><a href="func_loop.html#cb506-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb506-8"><a href="func_loop.html#cb506-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;24 is the first number divisible by 4&quot;</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb508"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb508-1"><a href="func_loop.html#cb508-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">27</span>, <span class="dv">30</span>]</span>
<span id="cb508-2"><a href="func_loop.html#cb508-2" aria-hidden="true" tabindex="-1"></a>divisor <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb508-3"><a href="func_loop.html#cb508-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> num <span class="kw">in</span> numbers:</span>
<span id="cb508-4"><a href="func_loop.html#cb508-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> num <span class="op">%</span> divisor <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb508-5"><a href="func_loop.html#cb508-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>num<span class="sc">}</span><span class="ss"> is the first number divisible by </span><span class="sc">{</span>divisor<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb508-6"><a href="func_loop.html#cb508-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span></code></pre></div>
<pre><code>## 24 is the first number divisible by 4</code></pre>
</div>
</div>
<p>In this case, as soon as we find a number that meets our condition, we
<code>break</code> out of the loop. However, if we want to avoid using <code>break</code>, we
could rewrite the loop with a while to use a boolean flag that indicates
whether we’ve found a suitable number:</p>
<div style="display: grid; grid-template-columns: 1fr 1fr; grid-column-gap: 10px;">
<div>
<p><strong>R</strong></p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="func_loop.html#cb510-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">27</span>, <span class="dv">30</span>)</span>
<span id="cb510-2"><a href="func_loop.html#cb510-2" aria-hidden="true" tabindex="-1"></a>divisor <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb510-3"><a href="func_loop.html#cb510-3" aria-hidden="true" tabindex="-1"></a>found <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb510-4"><a href="func_loop.html#cb510-4" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb510-5"><a href="func_loop.html#cb510-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (<span class="sc">!</span>found <span class="sc">&amp;&amp;</span> i <span class="sc">&lt;=</span> <span class="fu">length</span>(numbers)) {</span>
<span id="cb510-6"><a href="func_loop.html#cb510-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (numbers[i] <span class="sc">%%</span> divisor <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb510-7"><a href="func_loop.html#cb510-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(numbers[i], <span class="st">&quot;is the first number divisible by&quot;</span>, divisor))</span>
<span id="cb510-8"><a href="func_loop.html#cb510-8" aria-hidden="true" tabindex="-1"></a>    found <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb510-9"><a href="func_loop.html#cb510-9" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb510-10"><a href="func_loop.html#cb510-10" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb510-11"><a href="func_loop.html#cb510-11" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;24 is the first number divisible by 4&quot;</code></pre>
</div>
<div>
<p><strong>Python</strong></p>
<div class="sourceCode" id="cb512"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb512-1"><a href="func_loop.html#cb512-1" aria-hidden="true" tabindex="-1"></a>numbers <span class="op">=</span> [<span class="dv">15</span>, <span class="dv">18</span>, <span class="dv">21</span>, <span class="dv">24</span>, <span class="dv">27</span>, <span class="dv">30</span>]</span>
<span id="cb512-2"><a href="func_loop.html#cb512-2" aria-hidden="true" tabindex="-1"></a>divisor <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb512-3"><a href="func_loop.html#cb512-3" aria-hidden="true" tabindex="-1"></a>found <span class="op">=</span> <span class="va">False</span></span>
<span id="cb512-4"><a href="func_loop.html#cb512-4" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb512-5"><a href="func_loop.html#cb512-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="kw">not</span> found <span class="kw">and</span> i <span class="op">&lt;</span> <span class="bu">len</span>(numbers):</span>
<span id="cb512-6"><a href="func_loop.html#cb512-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> numbers[i] <span class="op">%</span> divisor <span class="op">==</span> <span class="dv">0</span>:</span>
<span id="cb512-7"><a href="func_loop.html#cb512-7" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;</span><span class="sc">{</span>numbers[i]<span class="sc">}</span><span class="ss"> is the first number divisible by </span><span class="sc">{</span>divisor<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb512-8"><a href="func_loop.html#cb512-8" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> <span class="va">True</span></span>
<span id="cb512-9"><a href="func_loop.html#cb512-9" aria-hidden="true" tabindex="-1"></a>  i <span class="op">=</span> i <span class="op">+</span> <span class="dv">1</span></span></code></pre></div>
<pre><code>## 24 is the first number divisible by 4</code></pre>
</div>
</div>
<p>In this version, instead of breaking out of the loop, we use the <code>found</code>
variable to keep track of whether we’ve found a number that meets our
condition. If we have, we skip the rest of the loop iterations without
explicitly using a <code>break</code> statement.</p>
<hr />
<p><strong>Craving More Complexity?</strong></p>
<p><strong>Finding MATH245 a Walk in the Park?</strong></p>
<p><strong>Dive into our Extra Coding Challenges!</strong> You’ve mastered the basics,
now it’s time to test your mettle. Venture into the final Chapter
<a href="challenge.html#challenge">6</a> where a nasty bunch of medium to hard coding exercises
awaits. These brain-teasers are designed to stretch your coding skills
to their limits. Participation is optional, but if you’re up for a
challenge and keen to level up your skills, I highly recommend giving
them a go. Start with the Hats in a Line Challenge.</p>
<style type="text/css">
.book .book-body .page-wrapper .page-inner {
  max-width: 1200px !important;
}
</style>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="log_vec.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="maps_alg.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
